---
# Source: karmada/templates/etcd.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    
    app: "etcd"
  name: etcd-client
  namespace: karmada-system
spec:
  ports:
    - name: etcd-client-port
      port: 2379
      protocol: TCP
      targetPort: 2379
  selector:
    
    app: "etcd"
---
# Source: karmada/templates/etcd.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    
    app: "etcd"
  name: etcd
  namespace: karmada-system
spec:
  ports:
    - name: client
      port: 2379
      protocol: TCP
      targetPort: 2379
    - name: server
      port: 2380
      protocol: TCP
      targetPort: 2380
  clusterIP: None
  selector:
    
    app: "etcd"
---
# Source: karmada/templates/karmada-aggregated-apiserver.yaml
apiVersion: v1
kind: Service
metadata:
  name: karmada-aggregated-apiserver
  namespace: karmada-system
  labels:
    
    app: karmada-aggregated-apiserver
spec:
  ports:
    - port: 443
      protocol: TCP
      targetPort: 443
  selector:
    
    app: karmada-aggregated-apiserver
---
# Source: karmada/templates/karmada-apiserver.yaml
apiVersion: v1
kind: Service
metadata:
  name: karmada-apiserver
  namespace: karmada-system
  labels:
    
    app: karmada-apiserver
spec:
  type: NodePort
  ports:
    - name: karmada-apiserver
      port: 5443
      protocol: TCP
      targetPort: 5443
  selector:
    
    app: karmada-apiserver
---
# Source: karmada/templates/karmada-webhook.yaml
apiVersion: v1
kind: Service
metadata:
  name: karmada-webhook
  namespace: karmada-system
spec:
  selector:
        
        app: karmada-webhook
  ports:
    - port: 443
      targetPort: 8443
---
# Source: karmada/templates/karmada-aggregated-apiserver.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: karmada-aggregated-apiserver
  namespace: karmada-system
  labels:
    
    app: karmada-aggregated-apiserver
spec:
  selector:
    matchLabels:
      
      app: karmada-aggregated-apiserver
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 50%
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app: karmada-aggregated-apiserver
        
    spec:
      
      automountServiceAccountToken: false
      initContainers:
        - name: wait
          image: docker.io/bitnamisecure/kubectl:latest
          imagePullPolicy: IfNotPresent
          command:
            - /bin/sh
            - -c
            - |
              bash <<'EOF'
              set -ex
        
              # here are three cases:
              # case first installation: no `cm/karmada-version` at first, so when you get it, it means `karmada-static-resource-job` finished.
              # case restart: already has `cm/karmada-version`, which means `karmada-static-resource-job` already finished.
              # case upgrading: already has `cm/karmada-version`, but it may be old version, we should wait until `.data.karmadaVersion` equal to current `.Values.karmadaImageVersion`.
              while [[ $(kubectl --kubeconfig /etc/kubeconfig get configmap karmada-version -n karmada-system -o jsonpath='{.data.karmadaVersion}') != v1.16.0 ]]; do
                echo "wait for karmada-static-resource-job finished"; sleep 2
              done
        
              echo "karmada-static-resource-job successfully completed since expected configmap value was found"
              EOF
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
      containers:
        - name: karmada-aggregated-apiserver
          image: docker.io/karmada/karmada-aggregated-apiserver:v1.16.0
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
            - name: etcd-cert
              mountPath: /etc/etcd/pki
              readOnly: true
            - name: apiserver-cert
              mountPath: /etc/kubernetes/pki
              readOnly: true
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          command:
            - /bin/karmada-aggregated-apiserver
            - --kubeconfig=/etc/kubeconfig
            - --authentication-kubeconfig=/etc/kubeconfig
            - --authorization-kubeconfig=/etc/kubeconfig
            - --etcd-cafile=/etc/etcd/pki/server-ca.crt
            - --etcd-certfile=/etc/etcd/pki/karmada.crt
            - --etcd-keyfile=/etc/etcd/pki/karmada.key
            - --etcd-servers=https://etcd-client.karmada-system.svc.cluster.local:2379
            - --tls-cert-file=/etc/kubernetes/pki/karmada.crt
            - --tls-private-key-file=/etc/kubernetes/pki/karmada.key
            - --audit-log-path=-
            - --audit-log-maxage=0
            - --audit-log-maxbackup=0
            - --tls-min-version=VersionTLS13
            - --bind-address=$(POD_IP)
          resources:
            requests:
              cpu: 100m
          readinessProbe:
            httpGet:
              path: /readyz
              port: 443
              scheme: HTTPS
            initialDelaySeconds: 1
            periodSeconds: 3
            timeoutSeconds: 15
          livenessProbe:
            httpGet:
              path: /healthz
              port: 443
              scheme: HTTPS
            initialDelaySeconds: 10
            periodSeconds: 10
            timeoutSeconds: 15
      priorityClassName: system-node-critical
      volumes:
        - name: kubeconfig-secret
          secret:
            secretName: karmada-kubeconfig
        - name: apiserver-cert
          secret:
            secretName: karmada-cert
        - name: etcd-cert
          secret:
            secretName: karmada-cert
---
# Source: karmada/templates/karmada-apiserver.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: karmada-apiserver
  namespace: karmada-system
  labels:
    
    app: karmada-apiserver
spec:
  replicas: 1
  selector:
    matchLabels:
      
      app: karmada-apiserver
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app: karmada-apiserver
        
    spec:
      
      automountServiceAccountToken: false
      initContainers:
        - name: wait
          image: docker.io/cfssl/cfssl:latest
          imagePullPolicy: IfNotPresent
          command:
            - /bin/sh
            - -c
            - |
              bash <<'EOF'
              set -ex
              while true; do
                ETCD_ENDPOINT=${ETCD_CLIENT_SERVICE_HOST}":"${ETCD_CLIENT_SERVICE_PORT}
        
                # check etcd connectivity by executing curl.
                # if etcd is ready, the response of curl would be `curl: (52) Empty reply from server`, with return code 52.
                # if not, the response of curl would be like `curl: (7) Failed to connect to .....`, with other return code.
                if curl --connect-timeout 2 ${ETCD_ENDPOINT} || [ $? -eq 52 ]; then
                  break
                fi
        
                echo "failed to connect to "${ETCD_ENDPOINT}
                sleep 2
              done
              echo "successfully connect to "${ETCD_ENDPOINT}
              EOF
      containers:
        - name: karmada-apiserver
          image: registry.k8s.io/kube-apiserver:v1.34.1
          imagePullPolicy: IfNotPresent
          command:
            - kube-apiserver
            - --allow-privileged=true
            - --authorization-mode=Node,RBAC
            - --client-ca-file=/etc/kubernetes/pki/server-ca.crt
            - --disable-admission-plugins=StorageObjectInUseProtection,ServiceAccount
            - --enable-bootstrap-token-auth=true
            - --etcd-cafile=/etc/etcd/pki/server-ca.crt
            - --etcd-certfile=/etc/etcd/pki/karmada.crt
            - --etcd-keyfile=/etc/etcd/pki/karmada.key
            - --etcd-servers=https://etcd-client.karmada-system.svc.cluster.local:2379
            - --bind-address=0.0.0.0
            - --runtime-config=
            - --secure-port=5443
            - --service-account-issuer=https://kubernetes.default.svc.cluster.local
            - --service-account-key-file=/etc/kubernetes/pki/karmada.key
            - --service-account-signing-key-file=/etc/kubernetes/pki/karmada.key
            - --service-cluster-ip-range=10.96.0.0/12
            - --proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt
            - --proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client.key
            - --requestheader-allowed-names=front-proxy-client
            - --requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt
            - --requestheader-extra-headers-prefix=X-Remote-Extra-
            - --requestheader-group-headers=X-Remote-Group
            - --requestheader-username-headers=X-Remote-User
            - --tls-cert-file=/etc/kubernetes/pki/karmada.crt
            - --tls-private-key-file=/etc/kubernetes/pki/karmada.key
            - --max-requests-inflight=1500
            - --max-mutating-requests-inflight=500
            - --tls-min-version=VersionTLS13
          ports:
            - name: http
              containerPort: 5443
              protocol: TCP
          livenessProbe:
            failureThreshold: 8
            httpGet:
              path: /livez
              port: 5443
              scheme: HTTPS
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 15
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /readyz
              port: 5443
              scheme: HTTPS
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 15
          resources:
            {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - name: apiserver-cert
              mountPath: /etc/kubernetes/pki
              readOnly: true
            - name: etcd-cert
              mountPath: /etc/etcd/pki
              readOnly: true
      enableServiceLinks: true
      preemptionPolicy: PreemptLowerPriority
      priority: 2000001000
      restartPolicy: Always
      schedulerName: default-scheduler
      terminationGracePeriodSeconds: 30
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchExpressions:
              - key: app
                operator: In
                values:
                - karmada-apiserver
            topologyKey: kubernetes.io/hostname
      priorityClassName: system-node-critical
      volumes:
        - name: apiserver-cert
          secret:
            secretName: karmada-cert
        - name: etcd-cert
          secret:
            secretName: karmada-cert
---
# Source: karmada/templates/karmada-controller-manager.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: karmada-controller-manager
  namespace: karmada-system
  labels:
    
    app: karmada-controller-manager
spec:
  replicas: 1
  selector:
    matchLabels:
      
      app: karmada-controller-manager
  strategy:
    rollingUpdate:
      maxSurge: 50%
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app: karmada-controller-manager
        
    spec:
      
      automountServiceAccountToken: false
      priorityClassName: system-node-critical
      volumes:
        - name: kubeconfig-secret
          secret:
            secretName: karmada-kubeconfig
      initContainers:
        - name: wait
          image: docker.io/bitnamisecure/kubectl:latest
          imagePullPolicy: IfNotPresent
          command:
            - /bin/sh
            - -c
            - |
              bash <<'EOF'
              set -ex
        
              # here are three cases:
              # case first installation: no `cm/karmada-version` at first, so when you get it, it means `karmada-static-resource-job` finished.
              # case restart: already has `cm/karmada-version`, which means `karmada-static-resource-job` already finished.
              # case upgrading: already has `cm/karmada-version`, but it may be old version, we should wait until `.data.karmadaVersion` equal to current `.Values.karmadaImageVersion`.
              while [[ $(kubectl --kubeconfig /etc/kubeconfig get configmap karmada-version -n karmada-system -o jsonpath='{.data.karmadaVersion}') != v1.16.0 ]]; do
                echo "wait for karmada-static-resource-job finished"; sleep 2
              done
        
              echo "karmada-static-resource-job successfully completed since expected configmap value was found"
              EOF
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
      containers:
        - name: karmada-controller-manager
          image: docker.io/karmada/karmada-controller-manager:v1.16.0
          imagePullPolicy: IfNotPresent
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          command:
            - /bin/karmada-controller-manager
            - --kubeconfig=/etc/kubeconfig
            - --cluster-status-update-frequency=10s
            - --leader-elect-resource-namespace=karmada-system
            - --metrics-bind-address=$(POD_IP):8080
            - --health-probe-bind-address=$(POD_IP):10357
            - --v=2
            - --feature-gates=PropagateDeps=false
            
          livenessProbe:
            httpGet:
              path: /healthz
              port: 10357
              scheme: HTTP
            failureThreshold: 3
            initialDelaySeconds: 15
            periodSeconds: 15
            timeoutSeconds: 5
          ports:
            - containerPort: 8080
              name: metrics
              protocol: TCP
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
          resources:
            {}
---
# Source: karmada/templates/karmada-scheduler.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: karmada-scheduler
  namespace: karmada-system
  labels:
    
    app: karmada-scheduler
spec:
  replicas: 1
  selector:
    matchLabels:
      
      app: karmada-scheduler
  strategy:
    rollingUpdate:
      maxSurge: 50%
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app: karmada-scheduler
        
    spec:
      
      automountServiceAccountToken: false
      initContainers:
        - name: wait
          image: docker.io/bitnamisecure/kubectl:latest
          imagePullPolicy: IfNotPresent
          command:
            - /bin/sh
            - -c
            - |
              bash <<'EOF'
              set -ex
        
              # here are three cases:
              # case first installation: no `cm/karmada-version` at first, so when you get it, it means `karmada-static-resource-job` finished.
              # case restart: already has `cm/karmada-version`, which means `karmada-static-resource-job` already finished.
              # case upgrading: already has `cm/karmada-version`, but it may be old version, we should wait until `.data.karmadaVersion` equal to current `.Values.karmadaImageVersion`.
              while [[ $(kubectl --kubeconfig /etc/kubeconfig get configmap karmada-version -n karmada-system -o jsonpath='{.data.karmadaVersion}') != v1.16.0 ]]; do
                echo "wait for karmada-static-resource-job finished"; sleep 2
              done
        
              echo "karmada-static-resource-job successfully completed since expected configmap value was found"
              EOF
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
      containers:
        - name: karmada-scheduler
          image: docker.io/karmada/karmada-scheduler:v1.16.0
          imagePullPolicy: IfNotPresent
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          command:
            - /bin/karmada-scheduler
            - --kubeconfig=/etc/kubeconfig
            - --metrics-bind-address=$(POD_IP):8080
            - --health-probe-bind-address=$(POD_IP):10351
            - --leader-elect-resource-namespace=karmada-system
            - --scheduler-estimator-ca-file=/etc/karmada/pki/server-ca.crt
            - --scheduler-estimator-cert-file=/etc/karmada/pki/karmada.crt
            - --scheduler-estimator-key-file=/etc/karmada/pki/karmada.key
          livenessProbe:
            httpGet:
              path: /healthz
              port: 10351
              scheme: HTTP
            failureThreshold: 3
            initialDelaySeconds: 15
            periodSeconds: 15
            timeoutSeconds: 5
          ports:
            - containerPort: 8080
              name: metrics
              protocol: TCP
          volumeMounts:
            - name: karmada-certs
              mountPath: /etc/karmada/pki
              readOnly: true
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
          resources:
            {}
      priorityClassName: system-node-critical
      volumes:
        - name: kubeconfig-secret
          secret:
            secretName: karmada-kubeconfig
        
        - name: karmada-certs
          secret:
            secretName: karmada-cert
---
# Source: karmada/templates/karmada-webhook.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: karmada-webhook
  namespace: karmada-system
  labels:
    
    app: karmada-webhook
spec:
  replicas: 1
  selector:
    matchLabels:
      
      app: karmada-webhook
  strategy:
    rollingUpdate:
      maxSurge: 50%
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app: karmada-webhook
        
    spec:
      
      automountServiceAccountToken: false
      initContainers:
        - name: wait
          image: docker.io/bitnamisecure/kubectl:latest
          imagePullPolicy: IfNotPresent
          command:
            - /bin/sh
            - -c
            - |
              bash <<'EOF'
              set -ex
        
              # here are three cases:
              # case first installation: no `cm/karmada-version` at first, so when you get it, it means `karmada-static-resource-job` finished.
              # case restart: already has `cm/karmada-version`, which means `karmada-static-resource-job` already finished.
              # case upgrading: already has `cm/karmada-version`, but it may be old version, we should wait until `.data.karmadaVersion` equal to current `.Values.karmadaImageVersion`.
              while [[ $(kubectl --kubeconfig /etc/kubeconfig get configmap karmada-version -n karmada-system -o jsonpath='{.data.karmadaVersion}') != v1.16.0 ]]; do
                echo "wait for karmada-static-resource-job finished"; sleep 2
              done
        
              echo "karmada-static-resource-job successfully completed since expected configmap value was found"
              EOF
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
      containers:
        - name: karmada-webhook
          image: docker.io/karmada/karmada-webhook:v1.16.0
          imagePullPolicy: IfNotPresent
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          command:
            - /bin/karmada-webhook
            - --kubeconfig=/etc/kubeconfig
            - --bind-address=$(POD_IP)
            - --metrics-bind-address=$(POD_IP):8080
            - --health-probe-bind-address=$(POD_IP):8000
            - --secure-port=8443
            - --cert-dir=/var/serving-cert
          ports:
            - containerPort: 8443
            - containerPort: 8080
              name: metrics
              protocol: TCP
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
            - name: karmada-webhook-cert-secret
              mountPath: /var/serving-cert
              readOnly: true
          readinessProbe:
            httpGet:
              path: /readyz
              port: 8443
              scheme: HTTPS
          resources:
            {}
      priorityClassName: system-node-critical
      volumes:
        - name: kubeconfig-secret
          secret:
            secretName: karmada-kubeconfig
        - name: karmada-webhook-cert-secret
          secret:
            secretName: karmada-webhook-cert
---
# Source: karmada/templates/kube-controller-manager.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: karmada-kube-controller-manager
  namespace: karmada-system
  labels:
    
    app: kube-controller-manager
spec:
  replicas: 1
  selector:
    matchLabels:
      
      app: kube-controller-manager
  strategy:
    rollingUpdate:
      maxSurge: 50%
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app: kube-controller-manager
        
    spec:
      
      automountServiceAccountToken: false
      initContainers:
        - name: wait
          image: docker.io/bitnamisecure/kubectl:latest
          imagePullPolicy: IfNotPresent
          command:
            - /bin/sh
            - -c
            - |
              bash <<'EOF'
              set -ex
        
              # here are three cases:
              # case first installation: no `cm/karmada-version` at first, so when you get it, it means `karmada-static-resource-job` finished.
              # case restart: already has `cm/karmada-version`, which means `karmada-static-resource-job` already finished.
              # case upgrading: already has `cm/karmada-version`, but it may be old version, we should wait until `.data.karmadaVersion` equal to current `.Values.karmadaImageVersion`.
              while [[ $(kubectl --kubeconfig /etc/kubeconfig get configmap karmada-version -n karmada-system -o jsonpath='{.data.karmadaVersion}') != v1.16.0 ]]; do
                echo "wait for karmada-static-resource-job finished"; sleep 2
              done
        
              echo "karmada-static-resource-job successfully completed since expected configmap value was found"
              EOF
          volumeMounts:
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
      containers:
        - command:
            - kube-controller-manager
            - --allocate-node-cidrs=true
            - --authentication-kubeconfig=/etc/kubeconfig
            - --authorization-kubeconfig=/etc/kubeconfig
            - --bind-address=0.0.0.0
            - --client-ca-file=/etc/karmada/pki/server-ca.crt
            - --cluster-cidr=10.244.0.0/16
            - --cluster-name=karmada
            - --cluster-signing-cert-file=/etc/karmada/pki/server-ca.crt
            - --cluster-signing-key-file=/etc/karmada/pki/server-ca.key
            - --controllers=namespace,garbagecollector,serviceaccount-token,ttl-after-finished,bootstrapsigner,tokencleaner,csrcleaner,csrsigning,clusterrole-aggregation
            - --kubeconfig=/etc/kubeconfig
            - --leader-elect=true
            - --node-cidr-mask-size=24
            - --root-ca-file=/etc/karmada/pki/server-ca.crt
            - --service-account-private-key-file=/etc/karmada/pki/karmada.key
            - --service-cluster-ip-range=10.96.0.0/12
            - --use-service-account-credentials=true
            - --v=5
          image: registry.k8s.io/kube-controller-manager:v1.34.1
          livenessProbe:
            failureThreshold: 8
            httpGet:
              path: /healthz
              port: 10257
              scheme: HTTPS
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 15
          imagePullPolicy: IfNotPresent
          name: kube-controller-manager
          resources:
            null
          volumeMounts:
            - mountPath: /etc/karmada/pki
              name: apiserver-cert
              readOnly: true
            - name: kubeconfig-secret
              subPath: kubeconfig
              mountPath: /etc/kubeconfig
      priorityClassName: system-node-critical
      volumes:
        - name: apiserver-cert
          secret:
            secretName: karmada-cert
        - name: kubeconfig-secret
          secret:
            secretName: karmada-kubeconfig
---
# Source: karmada/templates/etcd.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: etcd
  namespace: karmada-system
  labels:
    
    app: "etcd"
spec:
  replicas: 1
  serviceName: etcd
  selector:
    matchLabels:
      
      app: "etcd"
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app: "etcd"
        
    spec:
      automountServiceAccountToken: false
      
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchExpressions:
              - key: app
                operator: In
                values:
                - etcd
            topologyKey: kubernetes.io/hostname
      containers:
        - name: etcd
          image: registry.k8s.io/etcd:3.6.0-0
          imagePullPolicy: IfNotPresent
          livenessProbe:
            exec:
              command:
                - /bin/sh
                - -ec
                - 'etcdctl get /registry --prefix --keys-only  --endpoints https://127.0.0.1:2379  --cacert /etc/kubernetes/pki/etcd/server-ca.crt --cert /etc/kubernetes/pki/etcd/karmada.crt --key /etc/kubernetes/pki/etcd/karmada.key'
            failureThreshold: 3
            initialDelaySeconds: 600
            periodSeconds: 60
            successThreshold: 1
            timeoutSeconds: 10
          env:
            - name: KARMADA_ETCD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          ports:
            - containerPort: 2379
              name: client
              protocol: TCP
            - containerPort: 2380
              name: server
              protocol: TCP
          resources:
            {}
          volumeMounts:
            - mountPath: /var/lib/etcd
              name: etcd-data
            - name: etcd-cert
              mountPath: /etc/kubernetes/pki/etcd
              readOnly: true
          command:
            - /usr/local/bin/etcd
            - --name
            - $(KARMADA_ETCD_NAME)
            - --listen-peer-urls
            - http://0.0.0.0:2380
            - --listen-client-urls
            - https://0.0.0.0:2379
            - --advertise-client-urls
            - https://etcd-client.karmada-system.svc.cluster.local:2379
            - --initial-cluster
            - "etcd-0=http://etcd-0.etcd.karmada-system.svc.cluster.local:2380"
            - --initial-cluster-state
            - new
            - --cert-file=/etc/kubernetes/pki/etcd/karmada.crt
            - --client-cert-auth=true
            - --key-file=/etc/kubernetes/pki/etcd/karmada.key
            - --trusted-ca-file=/etc/kubernetes/pki/etcd/server-ca.crt
            - --data-dir=/var/lib/etcd
            # Setting Golang's secure cipher suites as etcd's cipher suites.
            # They are obtained by the return value of the function CipherSuites() under the go/src/crypto/tls/cipher_suites.go package.
            # Consistent with the Preferred values of k8sâ€™s default cipher suites.
            - --cipher-suites=TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_128_GCM_SHA256,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_AES_128_GCM_SHA256,TLS_AES_256_GCM_SHA384,TLS_CHACHA20_POLY1305_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305
      priorityClassName: system-node-critical
      volumes:
        - name: etcd-cert
          secret:
            secretName: karmada-cert
        - hostPath:
            path: /var/lib/karmada-system/karmada-etcd
            type: DirectoryOrCreate
          name: etcd-data
---
# Source: karmada/templates/karmada-static-resource-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "karmada-static-resource"
  namespace: karmada-system
  labels:
    
spec:
  parallelism: 1
  completions: 1
  ttlSecondsAfterFinished: 10
  template:
    metadata:
      name: karmada
      labels:
        
    spec:
      
      serviceAccountName: karmada-hook-job
      restartPolicy: Never
      containers:
      - name: post-install
        image: docker.io/bitnamisecure/kubectl:latest
        imagePullPolicy: IfNotPresent
        command:
        - /bin/sh
        - -c
        - |
          bash <<'EOF'
          set -ex
          kubectl rollout status deployment karmada-apiserver -n karmada-system
          kubectl apply -k /crds --kubeconfig /etc/kubeconfig
          kubectl apply -f /static-resources/system-namespace.yaml --kubeconfig /etc/kubeconfig
          kubectl apply -f /static-resources/ --kubeconfig /etc/kubeconfig

          kubectl --kubeconfig /etc/kubeconfig apply -f - <<InnerEOF
          apiVersion: v1
          kind: ConfigMap
          metadata:
            name: karmada-version
            namespace: karmada-system
          data:
            karmadaVersion: v1.16.0
          InnerEOF

          EOF
        volumeMounts:
          - name: karmada-crds-kustomization
            mountPath: /crds
          - name: karmada-crds-patches
            mountPath: /crds/patches
          - name: karmada-crds-autoscaling-bases
            mountPath: /crds/bases/autoscaling
          - name: karmada-crds-config-bases
            mountPath: /crds/bases/config
          - name: karmada-crds-multicluster-bases
            mountPath: /crds/bases/multicluster
          - name: karmada-crds-networking-bases
            mountPath: /crds/bases/networking
          - name: karmada-crds-policy-bases
            mountPath: /crds/bases/policy
          - name: karmada-crds-remedy-bases
            mountPath: /crds/bases/remedy
          - name: karmada-crds-work-bases
            mountPath: /crds/bases/work
          - name: karmada-crds-apps-bases
            mountPath: /crds/bases/apps
          - name: karmada-static-resources
            mountPath: /static-resources
          
          - name: kubeconfig-secret
            subPath: kubeconfig
            mountPath: /etc/kubeconfig
      volumes:
        - name: karmada-crds-kustomization
          configMap:
            name: karmada-crds-kustomization
        - name: karmada-crds-patches
          configMap:
            name: karmada-crds-patches
        - name: karmada-crds-autoscaling-bases
          configMap:
            name: karmada-crds-autoscaling-bases
        - name: karmada-crds-config-bases
          configMap:
            name: karmada-crds-config-bases
        - name: karmada-crds-multicluster-bases
          configMap:
            name: karmada-crds-multicluster-bases
        - name: karmada-crds-networking-bases
          configMap:
            name: karmada-crds-networking-bases
        - name: karmada-crds-policy-bases
          configMap:
            name: karmada-crds-policy-bases
        - name: karmada-crds-remedy-bases
          configMap:
            name: karmada-crds-remedy-bases
        - name: karmada-crds-work-bases
          configMap:
            name: karmada-crds-work-bases
        - name: karmada-crds-apps-bases
          configMap:
            name: karmada-crds-apps-bases
        - name: karmada-static-resources
          configMap:
            name: karmada-static-resources
        
        - name: kubeconfig-secret
          secret:
            secretName: karmada-kubeconfig
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: karmada-hook-job
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "1"
  labels:
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-kustomization
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      kustomization.yaml:  |-
        resources:
        - bases/multicluster/multicluster.x-k8s.io_serviceexports.yaml
        - bases/multicluster/multicluster.x-k8s.io_serviceimports.yaml
        - bases/policy/policy.karmada.io_clusteroverridepolicies.yaml
        - bases/policy/policy.karmada.io_clusterpropagationpolicies.yaml
        - bases/policy/policy.karmada.io_clustertaintpolicies.yaml
        - bases/policy/policy.karmada.io_federatedresourcequotas.yaml
        - bases/policy/policy.karmada.io_overridepolicies.yaml
        - bases/policy/policy.karmada.io_propagationpolicies.yaml
        - bases/work/work.karmada.io_resourcebindings.yaml
        - bases/work/work.karmada.io_clusterresourcebindings.yaml
        - bases/work/work.karmada.io_works.yaml
        - bases/config/config.karmada.io_resourceinterpretercustomizations.yaml
        - bases/config/config.karmada.io_resourceinterpreterwebhookconfigurations.yaml
        - bases/networking/networking.karmada.io_multiclusteringresses.yaml
        - bases/networking/networking.karmada.io_multiclusterservices.yaml
        - bases/autoscaling/autoscaling.karmada.io_federatedhpas.yaml
        - bases/autoscaling/autoscaling.karmada.io_cronfederatedhpas.yaml
        - bases/remedy/remedy.karmada.io_remedies.yaml
        - bases/apps/apps.karmada.io_workloadrebalancers.yaml
        
        patches:
        - path: patches/webhook_in_resourcebindings.yaml
        - path: patches/webhook_in_clusterresourcebindings.yaml
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-autoscaling-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      autoscaling.karmada.io_cronfederatedhpas.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: cronfederatedhpas.autoscaling.karmada.io
        spec:
          group: autoscaling.karmada.io
          names:
            categories:
            - karmada-io
            kind: CronFederatedHPA
            listKind: CronFederatedHPAList
            plural: cronfederatedhpas
            shortNames:
            - cronfhpa
            singular: cronfederatedhpa
          scope: Namespaced
          versions:
          - additionalPrinterColumns:
            - jsonPath: .spec.scaleTargetRef.kind
              name: REFERENCE-KIND
              type: string
            - jsonPath: .spec.scaleTargetRef.name
              name: REFERENCE-NAME
              type: string
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  CronFederatedHPA represents a collection of repeating schedule to scale
                  replica number of a specific workload. It can scale any resource implementing
                  the scale subresource as well as FederatedHPA.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec is the specification of the CronFederatedHPA.
                    properties:
                      rules:
                        description: |-
                          Rules contains a collection of schedules that declares when and how
                          the referencing target resource should be scaled.
                        items:
                          description: CronFederatedHPARule declares a schedule as well as
                            scale actions.
                          properties:
                            failedHistoryLimit:
                              default: 3
                              description: |-
                                FailedHistoryLimit represents the count of failed execution items for
                                each rule.
                                The value must be a positive integer. It defaults to 3.
                              format: int32
                              maximum: 32
                              minimum: 0
                              type: integer
                            name:
                              description: |-
                                Name of the rule.
                                Each rule in a CronFederatedHPA must have a unique name.
        
                                Note: the name will be used as an identifier to record its execution
                                history. Changing the name will be considered as deleting the old rule
                                and adding a new rule, that means the original execution history will be
                                discarded.
                              maxLength: 32
                              minLength: 1
                              type: string
                            schedule:
                              description: |-
                                Schedule is the cron expression that represents a periodical time.
                                The syntax follows https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/#schedule-syntax.
                              type: string
                            successfulHistoryLimit:
                              default: 3
                              description: |-
                                SuccessfulHistoryLimit represents the count of successful execution items
                                for each rule.
                                The value must be a positive integer. It defaults to 3.
                              format: int32
                              maximum: 32
                              minimum: 1
                              type: integer
                            suspend:
                              default: false
                              description: |-
                                Suspend tells the controller to suspend subsequent executions.
                                Defaults to false.
                              type: boolean
                            targetMaxReplicas:
                              description: |-
                                TargetMaxReplicas is the target MaxReplicas to be set for FederatedHPA.
                                Only needed when referencing resource is FederatedHPA.
                                TargetMinReplicas and TargetMaxReplicas can be specified together or
                                either one can be specified alone.
                                nil means the MaxReplicas(.spec.maxReplicas) of the referencing FederatedHPA
                                will not be updated.
                              format: int32
                              type: integer
                            targetMinReplicas:
                              description: |-
                                TargetMinReplicas is the target MinReplicas to be set for FederatedHPA.
                                Only needed when referencing resource is FederatedHPA.
                                TargetMinReplicas and TargetMaxReplicas can be specified together or
                                either one can be specified alone.
                                nil means the MinReplicas(.spec.minReplicas) of the referencing FederatedHPA
                                will not be updated.
                              format: int32
                              type: integer
                            targetReplicas:
                              description: |-
                                TargetReplicas is the target replicas to be scaled for resources
                                referencing by ScaleTargetRef of this CronFederatedHPA.
                                Only needed when referencing resource is not FederatedHPA.
                              format: int32
                              type: integer
                            timeZone:
                              description: |-
                                TimeZone for the giving schedule.
                                If not specified, this will default to the time zone of the
                                karmada-controller-manager process.
                                Invalid TimeZone will be rejected when applying by karmada-webhook.
                                see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones for the
                                all timezones.
                              type: string
                          required:
                          - name
                          - schedule
                          type: object
                        type: array
                      scaleTargetRef:
                        description: |-
                          ScaleTargetRef points to the target resource to scale.
                          Target resource could be any resource that implementing the scale
                          subresource like Deployment, or FederatedHPA.
                        properties:
                          apiVersion:
                            description: apiVersion is the API version of the referent
                            type: string
                          kind:
                            description: 'kind is the kind of the referent; More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                            type: string
                          name:
                            description: 'name is the name of the referent; More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                    required:
                    - rules
                    - scaleTargetRef
                    type: object
                  status:
                    description: Status is the current status of the CronFederatedHPA.
                    properties:
                      executionHistories:
                        description: ExecutionHistories record the execution histories of
                          CronFederatedHPARule.
                        items:
                          description: ExecutionHistory records the execution history of specific
                            CronFederatedHPARule.
                          properties:
                            failedExecutions:
                              description: FailedExecutions records failed executions.
                              items:
                                description: FailedExecution records a failed execution.
                                properties:
                                  executionTime:
                                    description: |-
                                      ExecutionTime is the actual execution time of CronFederatedHPARule.
                                      Tasks may not always be executed at ScheduleTime. ExecutionTime is used
                                      to evaluate the efficiency of the controller's execution.
                                    format: date-time
                                    type: string
                                  message:
                                    description: Message is the human-readable message indicating
                                      details about the failure.
                                    type: string
                                  scheduleTime:
                                    description: ScheduleTime is the expected execution time
                                      declared in CronFederatedHPARule.
                                    format: date-time
                                    type: string
                                required:
                                - executionTime
                                - message
                                - scheduleTime
                                type: object
                              type: array
                            nextExecutionTime:
                              description: |-
                                NextExecutionTime is the next time to execute.
                                Nil means the rule has been suspended.
                              format: date-time
                              type: string
                            ruleName:
                              description: RuleName is the name of the CronFederatedHPARule.
                              type: string
                            successfulExecutions:
                              description: SuccessfulExecutions records successful executions.
                              items:
                                description: SuccessfulExecution records a successful execution.
                                properties:
                                  appliedMaxReplicas:
                                    description: |-
                                      AppliedMaxReplicas is the MaxReplicas have been applied.
                                      It is required if .spec.rules[*].targetMaxReplicas is not empty.
                                    format: int32
                                    type: integer
                                  appliedMinReplicas:
                                    description: |-
                                      AppliedMinReplicas is the MinReplicas have been applied.
                                      It is required if .spec.rules[*].targetMinReplicas is not empty.
                                    format: int32
                                    type: integer
                                  appliedReplicas:
                                    description: |-
                                      AppliedReplicas is the replicas have been applied.
                                      It is required if .spec.rules[*].targetReplicas is not empty.
                                    format: int32
                                    type: integer
                                  executionTime:
                                    description: |-
                                      ExecutionTime is the actual execution time of CronFederatedHPARule.
                                      Tasks may not always be executed at ScheduleTime. ExecutionTime is used
                                      to evaluate the efficiency of the controller's execution.
                                    format: date-time
                                    type: string
                                  scheduleTime:
                                    description: ScheduleTime is the expected execution time
                                      declared in CronFederatedHPARule.
                                    format: date-time
                                    type: string
                                required:
                                - executionTime
                                - scheduleTime
                                type: object
                              type: array
                          required:
                          - ruleName
                          type: object
                        type: array
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
        
  
  
      autoscaling.karmada.io_federatedhpas.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: federatedhpas.autoscaling.karmada.io
        spec:
          group: autoscaling.karmada.io
          names:
            categories:
            - karmada-io
            kind: FederatedHPA
            listKind: FederatedHPAList
            plural: federatedhpas
            shortNames:
            - fhpa
            singular: federatedhpa
          scope: Namespaced
          versions:
          - additionalPrinterColumns:
            - jsonPath: .spec.scaleTargetRef.kind
              name: REFERENCE-KIND
              type: string
            - jsonPath: .spec.scaleTargetRef.name
              name: REFERENCE-NAME
              type: string
            - jsonPath: .spec.minReplicas
              name: MINPODS
              type: integer
            - jsonPath: .spec.maxReplicas
              name: MAXPODS
              type: integer
            - jsonPath: .status.currentReplicas
              name: REPLICAS
              type: integer
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  FederatedHPA is centralized HPA that can aggregate the metrics in multiple clusters.
                  When the system load increases, it will query the metrics from multiple clusters and scales up the replicas.
                  When the system load decreases, it will query the metrics from multiple clusters and scales down the replicas.
                  After the replicas are scaled up/down, karmada-scheduler will schedule the replicas based on the policy.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec is the specification of the FederatedHPA.
                    properties:
                      behavior:
                        description: |-
                          Behavior configures the scaling behavior of the target
                          in both Up and Down directions (scaleUp and scaleDown fields respectively).
                          If not set, the default HPAScalingRules for scale up and scale down are used.
                        properties:
                          scaleDown:
                            description: |-
                              scaleDown is scaling policy for scaling Down.
                              If not set, the default value is to allow to scale down to minReplicas pods, with a
                              300 second stabilization window (i.e., the highest recommendation for
                              the last 300sec is used).
                            properties:
                              policies:
                                description: |-
                                  policies is a list of potential scaling polices which can be used during scaling.
                                  If not set, use the default values:
                                  - For scale up: allow doubling the number of pods, or an absolute change of 4 pods in a 15s window.
                                  - For scale down: allow all pods to be removed in a 15s window.
                                items:
                                  description: HPAScalingPolicy is a single policy which must
                                    hold true for a specified past interval.
                                  properties:
                                    periodSeconds:
                                      description: |-
                                        periodSeconds specifies the window of time for which the policy should hold true.
                                        PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
                                      format: int32
                                      type: integer
                                    type:
                                      description: type is used to specify the scaling policy.
                                      type: string
                                    value:
                                      description: |-
                                        value contains the amount of change which is permitted by the policy.
                                        It must be greater than zero
                                      format: int32
                                      type: integer
                                  required:
                                  - periodSeconds
                                  - type
                                  - value
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              selectPolicy:
                                description: |-
                                  selectPolicy is used to specify which policy should be used.
                                  If not set, the default value Max is used.
                                type: string
                              stabilizationWindowSeconds:
                                description: |-
                                  stabilizationWindowSeconds is the number of seconds for which past recommendations should be
                                  considered while scaling up or scaling down.
                                  StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
                                  If not set, use the default values:
                                  - For scale up: 0 (i.e. no stabilization is done).
                                  - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
                                format: int32
                                type: integer
                              tolerance:
                                anyOf:
                                - type: integer
                                - type: string
                                description: |-
                                  tolerance is the tolerance on the ratio between the current and desired
                                  metric value under which no updates are made to the desired number of
                                  replicas (e.g. 0.01 for 1%). Must be greater than or equal to zero. If not
                                  set, the default cluster-wide tolerance is applied (by default 10%).
        
                                  For example, if autoscaling is configured with a memory consumption target of 100Mi,
                                  and scale-down and scale-up tolerances of 5% and 1% respectively, scaling will be
                                  triggered when the actual consumption falls below 95Mi or exceeds 101Mi.
        
                                  This is an alpha field and requires enabling the HPAConfigurableTolerance
                                  feature gate.
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                            type: object
                          scaleUp:
                            description: |-
                              scaleUp is scaling policy for scaling Up.
                              If not set, the default value is the higher of:
                                * increase no more than 4 pods per 60 seconds
                                * double the number of pods per 60 seconds
                              No stabilization is used.
                            properties:
                              policies:
                                description: |-
                                  policies is a list of potential scaling polices which can be used during scaling.
                                  If not set, use the default values:
                                  - For scale up: allow doubling the number of pods, or an absolute change of 4 pods in a 15s window.
                                  - For scale down: allow all pods to be removed in a 15s window.
                                items:
                                  description: HPAScalingPolicy is a single policy which must
                                    hold true for a specified past interval.
                                  properties:
                                    periodSeconds:
                                      description: |-
                                        periodSeconds specifies the window of time for which the policy should hold true.
                                        PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
                                      format: int32
                                      type: integer
                                    type:
                                      description: type is used to specify the scaling policy.
                                      type: string
                                    value:
                                      description: |-
                                        value contains the amount of change which is permitted by the policy.
                                        It must be greater than zero
                                      format: int32
                                      type: integer
                                  required:
                                  - periodSeconds
                                  - type
                                  - value
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              selectPolicy:
                                description: |-
                                  selectPolicy is used to specify which policy should be used.
                                  If not set, the default value Max is used.
                                type: string
                              stabilizationWindowSeconds:
                                description: |-
                                  stabilizationWindowSeconds is the number of seconds for which past recommendations should be
                                  considered while scaling up or scaling down.
                                  StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
                                  If not set, use the default values:
                                  - For scale up: 0 (i.e. no stabilization is done).
                                  - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
                                format: int32
                                type: integer
                              tolerance:
                                anyOf:
                                - type: integer
                                - type: string
                                description: |-
                                  tolerance is the tolerance on the ratio between the current and desired
                                  metric value under which no updates are made to the desired number of
                                  replicas (e.g. 0.01 for 1%). Must be greater than or equal to zero. If not
                                  set, the default cluster-wide tolerance is applied (by default 10%).
        
                                  For example, if autoscaling is configured with a memory consumption target of 100Mi,
                                  and scale-down and scale-up tolerances of 5% and 1% respectively, scaling will be
                                  triggered when the actual consumption falls below 95Mi or exceeds 101Mi.
        
                                  This is an alpha field and requires enabling the HPAConfigurableTolerance
                                  feature gate.
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      maxReplicas:
                        description: |-
                          MaxReplicas is the upper limit for the number of replicas to which the
                          autoscaler can scale up.
                          It cannot be less that minReplicas.
                        format: int32
                        type: integer
                      metrics:
                        description: |-
                          Metrics contains the specifications for which to use to calculate the
                          desired replica count (the maximum replica count across all metrics will
                          be used). The desired replica count is calculated multiplying the
                          ratio between the target value and the current value by the current
                          number of pods. Ergo, metrics used must decrease as the pod count is
                          increased, and vice-versa. See the individual metric source types for
                          more information about how each type of metric must respond.
                          If not set, the default metric will be set to 80% average CPU utilization.
                        items:
                          description: |-
                            MetricSpec specifies how to scale based on a single metric
                            (only `type` and one other matching field should be set at once).
                          properties:
                            containerResource:
                              description: |-
                                containerResource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing a single container in
                                each pod of the current scale target (e.g. CPU or memory). Such metrics are
                                built in to Kubernetes, and have special scaling options on top of those
                                available to normal per-pod metrics using the "pods" source.
                              properties:
                                container:
                                  description: container is the name of the container in the
                                    pods of the scaling target
                                  type: string
                                name:
                                  description: name is the name of the resource in question.
                                  type: string
                                target:
                                  description: target specifies the target value for the given
                                    metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric type
                                        is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - container
                              - name
                              - target
                              type: object
                            external:
                              description: |-
                                external refers to a global metric that is not associated
                                with any Kubernetes object. It allows autoscaling based on information
                                coming from components running outside of cluster
                                (for example length of queue in cloud messaging service, or
                                QPS from loadbalancer running outside of cluster).
                              properties:
                                metric:
                                  description: metric identifies the target metric by name
                                    and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list of label
                                            selector requirements. The requirements are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key that the
                                                  selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for the given
                                    metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric type
                                        is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            object:
                              description: |-
                                object refers to a metric describing a single kubernetes object
                                (for example, hits-per-second on an Ingress object).
                              properties:
                                describedObject:
                                  description: describedObject specifies the descriptions
                                    of a object,such as kind,name apiVersion
                                  properties:
                                    apiVersion:
                                      description: apiVersion is the API version of the referent
                                      type: string
                                    kind:
                                      description: 'kind is the kind of the referent; More
                                        info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                                      type: string
                                    name:
                                      description: 'name is the name of the referent; More
                                        info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - kind
                                  - name
                                  type: object
                                metric:
                                  description: metric identifies the target metric by name
                                    and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list of label
                                            selector requirements. The requirements are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key that the
                                                  selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for the given
                                    metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric type
                                        is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - describedObject
                              - metric
                              - target
                              type: object
                            pods:
                              description: |-
                                pods refers to a metric describing each pod in the current scale target
                                (for example, transactions-processed-per-second).  The values will be
                                averaged together before being compared to the target value.
                              properties:
                                metric:
                                  description: metric identifies the target metric by name
                                    and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list of label
                                            selector requirements. The requirements are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key that the
                                                  selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for the given
                                    metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric type
                                        is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            resource:
                              description: |-
                                resource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing each pod in the
                                current scale target (e.g. CPU or memory). Such metrics are built in to
                                Kubernetes, and have special scaling options on top of those available
                                to normal per-pod metrics using the "pods" source.
                              properties:
                                name:
                                  description: name is the name of the resource in question.
                                  type: string
                                target:
                                  description: target specifies the target value for the given
                                    metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric type
                                        is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - name
                              - target
                              type: object
                            type:
                              description: |-
                                type is the type of metric source.  It should be one of "ContainerResource", "External",
                                "Object", "Pods" or "Resource", each mapping to a matching field in the object.
                              type: string
                          required:
                          - type
                          type: object
                        type: array
                      minReplicas:
                        description: |-
                          MinReplicas is the lower limit for the number of replicas to which the
                          autoscaler can scale down.
                          It defaults to 1 pod.
                        format: int32
                        type: integer
                      scaleTargetRef:
                        description: |-
                          ScaleTargetRef points to the target resource to scale, and is used to
                          the pods for which metrics should be collected, as well as to actually
                          change the replica count.
                        properties:
                          apiVersion:
                            description: apiVersion is the API version of the referent
                            type: string
                          kind:
                            description: 'kind is the kind of the referent; More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                            type: string
                          name:
                            description: 'name is the name of the referent; More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                    required:
                    - maxReplicas
                    - scaleTargetRef
                    type: object
                  status:
                    description: Status is the current status of the FederatedHPA.
                    properties:
                      conditions:
                        description: |-
                          conditions is the set of conditions required for this autoscaler to scale its target,
                          and indicates whether or not those conditions are met.
                        items:
                          description: |-
                            HorizontalPodAutoscalerCondition describes the state of
                            a HorizontalPodAutoscaler at a certain point.
                          properties:
                            lastTransitionTime:
                              description: |-
                                lastTransitionTime is the last time the condition transitioned from
                                one status to another
                              format: date-time
                              type: string
                            message:
                              description: |-
                                message is a human-readable explanation containing details about
                                the transition
                              type: string
                            reason:
                              description: reason is the reason for the condition's last transition.
                              type: string
                            status:
                              description: status is the status of the condition (True, False,
                                Unknown)
                              type: string
                            type:
                              description: type describes the current condition
                              type: string
                          required:
                          - status
                          - type
                          type: object
                        type: array
                        x-kubernetes-list-map-keys:
                        - type
                        x-kubernetes-list-type: map
                      currentMetrics:
                        description: currentMetrics is the last read state of the metrics
                          used by this autoscaler.
                        items:
                          description: MetricStatus describes the last-read state of a single
                            metric.
                          properties:
                            containerResource:
                              description: |-
                                container resource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing a single container in each pod in the
                                current scale target (e.g. CPU or memory). Such metrics are built in to
                                Kubernetes, and have special scaling options on top of those available
                                to normal per-pod metrics using the "pods" source.
                              properties:
                                container:
                                  description: container is the name of the container in the
                                    pods of the scaling target
                                  type: string
                                current:
                                  description: current contains the current value for the
                                    given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        currentAverageUtilization is the current value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the current value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the current value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  type: object
                                name:
                                  description: name is the name of the resource in question.
                                  type: string
                              required:
                              - container
                              - current
                              - name
                              type: object
                            external:
                              description: |-
                                external refers to a global metric that is not associated
                                with any Kubernetes object. It allows autoscaling based on information
                                coming from components running outside of cluster
                                (for example length of queue in cloud messaging service, or
                                QPS from loadbalancer running outside of cluster).
                              properties:
                                current:
                                  description: current contains the current value for the
                                    given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        currentAverageUtilization is the current value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the current value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the current value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  type: object
                                metric:
                                  description: metric identifies the target metric by name
                                    and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list of label
                                            selector requirements. The requirements are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key that the
                                                  selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                              required:
                              - current
                              - metric
                              type: object
                            object:
                              description: |-
                                object refers to a metric describing a single kubernetes object
                                (for example, hits-per-second on an Ingress object).
                              properties:
                                current:
                                  description: current contains the current value for the
                                    given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        currentAverageUtilization is the current value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the current value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the current value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  type: object
                                describedObject:
                                  description: DescribedObject specifies the descriptions
                                    of a object,such as kind,name apiVersion
                                  properties:
                                    apiVersion:
                                      description: apiVersion is the API version of the referent
                                      type: string
                                    kind:
                                      description: 'kind is the kind of the referent; More
                                        info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                                      type: string
                                    name:
                                      description: 'name is the name of the referent; More
                                        info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - kind
                                  - name
                                  type: object
                                metric:
                                  description: metric identifies the target metric by name
                                    and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list of label
                                            selector requirements. The requirements are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key that the
                                                  selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                              required:
                              - current
                              - describedObject
                              - metric
                              type: object
                            pods:
                              description: |-
                                pods refers to a metric describing each pod in the current scale target
                                (for example, transactions-processed-per-second).  The values will be
                                averaged together before being compared to the target value.
                              properties:
                                current:
                                  description: current contains the current value for the
                                    given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        currentAverageUtilization is the current value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the current value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the current value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  type: object
                                metric:
                                  description: metric identifies the target metric by name
                                    and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list of label
                                            selector requirements. The requirements are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key that the
                                                  selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                              required:
                              - current
                              - metric
                              type: object
                            resource:
                              description: |-
                                resource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing each pod in the
                                current scale target (e.g. CPU or memory). Such metrics are built in to
                                Kubernetes, and have special scaling options on top of those available
                                to normal per-pod metrics using the "pods" source.
                              properties:
                                current:
                                  description: current contains the current value for the
                                    given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        currentAverageUtilization is the current value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the current value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the current value of the metric
                                        (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  type: object
                                name:
                                  description: name is the name of the resource in question.
                                  type: string
                              required:
                              - current
                              - name
                              type: object
                            type:
                              description: |-
                                type is the type of metric source.  It will be one of "ContainerResource", "External",
                                "Object", "Pods" or "Resource", each corresponds to a matching field in the object.
                              type: string
                          required:
                          - type
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                      currentReplicas:
                        description: |-
                          currentReplicas is current number of replicas of pods managed by this autoscaler,
                          as last seen by the autoscaler.
                        format: int32
                        type: integer
                      desiredReplicas:
                        description: |-
                          desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
                          as last calculated by the autoscaler.
                        format: int32
                        type: integer
                      lastScaleTime:
                        description: |-
                          lastScaleTime is the last time the HorizontalPodAutoscaler scaled the number of pods,
                          used by the autoscaler to control how often the number of pods is changed.
                        format: date-time
                        type: string
                      observedGeneration:
                        description: observedGeneration is the most recent generation observed
                          by this autoscaler.
                        format: int64
                        type: integer
                    required:
                    - desiredReplicas
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-config-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      config.karmada.io_resourceinterpretercustomizations.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: resourceinterpretercustomizations.config.karmada.io
        spec:
          group: config.karmada.io
          names:
            categories:
            - karmada-io
            kind: ResourceInterpreterCustomization
            listKind: ResourceInterpreterCustomizationList
            plural: resourceinterpretercustomizations
            shortNames:
            - ric
            singular: resourceinterpretercustomization
          scope: Cluster
          versions:
          - additionalPrinterColumns:
            - jsonPath: .spec.target.apiVersion
              name: TARGET-API-VERSION
              type: string
            - jsonPath: .spec.target.kind
              name: TARGET-KIND
              type: string
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  ResourceInterpreterCustomization describes the configuration of a specific
                  resource for Karmada to get the structure.
                  It has higher precedence than the default interpreter and the interpreter
                  webhook.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec describes the configuration in detail.
                    properties:
                      customizations:
                        description: Customizations describe the interpretation rules.
                        properties:
                          componentResource:
                            description: |-
                              ComponentResource describes the rules for Karmada to discover the resource requirements
                              for multiple components from the given object.
                              This is designed for CRDs with multiple components (e.g., FlinkDeployment), but
                              can also be used for single-component resources like Deployment.
                              If implemented, the controller will use this to obtain per-component replica and resource
                              requirements, and will not call ReplicaResource.
                              If not implemented, the controller will fall back to ReplicaResource for backward compatibility.
                              This will only be used when the feature gate 'MultiplePodTemplatesScheduling' is enabled.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to extract the desired replica count and resource
                                  requirements for each component of the resource.
        
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function GetComponents(desiredObj)
                                            local components = {}
        
                                            local jobManagerComponent = {
                                                name = "jobmanager",
                                                replicas = desiredObj.spec.jobManager.replicas
                                            }
                                            table.insert(components, jobManagerComponent)
        
                                            local taskManagerComponent = {
                                                name = "taskmanager",
                                                replicas = desiredObj.spec.taskManager.replicas
                                            }
                                            table.insert(components, taskManagerComponent)
        
                                            return components
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - desiredObj: the object represents the configuration to be applied
                                        to the member cluster.
        
                                  The function expects one return value:
                                    - components: the resource requirements for each component.
                                  The returned value will be set into a ResourceBinding or ClusterResourceBinding.
                                type: string
                            required:
                            - luaScript
                            type: object
                          dependencyInterpretation:
                            description: |-
                              DependencyInterpretation describes the rules for Karmada to analyze the
                              dependent resources.
                              Karmada provides built-in rules for several standard Kubernetes types, see:
                              https://karmada.io/docs/userguide/globalview/customizing-resource-interpreter/#interpretdependency
                              If DependencyInterpretation is set, the built-in rules will be ignored.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to interpret the dependencies of
                                  a specific resource.
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function GetDependencies(desiredObj)
                                            dependencies = {}
                                            serviceAccountName = desiredObj.spec.template.spec.serviceAccountName
                                            if serviceAccountName ~= nil and serviceAccountName ~= "default" then
                                                dependency = {}
                                                dependency.apiVersion = "v1"
                                                dependency.kind = "ServiceAccount"
                                                dependency.name = serviceAccountName
                                                dependency.namespace = desiredObj.metadata.namespace
                                                dependencies[1] = dependency
                                            end
                                            return dependencies
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - desiredObj: the object represents the configuration to be applied
                                        to the member cluster.
        
                                  The returned value should be expressed by a slice of DependentObjectReference.
                                type: string
                            required:
                            - luaScript
                            type: object
                          healthInterpretation:
                            description: |-
                              HealthInterpretation describes the health assessment rules by which Karmada
                              can assess the health state of the resource type.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to assess the health state of
                                  a specific resource.
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function InterpretHealth(observedObj)
                                            if observedObj.status.readyReplicas == observedObj.spec.replicas then
                                                return true
                                            end
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - observedObj: the object represents the configuration that is observed
                                        from a specific member cluster.
        
                                  The returned boolean value indicates the health status.
                                type: string
                            required:
                            - luaScript
                            type: object
                          replicaResource:
                            description: |-
                              ReplicaResource describes the rules for Karmada to discover the resource's
                              replica as well as resource requirements.
                              It would be useful for those CRD resources that declare workload types like
                              Deployment.
                              It is usually not needed for Kubernetes native resources(Deployment, Job) as
                              Karmada knows how to discover info from them. But if it is set, the built-in
                              discovery rules will be ignored.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to discover the resource's
                                  replica as well as resource requirements
        
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function GetReplicas(desiredObj)
                                            replica = desiredObj.spec.replicas
                                            requirement = {}
                                            requirement.nodeClaim = {}
                                            requirement.nodeClaim.nodeSelector = desiredObj.spec.template.spec.nodeSelector
                                            requirement.nodeClaim.tolerations = desiredObj.spec.template.spec.tolerations
                                            requirement.resourceRequest = desiredObj.spec.template.spec.containers[1].resources.limits
                                            return replica, requirement
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - desiredObj: the object represents the configuration to be applied
                                        to the member cluster.
        
                                  The function expects two return values:
                                    - replica: the declared replica number
                                    - requirement: the resource required by each replica expressed with a
                                        ResourceBindingSpec.ReplicaRequirements.
                                  The returned values will be set into a ResourceBinding or ClusterResourceBinding.
                                type: string
                            required:
                            - luaScript
                            type: object
                          replicaRevision:
                            description: |-
                              ReplicaRevision describes the rules for Karmada to revise the resource's replica.
                              It would be useful for those CRD resources that declare workload types like
                              Deployment.
                              It is usually not needed for Kubernetes native resources(Deployment, Job) as
                              Karmada knows how to revise replicas for them. But if it is set, the built-in
                              revision rules will be ignored.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to revise replicas in the desired specification.
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function ReviseReplica(desiredObj, desiredReplica)
                                            desiredObj.spec.replicas = desiredReplica
                                            return desiredObj
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - desiredObj: the object represents the configuration to be applied
                                        to the member cluster.
                                    - desiredReplica: the replica number should be applied with.
        
                                  The returned object should be a revised configuration which will be
                                  applied to member cluster eventually.
                                type: string
                            required:
                            - luaScript
                            type: object
                          retention:
                            description: |-
                              Retention describes the desired behavior that Karmada should react on
                              the changes made by member cluster components. This avoids system
                              running into a meaningless loop that Karmada resource controller and
                              the member cluster component continually applying opposite values of a field.
                              For example, the "replicas" of Deployment might be changed by the HPA
                              controller on member cluster. In this case, Karmada should retain the "replicas"
                              and not try to change it.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to retain runtime values
                                  to the desired specification.
        
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function Retain(desiredObj, observedObj)
                                            desiredObj.spec.fieldFoo = observedObj.spec.fieldFoo
                                            return desiredObj
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - desiredObj: the object represents the configuration to be applied
                                        to the member cluster.
                                    - observedObj: the object represents the configuration that is observed
                                        from a specific member cluster.
        
                                  The returned object should be a retained configuration which will be
                                  applied to member cluster eventually.
                                type: string
                            required:
                            - luaScript
                            type: object
                          statusAggregation:
                            description: |-
                              StatusAggregation describes the rules for Karmada to aggregate status
                              collected from member clusters to resource template.
                              Karmada provides built-in rules for several standard Kubernetes types, see:
                              https://karmada.io/docs/userguide/globalview/customizing-resource-interpreter/#aggregatestatus
                              If StatusAggregation is set, the built-in rules will be ignored.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to aggregate decentralized statuses
                                  to the desired specification.
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function AggregateStatus(desiredObj, statusItems)
                                            for i = 1, #statusItems do
                                                desiredObj.status.readyReplicas = desiredObj.status.readyReplicas + items[i].readyReplicas
                                            end
                                            return desiredObj
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - desiredObj: the object represents a resource template.
                                    - statusItems: the slice of status expressed with AggregatedStatusItem.
        
                                  The returned object should be a whole object with status aggregated.
                                type: string
                            required:
                            - luaScript
                            type: object
                          statusReflection:
                            description: |-
                              StatusReflection describes the rules for Karmada to pick the resource's status.
                              Karmada provides built-in rules for several standard Kubernetes types, see:
                              https://karmada.io/docs/userguide/globalview/customizing-resource-interpreter/#interpretstatus
                              If StatusReflection is set, the built-in rules will be ignored.
                            properties:
                              luaScript:
                                description: |-
                                  LuaScript holds the Lua script that is used to get the status from the observed specification.
                                  The script should implement a function as follows:
        
                                  ```
                                    luaScript: >
                                        function ReflectStatus(observedObj)
                                            status = {}
                                            status.readyReplicas = observedObj.status.observedObj
                                            return status
                                        end
                                  ```
        
                                  The content of the LuaScript needs to be a whole function including both
                                  declaration and implementation.
        
                                  The parameters will be supplied by the system:
                                    - observedObj: the object represents the configuration that is observed
                                        from a specific member cluster.
        
                                  The returned status could be the whole status or part of it and will
                                  be set into both Work and ResourceBinding(ClusterResourceBinding).
                                type: string
                            required:
                            - luaScript
                            type: object
                        type: object
                      target:
                        description: CustomizationTarget represents the resource type that
                          the customization applies to.
                        properties:
                          apiVersion:
                            description: APIVersion represents the API version of the target
                              resource.
                            type: string
                          kind:
                            description: Kind represents the Kind of target resources.
                            type: string
                        required:
                        - apiVersion
                        - kind
                        type: object
                    required:
                    - customizations
                    - target
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources: {}
        
  
  
      config.karmada.io_resourceinterpreterwebhookconfigurations.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: resourceinterpreterwebhookconfigurations.config.karmada.io
        spec:
          group: config.karmada.io
          names:
            categories:
            - karmada-io
            kind: ResourceInterpreterWebhookConfiguration
            listKind: ResourceInterpreterWebhookConfigurationList
            plural: resourceinterpreterwebhookconfigurations
            singular: resourceinterpreterwebhookconfiguration
          scope: Cluster
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  ResourceInterpreterWebhookConfiguration describes the configuration of webhooks which take the responsibility to
                  tell karmada the details of the resource object, especially for custom resources.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  webhooks:
                    description: Webhooks is a list of webhooks and the affected resources
                      and operations.
                    items:
                      description: ResourceInterpreterWebhook describes the webhook as well
                        as the resources and operations it applies to.
                      properties:
                        clientConfig:
                          description: |-
                            ClientConfig defines how to communicate with the hook.
                            It supports two mutually exclusive configuration modes:
        
                            1. URL - Directly specify the webhook URL with format `scheme://host:port/path`.
                               Example: https://webhook.example.com:8443/my-interpreter
        
                            2. Service - Reference a Kubernetes Service that exposes the webhook.
                               When using Service reference, Karmada resolves the endpoint through following steps:
                               a) First attempts to locate the Service in karmada-apiserver
                               b) If found, constructs URL based on Service type:
                                  - ClusterIP/LoadBalancer/NodePort: Uses ClusterIP with port from Service spec
                                    (Note: Services with ClusterIP "None" are rejected), Example:
                                    `https://<cluster ip>:<port>`
                                  - ExternalName: Uses external DNS name format: `https://<external name>:<port>`
                               c) If NOT found in karmada-apiserver, falls back to standard Kubernetes
                                  service DNS name format: `https://<service>.<namespace>.svc:<port>`
        
                            Note: When both URL and Service are specified, the Service reference takes precedence
                                  and the URL configuration will be ignored.
                          properties:
                            caBundle:
                              description: |-
                                `caBundle` is a PEM encoded CA bundle which will be used to validate the webhook's server certificate.
                                If unspecified, system trust roots on the apiserver are used.
                              format: byte
                              type: string
                            service:
                              description: |-
                                `service` is a reference to the service for this webhook. Either
                                `service` or `url` must be specified.
        
                                If the webhook is running within the cluster, then you should use `service`.
                              properties:
                                name:
                                  description: |-
                                    `name` is the name of the service.
                                    Required
                                  type: string
                                namespace:
                                  description: |-
                                    `namespace` is the namespace of the service.
                                    Required
                                  type: string
                                path:
                                  description: |-
                                    `path` is an optional URL path which will be sent in any request to
                                    this service.
                                  type: string
                                port:
                                  description: |-
                                    If specified, the port on the service that hosting webhook.
                                    Default to 443 for backward compatibility.
                                    `port` should be a valid port number (1-65535, inclusive).
                                  format: int32
                                  type: integer
                              required:
                              - name
                              - namespace
                              type: object
                            url:
                              description: |-
                                `url` gives the location of the webhook, in standard URL form
                                (`scheme://host:port/path`). Exactly one of `url` or `service`
                                must be specified.
        
                                The `host` should not refer to a service running in the cluster; use
                                the `service` field instead. The host might be resolved via external
                                DNS in some apiservers (e.g., `kube-apiserver` cannot resolve
                                in-cluster DNS as that would be a layering violation). `host` may
                                also be an IP address.
        
                                Please note that using `localhost` or `127.0.0.1` as a `host` is
                                risky unless you take great care to run this webhook on all hosts
                                which run an apiserver which might need to make calls to this
                                webhook. Such installs are likely to be non-portable, i.e., not easy
                                to turn up in a new cluster.
        
                                The scheme must be "https"; the URL must begin with "https://".
        
                                A path is optional, and if present may be any string permissible in
                                a URL. You may use the path to pass an arbitrary string to the
                                webhook, for example, a cluster identifier.
        
                                Attempting to use a user or basic auth e.g. "user:password@" is not
                                allowed. Fragments ("#...") and query parameters ("?...") are not
                                allowed, either.
                              type: string
                          type: object
                        interpreterContextVersions:
                          description: |-
                            InterpreterContextVersions is an ordered list of preferred `ResourceInterpreterContext`
                            versions the Webhook expects. Karmada will try to use first version in
                            the list which it supports. If none of the versions specified in this list
                            supported by Karmada, validation will fail for this object.
                            If a persisted webhook configuration specifies allowed versions and does not
                            include any versions known to the Karmada, calls to the webhook will fail
                            and be subject to the failure policy.
                          items:
                            type: string
                          type: array
                        name:
                          description: Name is the full-qualified name of the webhook.
                          type: string
                        rules:
                          description: |-
                            Rules describes what operations on what resources the webhook cares about.
                            The webhook cares about an operation if it matches any Rule.
                          items:
                            description: |-
                              RuleWithOperations is a tuple of Operations and Resources. It is recommended to make
                              sure that all the tuple expansions are valid.
                            properties:
                              apiGroups:
                                description: |-
                                  APIGroups is the API groups the resources belong to. '*' is all groups.
                                  If '*' is present, the length of the slice must be one.
                                  For example:
                                   ["apps", "batch", "example.io"] means matches 3 groups.
                                   ["*"] means matches all group
        
                                  Note: The group could be empty, e.g the 'core' group of kubernetes, in that case use [""].
                                items:
                                  type: string
                                type: array
                              apiVersions:
                                description: |-
                                  APIVersions is the API versions the resources belong to. '*' is all versions.
                                  If '*' is present, the length of the slice must be one.
                                  For example:
                                   ["v1alpha1", "v1beta1"] means matches 2 versions.
                                   ["*"] means matches all versions.
                                items:
                                  type: string
                                type: array
                              kinds:
                                description: |-
                                  Kinds is a list of resources this rule applies to.
                                  If '*' is present, the length of the slice must be one.
                                  For example:
                                   ["Deployment", "Pod"] means matches Deployment and Pod.
                                   ["*"] means apply to all resources.
                                items:
                                  type: string
                                type: array
                              operations:
                                description: |-
                                  Operations is the operations the hook cares about.
                                  If '*' is present, the length of the slice must be one.
                                items:
                                  description: InterpreterOperation specifies an operation
                                    for a request.
                                  type: string
                                type: array
                            required:
                            - apiGroups
                            - apiVersions
                            - kinds
                            - operations
                            type: object
                          type: array
                        timeoutSeconds:
                          description: |-
                            TimeoutSeconds specifies the timeout for this webhook. After the timeout passes,
                            the webhook call will be ignored or the API call will fail based on the
                            failure policy.
                            The timeout value must be between 1 and 30 seconds.
                            Default to 10 seconds.
                          format: int32
                          type: integer
                      required:
                      - clientConfig
                      - interpreterContextVersions
                      - name
                      type: object
                    type: array
                required:
                - webhooks
                type: object
            served: true
            storage: true
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-multicluster-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      multicluster.x-k8s.io_serviceexports.yaml:  |-
        # Copyright 2020 The Kubernetes Authors.
        #
        # Licensed under the Apache License, Version 2.0 (the "License");
        # you may not use this file except in compliance with the License.
        # You may obtain a copy of the License at
        #
        #     http://www.apache.org/licenses/LICENSE-2.0
        #
        # Unless required by applicable law or agreed to in writing, software
        # distributed under the License is distributed on an "AS IS" BASIS,
        # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        # See the License for the specific language governing permissions and
        # limitations under the License.
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          name: serviceexports.multicluster.x-k8s.io
        spec:
          group: multicluster.x-k8s.io
          scope: Namespaced
          names:
            plural: serviceexports
            singular: serviceexport
            kind: ServiceExport
            shortNames:
            - svcex
          versions:
          - name: v1alpha1
            served: true
            storage: true
            subresources:
              status: {}
            additionalPrinterColumns:
            - name: Age
              type: date
              jsonPath: .metadata.creationTimestamp
            "schema":
              "openAPIV3Schema":
                description: ServiceExport declares that the Service with the same name and
                  namespace as this export should be consumable from other clusters.
                type: object
                properties:
                  apiVersion:
                    description: 'APIVersion defines the versioned schema of this representation
                      of an object. Servers should convert recognized schemas to the latest
                      internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                    type: string
                  kind:
                    description: 'Kind is a string value representing the REST resource this
                      object represents. Servers may infer this from the endpoint the client
                      submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                    type: string
                  metadata:
                    type: object
                  status:
                    description: status describes the current state of an exported service.
                      Service configuration comes from the Service that had the same name
                      and namespace as this ServiceExport. Populated by the multi-cluster
                      service implementation's controller.
                    type: object
                    properties:
                      conditions:
                        type: array
                        items:
                          description: "Condition contains details for one aspect of the current
                            state of this API Resource. --- This struct is intended for direct
                            use as an array at the field path .status.conditions.  For example,
                            type FooStatus struct{     // Represents the observations of a
                            foo's current state.     // Known .status.conditions.type are:
                            \"Available\", \"Progressing\", and \"Degraded\"     // +patchMergeKey=type
                            \    // +patchStrategy=merge     // +listType=map     // +listMapKey=type
                            \    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                            patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`
                            \n     // other fields }"
                          type: object
                          required:
                          - lastTransitionTime
                          - message
                          - reason
                          - status
                          - type
                          properties:
                            lastTransitionTime:
                              description: lastTransitionTime is the last time the condition
                                transitioned from one status to another. This should be when
                                the underlying condition changed.  If that is not known, then
                                using the time when the API field changed is acceptable.
                              type: string
                              format: date-time
                            message:
                              description: message is a human readable message indicating
                                details about the transition. This may be an empty string.
                              type: string
                              maxLength: 32768
                            observedGeneration:
                              description: observedGeneration represents the .metadata.generation
                                that the condition was set based upon. For instance, if .metadata.generation
                                is currently 12, but the .status.conditions[x].observedGeneration
                                is 9, the condition is out of date with respect to the current
                                state of the instance.
                              type: integer
                              format: int64
                              minimum: 0
                            reason:
                              description: reason contains a programmatic identifier indicating
                                the reason for the condition's last transition. Producers
                                of specific condition types may define expected values and
                                meanings for this field, and whether the values are considered
                                a guaranteed API. The value should be a CamelCase string.
                                This field may not be empty.
                              type: string
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            status:
                              description: status of the condition, one of True, False, Unknown.
                              type: string
                              enum:
                              - "True"
                              - "False"
                              - Unknown
                            type:
                              description: type of condition in CamelCase or in foo.example.com/CamelCase.
                                --- Many .condition.type values are consistent across resources
                                like Available, but because arbitrary conditions can be useful
                                (see .node.status.conditions), the ability to deconflict is
                                important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                              type: string
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                        x-kubernetes-list-map-keys:
                        - type
                        x-kubernetes-list-type: map
        
  
  
      multicluster.x-k8s.io_serviceimports.yaml:  |-
        # Copyright 2020 The Kubernetes Authors.
        #
        # Licensed under the Apache License, Version 2.0 (the "License");
        # you may not use this file except in compliance with the License.
        # You may obtain a copy of the License at
        #
        #     http://www.apache.org/licenses/LICENSE-2.0
        #
        # Unless required by applicable law or agreed to in writing, software
        # distributed under the License is distributed on an "AS IS" BASIS,
        # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        # See the License for the specific language governing permissions and
        # limitations under the License.
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          name: serviceimports.multicluster.x-k8s.io
        spec:
          group: multicluster.x-k8s.io
          scope: Namespaced
          names:
            plural: serviceimports
            singular: serviceimport
            kind: ServiceImport
            shortNames:
            - svcim
          versions:
          - name: v1alpha1
            served: true
            storage: true
            subresources:
              status: {}
            additionalPrinterColumns:
            - name: Type
              type: string
              description: The type of this ServiceImport
              jsonPath: .spec.type
            - name: IP
              type: string
              description: The VIP for this ServiceImport
              jsonPath: .spec.ips
            - name: Age
              type: date
              jsonPath: .metadata.creationTimestamp
            "schema":
              "openAPIV3Schema":
                description: ServiceImport describes a service imported from clusters in a
                  ClusterSet.
                type: object
                properties:
                  apiVersion:
                    description: 'APIVersion defines the versioned schema of this representation
                      of an object. Servers should convert recognized schemas to the latest
                      internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                    type: string
                  kind:
                    description: 'Kind is a string value representing the REST resource this
                      object represents. Servers may infer this from the endpoint the client
                      submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: spec defines the behavior of a ServiceImport.
                    type: object
                    required:
                    - ports
                    - type
                    properties:
                      ips:
                        description: ip will be used as the VIP for this service when type
                          is ClusterSetIP.
                        type: array
                        maxItems: 1
                        items:
                          type: string
                      ports:
                        type: array
                        items:
                          description: ServicePort represents the port on which the service
                            is exposed
                          type: object
                          required:
                          - port
                          properties:
                            appProtocol:
                              description: The application protocol for this port. This field
                                follows standard Kubernetes label syntax. Un-prefixed names
                                are reserved for IANA standard service names (as per RFC-6335
                                and http://www.iana.org/assignments/service-names). Non-standard
                                protocols should use prefixed names such as mycompany.com/my-custom-protocol.
                                Field can be enabled with ServiceAppProtocol feature gate.
                              type: string
                            name:
                              description: The name of this port within the service. This
                                must be a DNS_LABEL. All ports within a ServiceSpec must have
                                unique names. When considering the endpoints for a Service,
                                this must match the 'name' field in the EndpointPort. Optional
                                if only one ServicePort is defined on this service.
                              type: string
                            port:
                              description: The port that will be exposed by this service.
                              type: integer
                              format: int32
                            protocol:
                              description: The IP protocol for this port. Supports "TCP",
                                "UDP", and "SCTP". Default is TCP.
                              type: string
                        x-kubernetes-list-type: atomic
                      sessionAffinity:
                        description: 'Supports "ClientIP" and "None". Used to maintain session
                          affinity. Enable client IP based session affinity. Must be ClientIP
                          or None. Defaults to None. Ignored when type is Headless More info:
                          https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies'
                        type: string
                      sessionAffinityConfig:
                        description: sessionAffinityConfig contains session affinity configuration.
                        type: object
                        properties:
                          clientIP:
                            description: clientIP contains the configurations of Client IP
                              based session affinity.
                            type: object
                            properties:
                              timeoutSeconds:
                                description: timeoutSeconds specifies the seconds of ClientIP
                                  type session sticky time. The value must be >0 && <=86400(for
                                  1 day) if ServiceAffinity == "ClientIP". Default value is
                                  10800(for 3 hours).
                                type: integer
                                format: int32
                      type:
                        description: type defines the type of this service. Must be ClusterSetIP
                          or Headless.
                        type: string
                        enum:
                        - ClusterSetIP
                        - Headless
                  status:
                    description: status contains information about the exported services that
                      form the multi-cluster service referenced by this ServiceImport.
                    type: object
                    properties:
                      clusters:
                        description: clusters is the list of exporting clusters from which
                          this service was derived.
                        type: array
                        items:
                          description: ClusterStatus contains service configuration mapped
                            to a specific source cluster
                          type: object
                          required:
                          - cluster
                          properties:
                            cluster:
                              description: cluster is the name of the exporting cluster. Must
                                be a valid RFC-1123 DNS label.
                              type: string
                        x-kubernetes-list-map-keys:
                        - cluster
                        x-kubernetes-list-type: map
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-networking-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      networking.karmada.io_multiclusteringresses.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: multiclusteringresses.networking.karmada.io
        spec:
          group: networking.karmada.io
          names:
            categories:
            - karmada-io
            kind: MultiClusterIngress
            listKind: MultiClusterIngressList
            plural: multiclusteringresses
            shortNames:
            - mci
            singular: multiclusteringress
          scope: Namespaced
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  MultiClusterIngress is a collection of rules that allow inbound connections to reach the
                  endpoints defined by a backend. The structure of MultiClusterIngress is same as Ingress,
                  indicates the Ingress in multi-clusters.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec is the desired state of the MultiClusterIngress.
                    properties:
                      defaultBackend:
                        description: |-
                          defaultBackend is the backend that should handle requests that don't
                          match any rule. If Rules are not specified, DefaultBackend must be specified.
                          If DefaultBackend is not set, the handling of requests that do not match any
                          of the rules will be up to the Ingress controller.
                        properties:
                          resource:
                            description: |-
                              resource is an ObjectRef to another Kubernetes resource in the namespace
                              of the Ingress object. If resource is specified, a service.Name and
                              service.Port must not be specified.
                              This is a mutually exclusive setting with "Service".
                            properties:
                              apiGroup:
                                description: |-
                                  APIGroup is the group for the resource being referenced.
                                  If APIGroup is not specified, the specified Kind must be in the core API group.
                                  For any other third-party types, APIGroup is required.
                                type: string
                              kind:
                                description: Kind is the type of resource being referenced
                                type: string
                              name:
                                description: Name is the name of resource being referenced
                                type: string
                            required:
                            - kind
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                          service:
                            description: |-
                              service references a service as a backend.
                              This is a mutually exclusive setting with "Resource".
                            properties:
                              name:
                                description: |-
                                  name is the referenced service. The service must exist in
                                  the same namespace as the Ingress object.
                                type: string
                              port:
                                description: |-
                                  port of the referenced service. A port name or port number
                                  is required for a IngressServiceBackend.
                                properties:
                                  name:
                                    description: |-
                                      name is the name of the port on the Service.
                                      This is a mutually exclusive setting with "Number".
                                    type: string
                                  number:
                                    description: |-
                                      number is the numerical port number (e.g. 80) on the Service.
                                      This is a mutually exclusive setting with "Name".
                                    format: int32
                                    type: integer
                                type: object
                                x-kubernetes-map-type: atomic
                            required:
                            - name
                            type: object
                        type: object
                      ingressClassName:
                        description: |-
                          ingressClassName is the name of an IngressClass cluster resource. Ingress
                          controller implementations use this field to know whether they should be
                          serving this Ingress resource, by a transitive connection
                          (controller -> IngressClass -> Ingress resource). Although the
                          `kubernetes.io/ingress.class` annotation (simple constant name) was never
                          formally defined, it was widely supported by Ingress controllers to create
                          a direct binding between Ingress controller and Ingress resources. Newly
                          created Ingress resources should prefer using the field. However, even
                          though the annotation is officially deprecated, for backwards compatibility
                          reasons, ingress controllers should still honor that annotation if present.
                        type: string
                      rules:
                        description: |-
                          rules is a list of host rules used to configure the Ingress. If unspecified,
                          or no rule matches, all traffic is sent to the default backend.
                        items:
                          description: |-
                            IngressRule represents the rules mapping the paths under a specified host to
                            the related backend services. Incoming requests are first evaluated for a host
                            match, then routed to the backend associated with the matching IngressRuleValue.
                          properties:
                            host:
                              description: "host is the fully qualified domain name of a network
                                host, as defined by RFC 3986.\nNote the following deviations
                                from the \"host\" part of the\nURI as defined in RFC 3986:\n1.
                                IPs are not allowed. Currently an IngressRuleValue can only
                                apply to\n   the IP in the Spec of the parent Ingress.\n2.
                                The `:` delimiter is not respected because ports are not allowed.\n\t
                                \ Currently the port of an Ingress is implicitly :80 for http
                                and\n\t  :443 for https.\nBoth these may change in the future.\nIncoming
                                requests are matched against the host before the\nIngressRuleValue.
                                If the host is unspecified, the Ingress routes all\ntraffic
                                based on the specified IngressRuleValue.\n\nhost can be \"precise\"
                                which is a domain name without the terminating dot of\na network
                                host (e.g. \"foo.bar.com\") or \"wildcard\", which is a domain
                                name\nprefixed with a single wildcard label (e.g. \"*.foo.com\").\nThe
                                wildcard character '*' must appear by itself as the first
                                DNS label and\nmatches only a single label. You cannot have
                                a wildcard label by itself (e.g. Host == \"*\").\nRequests
                                will be matched against the Host field in the following way:\n1.
                                If host is precise, the request matches this rule if the http
                                host header is equal to Host.\n2. If host is a wildcard, then
                                the request matches this rule if the http host header\nis
                                to equal to the suffix (removing the first label) of the wildcard
                                rule."
                              type: string
                            http:
                              description: |-
                                HTTPIngressRuleValue is a list of http selectors pointing to backends.
                                In the example: http://<host>/<path>?<searchpart> -> backend where
                                where parts of the url correspond to RFC 3986, this resource will be used
                                to match against everything after the last '/' and before the first '?'
                                or '#'.
                              properties:
                                paths:
                                  description: paths is a collection of paths that map requests
                                    to backends.
                                  items:
                                    description: |-
                                      HTTPIngressPath associates a path with a backend. Incoming urls matching the
                                      path are forwarded to the backend.
                                    properties:
                                      backend:
                                        description: |-
                                          backend defines the referenced service endpoint to which the traffic
                                          will be forwarded to.
                                        properties:
                                          resource:
                                            description: |-
                                              resource is an ObjectRef to another Kubernetes resource in the namespace
                                              of the Ingress object. If resource is specified, a service.Name and
                                              service.Port must not be specified.
                                              This is a mutually exclusive setting with "Service".
                                            properties:
                                              apiGroup:
                                                description: |-
                                                  APIGroup is the group for the resource being referenced.
                                                  If APIGroup is not specified, the specified Kind must be in the core API group.
                                                  For any other third-party types, APIGroup is required.
                                                type: string
                                              kind:
                                                description: Kind is the type of resource
                                                  being referenced
                                                type: string
                                              name:
                                                description: Name is the name of resource
                                                  being referenced
                                                type: string
                                            required:
                                            - kind
                                            - name
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          service:
                                            description: |-
                                              service references a service as a backend.
                                              This is a mutually exclusive setting with "Resource".
                                            properties:
                                              name:
                                                description: |-
                                                  name is the referenced service. The service must exist in
                                                  the same namespace as the Ingress object.
                                                type: string
                                              port:
                                                description: |-
                                                  port of the referenced service. A port name or port number
                                                  is required for a IngressServiceBackend.
                                                properties:
                                                  name:
                                                    description: |-
                                                      name is the name of the port on the Service.
                                                      This is a mutually exclusive setting with "Number".
                                                    type: string
                                                  number:
                                                    description: |-
                                                      number is the numerical port number (e.g. 80) on the Service.
                                                      This is a mutually exclusive setting with "Name".
                                                    format: int32
                                                    type: integer
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            required:
                                            - name
                                            type: object
                                        type: object
                                      path:
                                        description: |-
                                          path is matched against the path of an incoming request. Currently it can
                                          contain characters disallowed from the conventional "path" part of a URL
                                          as defined by RFC 3986. Paths must begin with a '/' and must be present
                                          when using PathType with value "Exact" or "Prefix".
                                        type: string
                                      pathType:
                                        description: |-
                                          pathType determines the interpretation of the path matching. PathType can
                                          be one of the following values:
                                          * Exact: Matches the URL path exactly.
                                          * Prefix: Matches based on a URL path prefix split by '/'. Matching is
                                            done on a path element by element basis. A path element refers is the
                                            list of labels in the path split by the '/' separator. A request is a
                                            match for path p if every p is an element-wise prefix of p of the
                                            request path. Note that if the last element of the path is a substring
                                            of the last element in request path, it is not a match (e.g. /foo/bar
                                            matches /foo/bar/baz, but does not match /foo/barbaz).
                                          * ImplementationSpecific: Interpretation of the Path matching is up to
                                            the IngressClass. Implementations can treat this as a separate PathType
                                            or treat it identically to Prefix or Exact path types.
                                          Implementations are required to support all path types.
                                        type: string
                                    required:
                                    - backend
                                    - pathType
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                              required:
                              - paths
                              type: object
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                      tls:
                        description: |-
                          tls represents the TLS configuration. Currently the Ingress only supports a
                          single TLS port, 443. If multiple members of this list specify different hosts,
                          they will be multiplexed on the same port according to the hostname specified
                          through the SNI TLS extension, if the ingress controller fulfilling the
                          ingress supports SNI.
                        items:
                          description: IngressTLS describes the transport layer security associated
                            with an ingress.
                          properties:
                            hosts:
                              description: |-
                                hosts is a list of hosts included in the TLS certificate. The values in
                                this list must match the name/s used in the tlsSecret. Defaults to the
                                wildcard host setting for the loadbalancer controller fulfilling this
                                Ingress, if left unspecified.
                              items:
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                            secretName:
                              description: |-
                                secretName is the name of the secret used to terminate TLS traffic on
                                port 443. Field is left optional to allow TLS routing based on SNI
                                hostname alone. If the SNI host in a listener conflicts with the "Host"
                                header field used by an IngressRule, the SNI host is used for termination
                                and value of the "Host" header is used for routing.
                              type: string
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                    type: object
                  status:
                    description: Status is the current state of the MultiClusterIngress.
                    properties:
                      loadBalancer:
                        description: loadBalancer contains the current status of the load-balancer.
                        properties:
                          ingress:
                            description: ingress is a list containing ingress points for the
                              load-balancer.
                            items:
                              description: IngressLoadBalancerIngress represents the status
                                of a load-balancer ingress point.
                              properties:
                                hostname:
                                  description: hostname is set for load-balancer ingress points
                                    that are DNS based.
                                  type: string
                                ip:
                                  description: ip is set for load-balancer ingress points
                                    that are IP based.
                                  type: string
                                ports:
                                  description: ports provides information about the ports
                                    exposed by this LoadBalancer.
                                  items:
                                    description: IngressPortStatus represents the error condition
                                      of a service port
                                    properties:
                                      error:
                                        description: |-
                                          error is to record the problem with the service port
                                          The format of the error shall comply with the following rules:
                                          - built-in error values shall be specified in this file and those shall use
                                            CamelCase names
                                          - cloud provider specific error values must have names that comply with the
                                            format foo.example.com/CamelCase.
                                        maxLength: 316
                                        pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                                        type: string
                                      port:
                                        description: port is the port number of the ingress
                                          port.
                                        format: int32
                                        type: integer
                                      protocol:
                                        description: |-
                                          protocol is the protocol of the ingress port.
                                          The supported values are: "TCP", "UDP", "SCTP"
                                        type: string
                                    required:
                                    - error
                                    - port
                                    - protocol
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                              type: object
                            type: array
                            x-kubernetes-list-type: atomic
                        type: object
                      serviceLocations:
                        description: |-
                          ServiceLocations records the locations of MulticlusterIngress's backend
                          Service resources. It will be set by the system controller.
                        items:
                          description: ServiceLocation records the locations of MulticlusterIngress's
                            backend Service resources.
                          properties:
                            clusters:
                              description: Clusters records the cluster list where the Service
                                is located.
                              items:
                                type: string
                              type: array
                            name:
                              description: |-
                                name is the referenced service. The service must exist in
                                the same namespace as the MultiClusterService object.
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      trafficBlockClusters:
                        description: |-
                          TrafficBlockClusters records the cluster name list that needs to perform traffic block.
                          When the cloud provider implements its multicluster-cloud-provider and refreshes
                          the service backend address to the LoadBalancer Service, it needs to filter out
                          the backend addresses in these clusters.
                        items:
                          type: string
                        type: array
                    type: object
                type: object
            served: true
            storage: true
            subresources:
              status: {}
        
  
  
      networking.karmada.io_multiclusterservices.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: multiclusterservices.networking.karmada.io
        spec:
          group: networking.karmada.io
          names:
            categories:
            - karmada-io
            kind: MultiClusterService
            listKind: MultiClusterServiceList
            plural: multiclusterservices
            shortNames:
            - mcs
            singular: multiclusterservice
          scope: Namespaced
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  MultiClusterService is a named abstraction of multi-cluster software service.
                  The name field of MultiClusterService is the same as that of Service name.
                  Services with the same name in different clusters are regarded as the same
                  service and are associated with the same MultiClusterService.
                  MultiClusterService can control the exposure of services to outside multiple
                  clusters, and also enable service discovery between clusters.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec is the desired state of the MultiClusterService.
                    properties:
                      consumerClusters:
                        description: |-
                          ConsumerClusters specifies the clusters where the service will be exposed, for clients.
                          If leave it empty, the service will be exposed to all clusters.
                        items:
                          description: ClusterSelector specifies the cluster to be selected.
                          properties:
                            name:
                              description: Name is the name of the cluster to be selected.
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      ports:
                        description: |-
                          Ports is the list of ports that are exposed by this MultiClusterService.
                          No specified port will be filtered out during the service
                          exposure and discovery process.
                          All ports in the referencing service will be exposed by default.
                        items:
                          description: ExposurePort describes which port will be exposed.
                          properties:
                            name:
                              description: |-
                                Name is the name of the port that needs to be exposed within the service.
                                The port name must be the same as that defined in the service.
                              type: string
                            port:
                              description: Port specifies the exposed service port.
                              format: int32
                              type: integer
                          required:
                          - port
                          type: object
                        type: array
                      providerClusters:
                        description: |-
                          ProviderClusters specifies the clusters which will provide the service backend.
                          If leave it empty, we will collect the backend endpoints from all clusters and sync
                          them to the ConsumerClusters.
                        items:
                          description: ClusterSelector specifies the cluster to be selected.
                          properties:
                            name:
                              description: Name is the name of the cluster to be selected.
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      range:
                        description: |-
                          Range specifies the ranges where the referencing service should
                          be exposed.
                          Only valid and optional in case of Types contains CrossCluster.
                          If not set and Types contains CrossCluster, all clusters will
                          be selected, that means the referencing service will be exposed
                          across all registered clusters.
                          Deprecated: in favor of ProviderClusters/ConsumerClusters.
                        properties:
                          clusterNames:
                            description: ClusterNames is the list of clusters to be selected.
                            items:
                              type: string
                            type: array
                        type: object
                      serviceConsumptionClusters:
                        description: |-
                          ServiceConsumptionClusters specifies the clusters where the service will be exposed, for clients.
                          If leave it empty, the service will be exposed to all clusters.
                          Deprecated: in favor of ProviderClusters/ConsumerClusters.
                        items:
                          type: string
                        type: array
                      serviceProvisionClusters:
                        description: |-
                          ServiceProvisionClusters specifies the clusters which will provision the service backend.
                          If leave it empty, we will collect the backend endpoints from all clusters and sync
                          them to the ServiceConsumptionClusters.
                          Deprecated: in favor of ProviderClusters/ConsumerClusters.
                        items:
                          type: string
                        type: array
                      types:
                        description: |-
                          Types specifies how to expose the service referencing by this
                          MultiClusterService.
                        items:
                          description: ExposureType describes how to expose the service.
                          type: string
                        type: array
                    required:
                    - types
                    type: object
                  status:
                    description: Status is the current state of the MultiClusterService.
                    properties:
                      conditions:
                        description: Current service state
                        items:
                          description: Condition contains details for one aspect of the current
                            state of this API Resource.
                          properties:
                            lastTransitionTime:
                              description: |-
                                lastTransitionTime is the last time the condition transitioned from one status to another.
                                This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                              format: date-time
                              type: string
                            message:
                              description: |-
                                message is a human readable message indicating details about the transition.
                                This may be an empty string.
                              maxLength: 32768
                              type: string
                            observedGeneration:
                              description: |-
                                observedGeneration represents the .metadata.generation that the condition was set based upon.
                                For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                with respect to the current state of the instance.
                              format: int64
                              minimum: 0
                              type: integer
                            reason:
                              description: |-
                                reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                Producers of specific condition types may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            status:
                              description: status of the condition, one of True, False, Unknown.
                              enum:
                              - "True"
                              - "False"
                              - Unknown
                              type: string
                            type:
                              description: type of condition in CamelCase or in foo.example.com/CamelCase.
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                              type: string
                          required:
                          - lastTransitionTime
                          - message
                          - reason
                          - status
                          - type
                          type: object
                        type: array
                        x-kubernetes-list-map-keys:
                        - type
                        x-kubernetes-list-type: map
                      loadBalancer:
                        description: |-
                          LoadBalancer contains the current status of the load-balancer,
                          if one is present.
                        properties:
                          ingress:
                            description: |-
                              Ingress is a list containing ingress points for the load-balancer.
                              Traffic intended for the service should be sent to these ingress points.
                            items:
                              description: |-
                                LoadBalancerIngress represents the status of a load-balancer ingress point:
                                traffic intended for the service should be sent to an ingress point.
                              properties:
                                hostname:
                                  description: |-
                                    Hostname is set for load-balancer ingress points that are DNS based
                                    (typically AWS load-balancers)
                                  type: string
                                ip:
                                  description: |-
                                    IP is set for load-balancer ingress points that are IP based
                                    (typically GCE or OpenStack load-balancers)
                                  type: string
                                ipMode:
                                  description: |-
                                    IPMode specifies how the load-balancer IP behaves, and may only be specified when the ip field is specified.
                                    Setting this to "VIP" indicates that traffic is delivered to the node with
                                    the destination set to the load-balancer's IP and port.
                                    Setting this to "Proxy" indicates that traffic is delivered to the node or pod with
                                    the destination set to the node's IP and node port or the pod's IP and port.
                                    Service implementations may use this information to adjust traffic routing.
                                  type: string
                                ports:
                                  description: |-
                                    Ports is a list of records of service ports
                                    If used, every port defined in the service should have an entry in it
                                  items:
                                    description: PortStatus represents the error condition
                                      of a service port
                                    properties:
                                      error:
                                        description: |-
                                          Error is to record the problem with the service port
                                          The format of the error shall comply with the following rules:
                                          - built-in error values shall be specified in this file and those shall use
                                            CamelCase names
                                          - cloud provider specific error values must have names that comply with the
                                            format foo.example.com/CamelCase.
                                        maxLength: 316
                                        pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                                        type: string
                                      port:
                                        description: Port is the port number of the service
                                          port of which status is recorded here
                                        format: int32
                                        type: integer
                                      protocol:
                                        description: |-
                                          Protocol is the protocol of the service port of which status is recorded here
                                          The supported values are: "TCP", "UDP", "SCTP"
                                        type: string
                                    required:
                                    - error
                                    - port
                                    - protocol
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                              type: object
                            type: array
                            x-kubernetes-list-type: atomic
                        type: object
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-policy-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      policy.karmada.io_clusteroverridepolicies.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: clusteroverridepolicies.policy.karmada.io
        spec:
          group: policy.karmada.io
          names:
            categories:
            - karmada-io
            kind: ClusterOverridePolicy
            listKind: ClusterOverridePolicyList
            plural: clusteroverridepolicies
            shortNames:
            - cop
            singular: clusteroverridepolicy
          scope: Cluster
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: ClusterOverridePolicy represents the cluster-wide policy that
                  overrides a group of resources to one or more clusters.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior of ClusterOverridePolicy.
                    properties:
                      overrideRules:
                        description: OverrideRules defines a collection of override rules
                          on target clusters.
                        items:
                          description: RuleWithCluster defines the override rules on clusters.
                          properties:
                            overriders:
                              description: Overriders represents the override rules that would
                                apply on resources
                              properties:
                                annotationsOverrider:
                                  description: AnnotationsOverrider represents the rules dedicated
                                    to handling workload annotations
                                  items:
                                    description: LabelAnnotationOverrider represents the rules
                                      dedicated to handling workload labels/annotations
                                    properties:
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the workload.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      value:
                                        additionalProperties:
                                          type: string
                                        description: |-
                                          Value to be applied to annotations/labels of workload.
                                          Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                          Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                          Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                        type: object
                                    required:
                                    - operator
                                    - value
                                    type: object
                                  type: array
                                argsOverrider:
                                  description: ArgsOverrider represents the rules dedicated
                                    to handling container args
                                  items:
                                    description: CommandArgsOverrider represents the rules
                                      dedicated to handling command/args overrides.
                                    properties:
                                      containerName:
                                        description: The name of container
                                        type: string
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the command/args.
                                        enum:
                                        - add
                                        - remove
                                        type: string
                                      value:
                                        description: |-
                                          Value to be applied to command/args.
                                          Items in Value which will be appended after command/args when Operator is 'add'.
                                          Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                          If Value is empty, then the command/args will remain the same.
                                        items:
                                          type: string
                                        type: array
                                    required:
                                    - containerName
                                    - operator
                                    type: object
                                  type: array
                                commandOverrider:
                                  description: CommandOverrider represents the rules dedicated
                                    to handling container command
                                  items:
                                    description: CommandArgsOverrider represents the rules
                                      dedicated to handling command/args overrides.
                                    properties:
                                      containerName:
                                        description: The name of container
                                        type: string
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the command/args.
                                        enum:
                                        - add
                                        - remove
                                        type: string
                                      value:
                                        description: |-
                                          Value to be applied to command/args.
                                          Items in Value which will be appended after command/args when Operator is 'add'.
                                          Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                          If Value is empty, then the command/args will remain the same.
                                        items:
                                          type: string
                                        type: array
                                    required:
                                    - containerName
                                    - operator
                                    type: object
                                  type: array
                                fieldOverrider:
                                  description: |-
                                    FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                                    This allows changing a single field within the resource with multiple operations.
                                    It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                                    The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                                  items:
                                    description: |-
                                      FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                                      This allows changing a single field within the resource with multiple operations.
                                      It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                                      The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                                      Note: In any given instance, FieldOverrider processes either JSON or YAML fields, but not both simultaneously.
                                    properties:
                                      fieldPath:
                                        description: |-
                                          FieldPath specifies the initial location in the instance document where the operation should take place.
                                          The path uses RFC 6901 for navigating into nested structures. For example, the path "/data/db-config.yaml"
                                          specifies the configuration data key named "db-config.yaml" in a ConfigMap: "/data/db-config.yaml".
                                        type: string
                                      json:
                                        description: JSON represents the operations performed
                                          on the JSON document specified by the FieldPath.
                                        items:
                                          description: JSONPatchOperation represents a single
                                            field modification operation for JSON format.
                                          properties:
                                            operator:
                                              description: |-
                                                Operator indicates the operation on target field.
                                                Available operators are: "add", "remove", and "replace".
                                              enum:
                                              - add
                                              - remove
                                              - replace
                                              type: string
                                            subPath:
                                              description: |-
                                                SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                                The path uses RFC 6901 for navigating into nested structures.
                                              type: string
                                            value:
                                              description: |-
                                                Value is the new value to set for the specified field if the operation is "add" or "replace".
                                                For "remove" operation, this field is ignored.
                                              x-kubernetes-preserve-unknown-fields: true
                                          required:
                                          - operator
                                          - subPath
                                          type: object
                                        type: array
                                      yaml:
                                        description: YAML represents the operations performed
                                          on the YAML document specified by the FieldPath.
                                        items:
                                          description: YAMLPatchOperation represents a single
                                            field modification operation for YAML format.
                                          properties:
                                            operator:
                                              description: |-
                                                Operator indicates the operation on target field.
                                                Available operators are: "add", "remove", and "replace".
                                              enum:
                                              - add
                                              - remove
                                              - replace
                                              type: string
                                            subPath:
                                              description: |-
                                                SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                                The path uses RFC 6901 for navigating into nested structures.
                                              type: string
                                            value:
                                              description: |-
                                                Value is the new value to set for the specified field if the operation is "add" or "replace".
                                                For "remove" operation, this field is ignored.
                                              x-kubernetes-preserve-unknown-fields: true
                                          required:
                                          - operator
                                          - subPath
                                          type: object
                                        type: array
                                    required:
                                    - fieldPath
                                    type: object
                                  type: array
                                imageOverrider:
                                  description: ImageOverrider represents the rules dedicated
                                    to handling image overrides.
                                  items:
                                    description: ImageOverrider represents the rules dedicated
                                      to handling image overrides.
                                    properties:
                                      component:
                                        description: |-
                                          Component is part of image name.
                                          Basically we presume an image can be made of '[registry/]repository[:tag]'.
                                          The registry could be:
                                          - registry.k8s.io
                                          - fictional.registry.example:10443
                                          The repository could be:
                                          - kube-apiserver
                                          - fictional/nginx
                                          The tag cloud be:
                                          - latest
                                          - v1.19.1
                                          - @sha256:dbcc1c35ac38df41fd2f5e4130b32ffdb93ebae8b3dbe638c23575912276fc9c
                                        enum:
                                        - Registry
                                        - Repository
                                        - Tag
                                        type: string
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the image.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      predicate:
                                        description: |-
                                          Predicate filters images before applying the rule.
        
                                          Defaults to nil, in that case, the system will automatically detect image fields if the resource type is
                                          Pod, ReplicaSet, Deployment, StatefulSet, DaemonSet or Job by following rule:
                                            - Pod: /spec/containers/<N>/image
                                            - ReplicaSet: /spec/template/spec/containers/<N>/image
                                            - Deployment: /spec/template/spec/containers/<N>/image
                                            - DaemonSet: /spec/template/spec/containers/<N>/image
                                            - StatefulSet: /spec/template/spec/containers/<N>/image
                                            - Job: /spec/template/spec/containers/<N>/image
                                          In addition, all images will be processed if the resource object has more than one container.
        
                                          If not nil, only images matches the filters will be processed.
                                        properties:
                                          path:
                                            description: Path indicates the path of target
                                              field
                                            type: string
                                        required:
                                        - path
                                        type: object
                                      value:
                                        description: |-
                                          Value to be applied to image.
                                          Must not be empty when operator is 'add' or 'replace'.
                                          Defaults to empty and ignored when operator is 'remove'.
                                        type: string
                                    required:
                                    - component
                                    - operator
                                    type: object
                                  type: array
                                labelsOverrider:
                                  description: LabelsOverrider represents the rules dedicated
                                    to handling workload labels
                                  items:
                                    description: LabelAnnotationOverrider represents the rules
                                      dedicated to handling workload labels/annotations
                                    properties:
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the workload.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      value:
                                        additionalProperties:
                                          type: string
                                        description: |-
                                          Value to be applied to annotations/labels of workload.
                                          Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                          Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                          Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                        type: object
                                    required:
                                    - operator
                                    - value
                                    type: object
                                  type: array
                                plaintext:
                                  description: Plaintext represents override rules defined
                                    with plaintext overriders.
                                  items:
                                    description: |-
                                      PlaintextOverrider is a simple overrider that overrides target fields
                                      according to path, operator and value.
                                    properties:
                                      operator:
                                        description: |-
                                          Operator indicates the operation on target field.
                                          Available operators are: add, replace and remove.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      path:
                                        description: Path indicates the path of target field
                                        type: string
                                      value:
                                        description: |-
                                          Value to be applied to target field.
                                          Must be empty when operator is Remove.
                                        x-kubernetes-preserve-unknown-fields: true
                                    required:
                                    - operator
                                    - path
                                    type: object
                                  type: array
                              type: object
                            targetCluster:
                              description: |-
                                TargetCluster defines restrictions on this override policy
                                that only applies to resources propagated to the matching clusters.
                                nil means matching all clusters.
                              properties:
                                clusterNames:
                                  description: ClusterNames is the list of clusters to be
                                    selected.
                                  items:
                                    type: string
                                  type: array
                                exclude:
                                  description: ExcludedClusters is the list of clusters to
                                    be ignored.
                                  items:
                                    type: string
                                  type: array
                                fieldSelector:
                                  description: |-
                                    FieldSelector is a filter to select member clusters by fields.
                                    The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                    and the operator of the match expression should be 'In' or 'NotIn'.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: A list of field selector requirements.
                                      items:
                                        description: |-
                                          A node selector requirement is a selector that contains values, a key, and an operator
                                          that relates the key and values.
                                        properties:
                                          key:
                                            description: The label key that the selector applies
                                              to.
                                            type: string
                                          operator:
                                            description: |-
                                              Represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                            type: string
                                          values:
                                            description: |-
                                              An array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. If the operator is Gt or Lt, the values
                                              array must have a single element, which will be interpreted as an integer.
                                              This array is replaced during a strategic merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                  type: object
                                labelSelector:
                                  description: |-
                                    LabelSelector is a filter to select member clusters by labels.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label selector
                                        requirements. The requirements are ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that the selector
                                              applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - overriders
                          type: object
                        type: array
                      overriders:
                        description: |-
                          Overriders represents the override rules that would apply on resources
        
                          Deprecated: This filed is deprecated in v1.0 and please use the OverrideRules instead.
                        properties:
                          annotationsOverrider:
                            description: AnnotationsOverrider represents the rules dedicated
                              to handling workload annotations
                            items:
                              description: LabelAnnotationOverrider represents the rules dedicated
                                to handling workload labels/annotations
                              properties:
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the workload.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                value:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    Value to be applied to annotations/labels of workload.
                                    Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                    Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                    Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                  type: object
                              required:
                              - operator
                              - value
                              type: object
                            type: array
                          argsOverrider:
                            description: ArgsOverrider represents the rules dedicated to handling
                              container args
                            items:
                              description: CommandArgsOverrider represents the rules dedicated
                                to handling command/args overrides.
                              properties:
                                containerName:
                                  description: The name of container
                                  type: string
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the command/args.
                                  enum:
                                  - add
                                  - remove
                                  type: string
                                value:
                                  description: |-
                                    Value to be applied to command/args.
                                    Items in Value which will be appended after command/args when Operator is 'add'.
                                    Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                    If Value is empty, then the command/args will remain the same.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - containerName
                              - operator
                              type: object
                            type: array
                          commandOverrider:
                            description: CommandOverrider represents the rules dedicated to
                              handling container command
                            items:
                              description: CommandArgsOverrider represents the rules dedicated
                                to handling command/args overrides.
                              properties:
                                containerName:
                                  description: The name of container
                                  type: string
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the command/args.
                                  enum:
                                  - add
                                  - remove
                                  type: string
                                value:
                                  description: |-
                                    Value to be applied to command/args.
                                    Items in Value which will be appended after command/args when Operator is 'add'.
                                    Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                    If Value is empty, then the command/args will remain the same.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - containerName
                              - operator
                              type: object
                            type: array
                          fieldOverrider:
                            description: |-
                              FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                              This allows changing a single field within the resource with multiple operations.
                              It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                              The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                            items:
                              description: |-
                                FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                                This allows changing a single field within the resource with multiple operations.
                                It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                                The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                                Note: In any given instance, FieldOverrider processes either JSON or YAML fields, but not both simultaneously.
                              properties:
                                fieldPath:
                                  description: |-
                                    FieldPath specifies the initial location in the instance document where the operation should take place.
                                    The path uses RFC 6901 for navigating into nested structures. For example, the path "/data/db-config.yaml"
                                    specifies the configuration data key named "db-config.yaml" in a ConfigMap: "/data/db-config.yaml".
                                  type: string
                                json:
                                  description: JSON represents the operations performed on
                                    the JSON document specified by the FieldPath.
                                  items:
                                    description: JSONPatchOperation represents a single field
                                      modification operation for JSON format.
                                    properties:
                                      operator:
                                        description: |-
                                          Operator indicates the operation on target field.
                                          Available operators are: "add", "remove", and "replace".
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      subPath:
                                        description: |-
                                          SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                          The path uses RFC 6901 for navigating into nested structures.
                                        type: string
                                      value:
                                        description: |-
                                          Value is the new value to set for the specified field if the operation is "add" or "replace".
                                          For "remove" operation, this field is ignored.
                                        x-kubernetes-preserve-unknown-fields: true
                                    required:
                                    - operator
                                    - subPath
                                    type: object
                                  type: array
                                yaml:
                                  description: YAML represents the operations performed on
                                    the YAML document specified by the FieldPath.
                                  items:
                                    description: YAMLPatchOperation represents a single field
                                      modification operation for YAML format.
                                    properties:
                                      operator:
                                        description: |-
                                          Operator indicates the operation on target field.
                                          Available operators are: "add", "remove", and "replace".
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      subPath:
                                        description: |-
                                          SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                          The path uses RFC 6901 for navigating into nested structures.
                                        type: string
                                      value:
                                        description: |-
                                          Value is the new value to set for the specified field if the operation is "add" or "replace".
                                          For "remove" operation, this field is ignored.
                                        x-kubernetes-preserve-unknown-fields: true
                                    required:
                                    - operator
                                    - subPath
                                    type: object
                                  type: array
                              required:
                              - fieldPath
                              type: object
                            type: array
                          imageOverrider:
                            description: ImageOverrider represents the rules dedicated to
                              handling image overrides.
                            items:
                              description: ImageOverrider represents the rules dedicated to
                                handling image overrides.
                              properties:
                                component:
                                  description: |-
                                    Component is part of image name.
                                    Basically we presume an image can be made of '[registry/]repository[:tag]'.
                                    The registry could be:
                                    - registry.k8s.io
                                    - fictional.registry.example:10443
                                    The repository could be:
                                    - kube-apiserver
                                    - fictional/nginx
                                    The tag cloud be:
                                    - latest
                                    - v1.19.1
                                    - @sha256:dbcc1c35ac38df41fd2f5e4130b32ffdb93ebae8b3dbe638c23575912276fc9c
                                  enum:
                                  - Registry
                                  - Repository
                                  - Tag
                                  type: string
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the image.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                predicate:
                                  description: |-
                                    Predicate filters images before applying the rule.
        
                                    Defaults to nil, in that case, the system will automatically detect image fields if the resource type is
                                    Pod, ReplicaSet, Deployment, StatefulSet, DaemonSet or Job by following rule:
                                      - Pod: /spec/containers/<N>/image
                                      - ReplicaSet: /spec/template/spec/containers/<N>/image
                                      - Deployment: /spec/template/spec/containers/<N>/image
                                      - DaemonSet: /spec/template/spec/containers/<N>/image
                                      - StatefulSet: /spec/template/spec/containers/<N>/image
                                      - Job: /spec/template/spec/containers/<N>/image
                                    In addition, all images will be processed if the resource object has more than one container.
        
                                    If not nil, only images matches the filters will be processed.
                                  properties:
                                    path:
                                      description: Path indicates the path of target field
                                      type: string
                                  required:
                                  - path
                                  type: object
                                value:
                                  description: |-
                                    Value to be applied to image.
                                    Must not be empty when operator is 'add' or 'replace'.
                                    Defaults to empty and ignored when operator is 'remove'.
                                  type: string
                              required:
                              - component
                              - operator
                              type: object
                            type: array
                          labelsOverrider:
                            description: LabelsOverrider represents the rules dedicated to
                              handling workload labels
                            items:
                              description: LabelAnnotationOverrider represents the rules dedicated
                                to handling workload labels/annotations
                              properties:
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the workload.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                value:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    Value to be applied to annotations/labels of workload.
                                    Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                    Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                    Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                  type: object
                              required:
                              - operator
                              - value
                              type: object
                            type: array
                          plaintext:
                            description: Plaintext represents override rules defined with
                              plaintext overriders.
                            items:
                              description: |-
                                PlaintextOverrider is a simple overrider that overrides target fields
                                according to path, operator and value.
                              properties:
                                operator:
                                  description: |-
                                    Operator indicates the operation on target field.
                                    Available operators are: add, replace and remove.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                path:
                                  description: Path indicates the path of target field
                                  type: string
                                value:
                                  description: |-
                                    Value to be applied to target field.
                                    Must be empty when operator is Remove.
                                  x-kubernetes-preserve-unknown-fields: true
                              required:
                              - operator
                              - path
                              type: object
                            type: array
                        type: object
                      resourceSelectors:
                        description: |-
                          ResourceSelectors restricts resource types that this override policy applies to.
                          nil means matching all resources.
                        items:
                          description: ResourceSelector the resources will be selected.
                          properties:
                            apiVersion:
                              description: APIVersion represents the API version of the target
                                resources.
                              type: string
                            kind:
                              description: Kind represents the Kind of the target resources.
                              type: string
                            labelSelector:
                              description: |-
                                A label query over a set of resources.
                                If name is not empty, labelSelector will be ignored.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label selector
                                    requirements. The requirements are ANDed.
                                  items:
                                    description: |-
                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                      relates the key and values.
                                    properties:
                                      key:
                                        description: key is the label key that the selector
                                          applies to.
                                        type: string
                                      operator:
                                        description: |-
                                          operator represents a key's relationship to a set of values.
                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                        type: string
                                      values:
                                        description: |-
                                          values is an array of string values. If the operator is In or NotIn,
                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                          the values array must be empty. This array is replaced during a strategic
                                          merge patch.
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            name:
                              description: |-
                                Name of the target resource.
                                Default is empty, which means selecting all resources.
                              type: string
                            namespace:
                              description: |-
                                Namespace of the target resource.
                                Default is empty, which means inherit from the parent object scope.
                              type: string
                          required:
                          - apiVersion
                          - kind
                          type: object
                        type: array
                      targetCluster:
                        description: |-
                          TargetCluster defines restrictions on this override policy
                          that only applies to resources propagated to the matching clusters.
                          nil means matching all clusters.
        
                          Deprecated: This filed is deprecated in v1.0 and please use the OverrideRules instead.
                        properties:
                          clusterNames:
                            description: ClusterNames is the list of clusters to be selected.
                            items:
                              type: string
                            type: array
                          exclude:
                            description: ExcludedClusters is the list of clusters to be ignored.
                            items:
                              type: string
                            type: array
                          fieldSelector:
                            description: |-
                              FieldSelector is a filter to select member clusters by fields.
                              The key(field) of the match expression should be 'provider', 'region', or 'zone',
                              and the operator of the match expression should be 'In' or 'NotIn'.
                              If non-nil and non-empty, only the clusters match this filter will be selected.
                            properties:
                              matchExpressions:
                                description: A list of field selector requirements.
                                items:
                                  description: |-
                                    A node selector requirement is a selector that contains values, a key, and an operator
                                    that relates the key and values.
                                  properties:
                                    key:
                                      description: The label key that the selector applies
                                        to.
                                      type: string
                                    operator:
                                      description: |-
                                        Represents a key's relationship to a set of values.
                                        Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                      type: string
                                    values:
                                      description: |-
                                        An array of string values. If the operator is In or NotIn,
                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                        the values array must be empty. If the operator is Gt or Lt, the values
                                        array must have a single element, which will be interpreted as an integer.
                                        This array is replaced during a strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                            type: object
                          labelSelector:
                            description: |-
                              LabelSelector is a filter to select member clusters by labels.
                              If non-nil and non-empty, only the clusters match this filter will be selected.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: |-
                                    A label selector requirement is a selector that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: |-
                                        operator represents a key's relationship to a set of values.
                                        Valid operators are In, NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: |-
                                        values is an array of string values. If the operator is In or NotIn,
                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                        the values array must be empty. This array is replaced during a strategic
                                        merge patch.
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: |-
                                  matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                  map is equivalent to an element of matchExpressions, whose key field is "key", the
                                  operator is "In", and the values array contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                            x-kubernetes-map-type: atomic
                        type: object
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
        
  
  
      policy.karmada.io_clusterpropagationpolicies.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: clusterpropagationpolicies.policy.karmada.io
        spec:
          group: policy.karmada.io
          names:
            categories:
            - karmada-io
            kind: ClusterPropagationPolicy
            listKind: ClusterPropagationPolicyList
            plural: clusterpropagationpolicies
            shortNames:
            - cpp
            singular: clusterpropagationpolicy
          scope: Cluster
          versions:
          - additionalPrinterColumns:
            - jsonPath: .spec.conflictResolution
              name: CONFLICT-RESOLUTION
              type: string
            - jsonPath: .spec.priority
              name: PRIORITY
              type: string
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  ClusterPropagationPolicy represents the cluster-wide policy that propagates a group of resources to one or more clusters.
                  Different with PropagationPolicy that could only propagate resources in its own namespace, ClusterPropagationPolicy
                  is able to propagate cluster level resources and resources in any namespace other than system reserved ones.
                  System reserved namespaces are: karmada-system, karmada-cluster, karmada-es-*.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior of ClusterPropagationPolicy.
                    properties:
                      activationPreference:
                        description: |-
                          ActivationPreference indicates how the referencing resource template will
                          be propagated, in case of policy changes.
        
                          If empty, the resource template will respond to policy changes
                          immediately, in other words, any policy changes will drive the resource
                          template to be propagated immediately as per the current propagation rules.
        
                          If the value is 'Lazy' means the policy changes will not take effect for now
                          but defer to the resource template changes, in other words, the resource
                          template will not be propagated as per the current propagation rules until
                          there is an update on it.
                          This is an experimental feature that might help in a scenario where a policy
                          manages huge amount of resource templates, changes to a policy typically
                          affect numerous applications simultaneously. A minor misconfiguration
                          could lead to widespread failures. With this feature, the change can be
                          gradually rolled out through iterative modifications of resource templates.
                        enum:
                        - Lazy
                        type: string
                      association:
                        description: |-
                          Association tells if relevant resources should be selected automatically.
                          e.g. a ConfigMap referred by a Deployment.
                          default false.
                          Deprecated: in favor of PropagateDeps.
                        type: boolean
                      conflictResolution:
                        default: Abort
                        description: |-
                          ConflictResolution declares how potential conflict should be handled when
                          a resource that is being propagated already exists in the target cluster.
        
                          It defaults to "Abort" which means stop propagating to avoid unexpected
                          overwrites. The "Overwrite" might be useful when migrating legacy cluster
                          resources to Karmada, in which case conflict is predictable and can be
                          instructed to Karmada take over the resource by overwriting.
                        enum:
                        - Abort
                        - Overwrite
                        type: string
                      dependentOverrides:
                        description: |-
                          DependentOverrides represents the list of overrides(OverridePolicy)
                          which must present before the current PropagationPolicy takes effect.
        
                          It used to explicitly specify overrides which current PropagationPolicy rely on.
                          A typical scenario is the users create OverridePolicy(ies) and resources at the same time,
                          they want to ensure the new-created policies would be adopted.
        
                          Note: For the overrides, OverridePolicy(ies) in current namespace and ClusterOverridePolicy(ies),
                          which not present in this list will still be applied if they matches the resources.
                        items:
                          type: string
                        type: array
                      failover:
                        description: |-
                          Failover indicates how Karmada migrates applications in case of failures.
                          If this value is nil, failover is disabled.
                        properties:
                          application:
                            description: |-
                              Application indicates failover behaviors in case of application failure.
                              If this value is nil, failover is disabled.
                              If set, the PropagateDeps should be true so that the dependencies could
                              be migrated along with the application.
                            properties:
                              decisionConditions:
                                description: |-
                                  DecisionConditions indicates the decision conditions of performing the failover process.
                                  Only when all conditions are met can the failover process be performed.
                                  Currently, DecisionConditions includes several conditions:
                                  - TolerationSeconds (optional)
                                properties:
                                  tolerationSeconds:
                                    default: 300
                                    description: |-
                                      TolerationSeconds represents the period of time Karmada should wait
                                      after reaching the desired state before performing failover process.
                                      If not specified, Karmada will immediately perform failover process.
                                      Defaults to 300s.
                                    format: int32
                                    type: integer
                                type: object
                              gracePeriodSeconds:
                                description: |-
                                  GracePeriodSeconds is the maximum waiting duration in seconds before
                                  application on the migrated cluster should be deleted.
                                  Required only when PurgeMode is "Graciously" and defaults to 600s.
                                  If the application on the new cluster cannot reach a Healthy state,
                                  Karmada will delete the application after GracePeriodSeconds is reached.
                                  Value must be positive integer.
                                format: int32
                                type: integer
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully", "Never", "Immediately"(deprecated),
                                  and "Graciously"(deprecated).
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                - Never
                                - Immediately
                                - Graciously
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            required:
                            - decisionConditions
                            type: object
                          cluster:
                            description: |-
                              Cluster indicates failover behaviors in case of cluster failure.
                              If this value is nil, the failover behavior in case of cluster failure
                              will be controlled by the controller's no-execute-taint-eviction-purge-mode
                              parameter.
                              If set, the failover behavior in case of cluster failure will be defined
                              by this value.
                            properties:
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully".
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            type: object
                        type: object
                      placement:
                        description: Placement represents the rule for select clusters to
                          propagate resources.
                        properties:
                          clusterAffinities:
                            description: |-
                              ClusterAffinities represents scheduling restrictions to multiple cluster
                              groups that indicated by ClusterAffinityTerm.
        
                              The scheduler will evaluate these groups one by one in the order they
                              appear in the spec, the group that does not satisfy scheduling restrictions
                              will be ignored which means all clusters in this group will not be selected
                              unless it also belongs to the next group(a cluster could belong to multiple
                              groups).
        
                              If none of the groups satisfy the scheduling restrictions, then scheduling
                              fails, which means no cluster will be selected.
        
                              Note:
                                1. ClusterAffinities can not co-exist with ClusterAffinity.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
        
                              Potential use case 1:
                              The private clusters in the local data center could be the main group, and
                              the managed clusters provided by cluster providers could be the secondary
                              group. So that the Karmada scheduler would prefer to schedule workloads
                              to the main group and the second group will only be considered in case of
                              the main group does not satisfy restrictions(like, lack of resources).
        
                              Potential use case 2:
                              For the disaster recovery scenario, the clusters could be organized to
                              primary and backup groups, the workloads would be scheduled to primary
                              clusters firstly, and when primary cluster fails(like data center power off),
                              Karmada scheduler could migrate workloads to the backup clusters.
                            items:
                              description: ClusterAffinityTerm selects a set of cluster.
                              properties:
                                affinityName:
                                  description: AffinityName is the name of the cluster group.
                                  maxLength: 32
                                  minLength: 1
                                  type: string
                                clusterNames:
                                  description: ClusterNames is the list of clusters to be
                                    selected.
                                  items:
                                    type: string
                                  type: array
                                exclude:
                                  description: ExcludedClusters is the list of clusters to
                                    be ignored.
                                  items:
                                    type: string
                                  type: array
                                fieldSelector:
                                  description: |-
                                    FieldSelector is a filter to select member clusters by fields.
                                    The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                    and the operator of the match expression should be 'In' or 'NotIn'.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: A list of field selector requirements.
                                      items:
                                        description: |-
                                          A node selector requirement is a selector that contains values, a key, and an operator
                                          that relates the key and values.
                                        properties:
                                          key:
                                            description: The label key that the selector applies
                                              to.
                                            type: string
                                          operator:
                                            description: |-
                                              Represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                            type: string
                                          values:
                                            description: |-
                                              An array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. If the operator is Gt or Lt, the values
                                              array must have a single element, which will be interpreted as an integer.
                                              This array is replaced during a strategic merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                  type: object
                                labelSelector:
                                  description: |-
                                    LabelSelector is a filter to select member clusters by labels.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label selector
                                        requirements. The requirements are ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that the selector
                                              applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              required:
                              - affinityName
                              type: object
                            type: array
                          clusterAffinity:
                            description: |-
                              ClusterAffinity represents scheduling restrictions to a certain set of clusters.
                              Note:
                                1. ClusterAffinity can not co-exist with ClusterAffinities.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                              exclude:
                                description: ExcludedClusters is the list of clusters to be
                                  ignored.
                                items:
                                  type: string
                                type: array
                              fieldSelector:
                                description: |-
                                  FieldSelector is a filter to select member clusters by fields.
                                  The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                  and the operator of the match expression should be 'In' or 'NotIn'.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: A list of field selector requirements.
                                    items:
                                      description: |-
                                        A node selector requirement is a selector that contains values, a key, and an operator
                                        that relates the key and values.
                                      properties:
                                        key:
                                          description: The label key that the selector applies
                                            to.
                                          type: string
                                        operator:
                                          description: |-
                                            Represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                          type: string
                                        values:
                                          description: |-
                                            An array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. If the operator is Gt or Lt, the values
                                            array must have a single element, which will be interpreted as an integer.
                                            This array is replaced during a strategic merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                type: object
                              labelSelector:
                                description: |-
                                  LabelSelector is a filter to select member clusters by labels.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: matchExpressions is a list of label selector
                                      requirements. The requirements are ANDed.
                                    items:
                                      description: |-
                                        A label selector requirement is a selector that contains values, a key, and an operator that
                                        relates the key and values.
                                      properties:
                                        key:
                                          description: key is the label key that the selector
                                            applies to.
                                          type: string
                                        operator:
                                          description: |-
                                            operator represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists and DoesNotExist.
                                          type: string
                                        values:
                                          description: |-
                                            values is an array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. This array is replaced during a strategic
                                            merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                    x-kubernetes-list-type: atomic
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    description: |-
                                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                                    type: object
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                          clusterTolerations:
                            description: ClusterTolerations represents the tolerations.
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                          replicaScheduling:
                            description: |-
                              ReplicaScheduling represents the scheduling policy on dealing with the number of replicas
                              when propagating resources that have replicas in spec (e.g. deployments, statefulsets) to member clusters.
                            properties:
                              replicaDivisionPreference:
                                description: |-
                                  ReplicaDivisionPreference determines how the replicas is divided
                                  when ReplicaSchedulingType is "Divided". Valid options are Aggregated and Weighted.
                                  "Aggregated" divides replicas into clusters as few as possible,
                                  while respecting clusters' resource availabilities during the division.
                                  "Weighted" divides replicas by weight according to WeightPreference.
                                enum:
                                - Aggregated
                                - Weighted
                                type: string
                              replicaSchedulingType:
                                default: Divided
                                description: |-
                                  ReplicaSchedulingType determines how the replicas is scheduled when karmada propagating
                                  a resource. Valid options are Duplicated and Divided.
                                  "Duplicated" duplicates the same replicas to each candidate member cluster from resource.
                                  "Divided" divides replicas into parts according to number of valid candidate member
                                  clusters, and exact replicas for each cluster are determined by ReplicaDivisionPreference.
                                enum:
                                - Duplicated
                                - Divided
                                type: string
                              weightPreference:
                                description: |-
                                  WeightPreference describes weight for each cluster or for each group of cluster
                                  If ReplicaDivisionPreference is set to "Weighted", and WeightPreference is not set, scheduler will weight all clusters the same.
                                properties:
                                  dynamicWeight:
                                    description: |-
                                      DynamicWeight specifies the factor to generates dynamic weight list.
                                      If specified, StaticWeightList will be ignored.
                                    enum:
                                    - AvailableReplicas
                                    type: string
                                  staticWeightList:
                                    description: StaticWeightList defines the static cluster
                                      weight.
                                    items:
                                      description: StaticClusterWeight defines the static
                                        cluster weight.
                                      properties:
                                        targetCluster:
                                          description: TargetCluster describes the filter
                                            to select clusters.
                                          properties:
                                            clusterNames:
                                              description: ClusterNames is the list of clusters
                                                to be selected.
                                              items:
                                                type: string
                                              type: array
                                            exclude:
                                              description: ExcludedClusters is the list of
                                                clusters to be ignored.
                                              items:
                                                type: string
                                              type: array
                                            fieldSelector:
                                              description: |-
                                                FieldSelector is a filter to select member clusters by fields.
                                                The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                                and the operator of the match expression should be 'In' or 'NotIn'.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: A list of field selector requirements.
                                                  items:
                                                    description: |-
                                                      A node selector requirement is a selector that contains values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key that the
                                                          selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          Represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          An array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. If the operator is Gt or Lt, the values
                                                          array must have a single element, which will be interpreted as an integer.
                                                          This array is replaced during a strategic merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                              type: object
                                            labelSelector:
                                              description: |-
                                                LabelSelector is a filter to select member clusters by labels.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is a list
                                                    of label selector requirements. The requirements
                                                    are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label key
                                                          that the selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                  x-kubernetes-list-type: atomic
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                          type: object
                                        weight:
                                          description: Weight expressing the preference to
                                            the cluster(s) specified by 'TargetCluster'.
                                          format: int64
                                          minimum: 1
                                          type: integer
                                      required:
                                      - targetCluster
                                      - weight
                                      type: object
                                    type: array
                                type: object
                            type: object
                          spreadConstraints:
                            description: SpreadConstraints represents a list of the scheduling
                              constraints.
                            items:
                              description: SpreadConstraint represents the spread constraints
                                on resources.
                              properties:
                                maxGroups:
                                  description: MaxGroups restricts the maximum number of cluster
                                    groups to be selected.
                                  type: integer
                                minGroups:
                                  description: |-
                                    MinGroups restricts the minimum number of cluster groups to be selected.
                                    Defaults to 1.
                                  type: integer
                                spreadByField:
                                  description: |-
                                    SpreadByField represents the fields on Karmada cluster API used for
                                    dynamically grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    Available fields for spreading are: cluster, region, zone, and provider.
                                    SpreadByField should not co-exist with SpreadByLabel.
                                    If both SpreadByField and SpreadByLabel are empty, SpreadByField will be set to "cluster" by system.
                                  enum:
                                  - cluster
                                  - region
                                  - zone
                                  - provider
                                  type: string
                                spreadByLabel:
                                  description: |-
                                    SpreadByLabel represents the label key used for
                                    grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    SpreadByLabel should not co-exist with SpreadByField.
                                  type: string
                              type: object
                            type: array
                        type: object
                      preemption:
                        default: Never
                        description: |-
                          Preemption declares the behaviors for preempting.
                          Valid options are "Always" and "Never".
                        enum:
                        - Always
                        - Never
                        type: string
                      preserveResourcesOnDeletion:
                        description: |-
                          PreserveResourcesOnDeletion controls whether resources should be preserved on the
                          member clusters when the resource template is deleted.
                          If set to true, resources will be preserved on the member clusters.
                          Default is false, which means resources will be deleted along with the resource template.
        
                          This setting is particularly useful during workload migration scenarios to ensure
                          that rollback can occur quickly without affecting the workloads running on the
                          member clusters.
        
                          Additionally, this setting applies uniformly across all member clusters and will not
                          selectively control preservation on only some clusters.
        
                          Note: This setting does not apply to the deletion of the policy itself.
                          When the policy is deleted, the resource templates and their corresponding
                          propagated resources in member clusters will remain unchanged unless explicitly deleted.
                        type: boolean
                      priority:
                        default: 0
                        description: |-
                          Priority indicates the importance of a policy(PropagationPolicy or ClusterPropagationPolicy).
                          A policy will be applied for the matched resource templates if there is
                          no other policies with higher priority at the point of the resource
                          template be processed.
                          Once a resource template has been claimed by a policy, by default it will
                          not be preempted by following policies even with a higher priority.
                          See Preemption for more details.
        
                          In case of two policies have the same priority, the one with a more precise
                          matching rules in ResourceSelectors wins:
                          - matching by name(resourceSelector.name) has higher priority than
                            by selector(resourceSelector.labelSelector)
                          - matching by selector(resourceSelector.labelSelector) has higher priority
                            than by APIVersion(resourceSelector.apiVersion) and Kind(resourceSelector.kind).
                          If there is still no winner at this point, the one with the lower alphabetic
                          order wins, e.g. policy 'bar' has higher priority than 'foo'.
        
                          The higher the value, the higher the priority. Defaults to zero.
                        format: int32
                        type: integer
                      propagateDeps:
                        description: |-
                          PropagateDeps tells if relevant resources should be propagated automatically.
                          Take 'Deployment' which referencing 'ConfigMap' and 'Secret' as an example, when 'propagateDeps' is 'true',
                          the referencing resources could be omitted(for saving config effort) from 'resourceSelectors' as they will be
                          propagated along with the Deployment. In addition to the propagating process, the referencing resources will be
                          migrated along with the Deployment in the fail-over scenario.
        
                          Defaults to false.
                        type: boolean
                      resourceSelectors:
                        description: |-
                          ResourceSelectors used to select resources.
                          Nil or empty selector is not allowed and doesn't mean match all kinds
                          of resources for security concerns that sensitive resources(like Secret)
                          might be accidentally propagated.
                        items:
                          description: ResourceSelector the resources will be selected.
                          properties:
                            apiVersion:
                              description: APIVersion represents the API version of the target
                                resources.
                              type: string
                            kind:
                              description: Kind represents the Kind of the target resources.
                              type: string
                            labelSelector:
                              description: |-
                                A label query over a set of resources.
                                If name is not empty, labelSelector will be ignored.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label selector
                                    requirements. The requirements are ANDed.
                                  items:
                                    description: |-
                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                      relates the key and values.
                                    properties:
                                      key:
                                        description: key is the label key that the selector
                                          applies to.
                                        type: string
                                      operator:
                                        description: |-
                                          operator represents a key's relationship to a set of values.
                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                        type: string
                                      values:
                                        description: |-
                                          values is an array of string values. If the operator is In or NotIn,
                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                          the values array must be empty. This array is replaced during a strategic
                                          merge patch.
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            name:
                              description: |-
                                Name of the target resource.
                                Default is empty, which means selecting all resources.
                              type: string
                            namespace:
                              description: |-
                                Namespace of the target resource.
                                Default is empty, which means inherit from the parent object scope.
                              type: string
                          required:
                          - apiVersion
                          - kind
                          type: object
                        minItems: 1
                        type: array
                      schedulePriority:
                        description: |-
                          SchedulePriority defines how Karmada should resolve the priority and preemption policy
                          for workload scheduling.
        
                          This setting is useful for controlling the scheduling behavior of offline workloads.
                          By setting a higher or lower priority, users can control which workloads are scheduled first.
                          Additionally, it allows specifying a preemption policy where higher-priority workloads can
                          preempt lower-priority ones in scenarios of resource contention.
        
                          Note: This feature is currently in the alpha stage. The priority-based scheduling functionality is
                          controlled by the PriorityBasedScheduling feature gate, and preemption is controlled by the
                          PriorityBasedPreemptiveScheduling feature gate. Currently, only priority-based scheduling is
                          supported. Preemption functionality is not yet available and will be introduced in future
                          releases as the feature matures.
                        properties:
                          priorityClassName:
                            description: |-
                              PriorityClassName specifies which PriorityClass to use. Its behavior depends on PriorityClassSource:
        
                              Behavior of PriorityClassName:
        
                              For KubePriorityClass:
                              - When specified: Uses the named Kubernetes PriorityClass.
        
                              For PodPriorityClass:
                              - Uses PriorityClassName from the PodTemplate.
                              - Not yet implemented.
        
                              For FederatedPriorityClass:
                              - Not yet implemented.
                            type: string
                          priorityClassSource:
                            description: |-
                              PriorityClassSource specifies where Karmada should look for the PriorityClass definition.
                              Available options:
                              - KubePriorityClass: Uses Kubernetes PriorityClass (scheduling.k8s.io/v1)
                              - PodPriorityClass: Uses PriorityClassName from PodTemplate: PodSpec.PriorityClassName (not yet implemented)
                              - FederatedPriorityClass: Uses Karmada FederatedPriorityClass (not yet implemented)
                            enum:
                            - KubePriorityClass
                            type: string
                        required:
                        - priorityClassName
                        - priorityClassSource
                        type: object
                      schedulerName:
                        default: default-scheduler
                        description: |-
                          SchedulerName represents which scheduler to proceed the scheduling.
                          If specified, the policy will be dispatched by specified scheduler.
                          If not specified, the policy will be dispatched by default scheduler.
                        type: string
                      suspension:
                        description: |-
                          Suspension declares the policy for suspending different aspects of propagation.
                          nil means no suspension. no default values.
                        properties:
                          dispatching:
                            description: |-
                              Dispatching controls whether dispatching should be suspended.
                              nil means not suspend, no default value, only accepts 'true'.
                              Note: true means stop propagating to all clusters. Can not co-exist
                              with DispatchingOnClusters which is used to suspend particular clusters.
                            type: boolean
                          dispatchingOnClusters:
                            description: |-
                              DispatchingOnClusters declares a list of clusters to which the dispatching
                              should be suspended.
                              Note: Can not co-exist with Dispatching which is used to suspend all.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                            type: object
                        type: object
                    required:
                    - resourceSelectors
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources: {}
        
  
  
      policy.karmada.io_clustertaintpolicies.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: clustertaintpolicies.policy.karmada.io
        spec:
          group: policy.karmada.io
          names:
            kind: ClusterTaintPolicy
            listKind: ClusterTaintPolicyList
            plural: clustertaintpolicies
            singular: clustertaintpolicy
          scope: Cluster
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: |-
                  ClusterTaintPolicy automates taint management on Cluster objects based
                  on declarative conditions.
                  The system evaluates AddOnConditions to determine when to add taints,
                  and RemoveOnConditions to determine when to remove taints.
                  AddOnConditions are evaluated before RemoveOnConditions.
                  Taints are NEVER automatically removed when the ClusterTaintPolicy is deleted.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior of ClusterTaintPolicy.
                    properties:
                      addOnConditions:
                        description: |-
                          AddOnConditions defines the conditions to match for triggering
                          the controller to add taints on the cluster object.
                          The match conditions are ANDed.
                          If AddOnConditions is empty, no taints will be added.
                        items:
                          description: |-
                            MatchCondition represents the condition match detail of activating the failover
                            relevant taints on target clusters.
                          properties:
                            conditionType:
                              description: ConditionType specifies the ClusterStatus condition
                                type.
                              type: string
                            operator:
                              description: |-
                                Operator represents a relationship to a set of values.
                                Valid operators are In, NotIn.
                              type: string
                            statusValues:
                              description: |-
                                StatusValues is an array of metav1.ConditionStatus values.
                                The item specifies the ClusterStatus condition status.
                              items:
                                type: string
                              type: array
                          required:
                          - conditionType
                          - operator
                          - statusValues
                          type: object
                        type: array
                      removeOnConditions:
                        description: |-
                          RemoveOnConditions defines the conditions to match for triggering
                          the controller to remove taints from the cluster object.
                          The match conditions are ANDed.
                          If RemoveOnConditions is empty, no taints will be removed.
                        items:
                          description: |-
                            MatchCondition represents the condition match detail of activating the failover
                            relevant taints on target clusters.
                          properties:
                            conditionType:
                              description: ConditionType specifies the ClusterStatus condition
                                type.
                              type: string
                            operator:
                              description: |-
                                Operator represents a relationship to a set of values.
                                Valid operators are In, NotIn.
                              type: string
                            statusValues:
                              description: |-
                                StatusValues is an array of metav1.ConditionStatus values.
                                The item specifies the ClusterStatus condition status.
                              items:
                                type: string
                              type: array
                          required:
                          - conditionType
                          - operator
                          - statusValues
                          type: object
                        type: array
                      taints:
                        description: |-
                          Taints specifies the taints that need to be added or removed on
                          the cluster object which match with TargetClusters.
                          If the Taints is modified, the system will process the taints based on
                          the latest value of Taints during the next condition-triggered execution,
                          regardless of whether the taint has been added or removed.
                        items:
                          description: Taint describes the taint that needs to be applied
                            to the cluster.
                          properties:
                            effect:
                              description: Effect represents the taint effect to be applied
                                to a cluster.
                              type: string
                            key:
                              description: Key represents the taint key to be applied to a
                                cluster.
                              type: string
                            value:
                              description: Value represents the taint value corresponding
                                to the taint key.
                              type: string
                          required:
                          - effect
                          - key
                          type: object
                        minItems: 1
                        type: array
                      targetClusters:
                        description: |-
                          TargetClusters specifies the clusters that ClusterTaintPolicy needs
                          to pay attention to.
                          For clusters that no longer match the TargetClusters, the taints
                          will be kept unchanged.
                          If targetClusters is not set, any cluster can be selected.
                        properties:
                          clusterNames:
                            description: ClusterNames is the list of clusters to be selected.
                            items:
                              type: string
                            type: array
                          exclude:
                            description: ExcludedClusters is the list of clusters to be ignored.
                            items:
                              type: string
                            type: array
                          fieldSelector:
                            description: |-
                              FieldSelector is a filter to select member clusters by fields.
                              The key(field) of the match expression should be 'provider', 'region', or 'zone',
                              and the operator of the match expression should be 'In' or 'NotIn'.
                              If non-nil and non-empty, only the clusters match this filter will be selected.
                            properties:
                              matchExpressions:
                                description: A list of field selector requirements.
                                items:
                                  description: |-
                                    A node selector requirement is a selector that contains values, a key, and an operator
                                    that relates the key and values.
                                  properties:
                                    key:
                                      description: The label key that the selector applies
                                        to.
                                      type: string
                                    operator:
                                      description: |-
                                        Represents a key's relationship to a set of values.
                                        Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                      type: string
                                    values:
                                      description: |-
                                        An array of string values. If the operator is In or NotIn,
                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                        the values array must be empty. If the operator is Gt or Lt, the values
                                        array must have a single element, which will be interpreted as an integer.
                                        This array is replaced during a strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                            type: object
                          labelSelector:
                            description: |-
                              LabelSelector is a filter to select member clusters by labels.
                              If non-nil and non-empty, only the clusters match this filter will be selected.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: |-
                                    A label selector requirement is a selector that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: |-
                                        operator represents a key's relationship to a set of values.
                                        Valid operators are In, NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: |-
                                        values is an array of string values. If the operator is In or NotIn,
                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                        the values array must be empty. This array is replaced during a strategic
                                        merge patch.
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: |-
                                  matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                  map is equivalent to an element of matchExpressions, whose key field is "key", the
                                  operator is "In", and the values array contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                            x-kubernetes-map-type: atomic
                        type: object
                    required:
                    - taints
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
        
  
  
      policy.karmada.io_federatedresourcequotas.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: federatedresourcequotas.policy.karmada.io
        spec:
          group: policy.karmada.io
          names:
            categories:
            - karmada-io
            kind: FederatedResourceQuota
            listKind: FederatedResourceQuotaList
            plural: federatedresourcequotas
            singular: federatedresourcequota
          scope: Namespaced
          versions:
          - additionalPrinterColumns:
            - jsonPath: .status.overall
              name: OVERALL
              type: string
            - jsonPath: .status.overallUsed
              name: OVERALL_USED
              type: string
            name: v1alpha1
            schema:
              openAPIV3Schema:
                description: FederatedResourceQuota sets aggregate quota restrictions enforced
                  per namespace across all clusters.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec defines the desired quota.
                    properties:
                      overall:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Overall is the set of desired hard limits for each named
                          resource.
                        type: object
                      staticAssignments:
                        description: |-
                          StaticAssignments specifies ResourceQuota settings for specific clusters.
                          If non-empty, Karmada will create ResourceQuotas in the corresponding clusters.
                          Clusters not listed here or when StaticAssignments is empty will have no ResourceQuotas created.
        
                          This field addresses multi-cluster configuration management challenges by allowing centralized
                          control over ResourceQuotas across clusters.
        
                          Note: The Karmada scheduler currently does NOT use this configuration for scheduling decisions.
                          Future updates may integrate it into the scheduling logic.
                        items:
                          description: StaticClusterAssignment represents the set of desired
                            hard limits for a specific cluster.
                          properties:
                            clusterName:
                              description: ClusterName is the name of the cluster the limits
                                enforce to.
                              type: string
                            hard:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: Hard is the set of desired hard limits for each
                                named resource.
                              type: object
                          required:
                          - clusterName
                          - hard
                          type: object
                        type: array
                    required:
                    - overall
                    type: object
                  status:
                    description: Status defines the actual enforced quota and its current
                      usage.
                    properties:
                      aggregatedStatus:
                        description: AggregatedStatus is the observed quota usage of each
                          cluster.
                        items:
                          description: ClusterQuotaStatus represents the set of desired limits
                            and observed usage for a specific cluster.
                          properties:
                            clusterName:
                              description: ClusterName is the name of the cluster the limits
                                enforce to.
                              type: string
                            hard:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: |-
                                Hard is the set of enforced hard limits for each named resource.
                                More info: https://kubernetes.io/docs/concepts/policy/resource-quotas/
                              type: object
                            used:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: Used is the current observed total usage of the
                                resource in the namespace.
                              type: object
                          required:
                          - clusterName
                          type: object
                        type: array
                      overall:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Overall is the set of enforced hard limits for each named
                          resource.
                        type: object
                      overallUsed:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: OverallUsed is the current observed total usage of the
                          resource in the namespace.
                        type: object
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
        
  
  
      policy.karmada.io_overridepolicies.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: overridepolicies.policy.karmada.io
        spec:
          group: policy.karmada.io
          names:
            categories:
            - karmada-io
            kind: OverridePolicy
            listKind: OverridePolicyList
            plural: overridepolicies
            shortNames:
            - op
            singular: overridepolicy
          scope: Namespaced
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: OverridePolicy represents the policy that overrides a group of
                  resources to one or more clusters.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior of OverridePolicy.
                    properties:
                      overrideRules:
                        description: OverrideRules defines a collection of override rules
                          on target clusters.
                        items:
                          description: RuleWithCluster defines the override rules on clusters.
                          properties:
                            overriders:
                              description: Overriders represents the override rules that would
                                apply on resources
                              properties:
                                annotationsOverrider:
                                  description: AnnotationsOverrider represents the rules dedicated
                                    to handling workload annotations
                                  items:
                                    description: LabelAnnotationOverrider represents the rules
                                      dedicated to handling workload labels/annotations
                                    properties:
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the workload.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      value:
                                        additionalProperties:
                                          type: string
                                        description: |-
                                          Value to be applied to annotations/labels of workload.
                                          Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                          Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                          Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                        type: object
                                    required:
                                    - operator
                                    - value
                                    type: object
                                  type: array
                                argsOverrider:
                                  description: ArgsOverrider represents the rules dedicated
                                    to handling container args
                                  items:
                                    description: CommandArgsOverrider represents the rules
                                      dedicated to handling command/args overrides.
                                    properties:
                                      containerName:
                                        description: The name of container
                                        type: string
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the command/args.
                                        enum:
                                        - add
                                        - remove
                                        type: string
                                      value:
                                        description: |-
                                          Value to be applied to command/args.
                                          Items in Value which will be appended after command/args when Operator is 'add'.
                                          Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                          If Value is empty, then the command/args will remain the same.
                                        items:
                                          type: string
                                        type: array
                                    required:
                                    - containerName
                                    - operator
                                    type: object
                                  type: array
                                commandOverrider:
                                  description: CommandOverrider represents the rules dedicated
                                    to handling container command
                                  items:
                                    description: CommandArgsOverrider represents the rules
                                      dedicated to handling command/args overrides.
                                    properties:
                                      containerName:
                                        description: The name of container
                                        type: string
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the command/args.
                                        enum:
                                        - add
                                        - remove
                                        type: string
                                      value:
                                        description: |-
                                          Value to be applied to command/args.
                                          Items in Value which will be appended after command/args when Operator is 'add'.
                                          Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                          If Value is empty, then the command/args will remain the same.
                                        items:
                                          type: string
                                        type: array
                                    required:
                                    - containerName
                                    - operator
                                    type: object
                                  type: array
                                fieldOverrider:
                                  description: |-
                                    FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                                    This allows changing a single field within the resource with multiple operations.
                                    It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                                    The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                                  items:
                                    description: |-
                                      FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                                      This allows changing a single field within the resource with multiple operations.
                                      It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                                      The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                                      Note: In any given instance, FieldOverrider processes either JSON or YAML fields, but not both simultaneously.
                                    properties:
                                      fieldPath:
                                        description: |-
                                          FieldPath specifies the initial location in the instance document where the operation should take place.
                                          The path uses RFC 6901 for navigating into nested structures. For example, the path "/data/db-config.yaml"
                                          specifies the configuration data key named "db-config.yaml" in a ConfigMap: "/data/db-config.yaml".
                                        type: string
                                      json:
                                        description: JSON represents the operations performed
                                          on the JSON document specified by the FieldPath.
                                        items:
                                          description: JSONPatchOperation represents a single
                                            field modification operation for JSON format.
                                          properties:
                                            operator:
                                              description: |-
                                                Operator indicates the operation on target field.
                                                Available operators are: "add", "remove", and "replace".
                                              enum:
                                              - add
                                              - remove
                                              - replace
                                              type: string
                                            subPath:
                                              description: |-
                                                SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                                The path uses RFC 6901 for navigating into nested structures.
                                              type: string
                                            value:
                                              description: |-
                                                Value is the new value to set for the specified field if the operation is "add" or "replace".
                                                For "remove" operation, this field is ignored.
                                              x-kubernetes-preserve-unknown-fields: true
                                          required:
                                          - operator
                                          - subPath
                                          type: object
                                        type: array
                                      yaml:
                                        description: YAML represents the operations performed
                                          on the YAML document specified by the FieldPath.
                                        items:
                                          description: YAMLPatchOperation represents a single
                                            field modification operation for YAML format.
                                          properties:
                                            operator:
                                              description: |-
                                                Operator indicates the operation on target field.
                                                Available operators are: "add", "remove", and "replace".
                                              enum:
                                              - add
                                              - remove
                                              - replace
                                              type: string
                                            subPath:
                                              description: |-
                                                SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                                The path uses RFC 6901 for navigating into nested structures.
                                              type: string
                                            value:
                                              description: |-
                                                Value is the new value to set for the specified field if the operation is "add" or "replace".
                                                For "remove" operation, this field is ignored.
                                              x-kubernetes-preserve-unknown-fields: true
                                          required:
                                          - operator
                                          - subPath
                                          type: object
                                        type: array
                                    required:
                                    - fieldPath
                                    type: object
                                  type: array
                                imageOverrider:
                                  description: ImageOverrider represents the rules dedicated
                                    to handling image overrides.
                                  items:
                                    description: ImageOverrider represents the rules dedicated
                                      to handling image overrides.
                                    properties:
                                      component:
                                        description: |-
                                          Component is part of image name.
                                          Basically we presume an image can be made of '[registry/]repository[:tag]'.
                                          The registry could be:
                                          - registry.k8s.io
                                          - fictional.registry.example:10443
                                          The repository could be:
                                          - kube-apiserver
                                          - fictional/nginx
                                          The tag cloud be:
                                          - latest
                                          - v1.19.1
                                          - @sha256:dbcc1c35ac38df41fd2f5e4130b32ffdb93ebae8b3dbe638c23575912276fc9c
                                        enum:
                                        - Registry
                                        - Repository
                                        - Tag
                                        type: string
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the image.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      predicate:
                                        description: |-
                                          Predicate filters images before applying the rule.
        
                                          Defaults to nil, in that case, the system will automatically detect image fields if the resource type is
                                          Pod, ReplicaSet, Deployment, StatefulSet, DaemonSet or Job by following rule:
                                            - Pod: /spec/containers/<N>/image
                                            - ReplicaSet: /spec/template/spec/containers/<N>/image
                                            - Deployment: /spec/template/spec/containers/<N>/image
                                            - DaemonSet: /spec/template/spec/containers/<N>/image
                                            - StatefulSet: /spec/template/spec/containers/<N>/image
                                            - Job: /spec/template/spec/containers/<N>/image
                                          In addition, all images will be processed if the resource object has more than one container.
        
                                          If not nil, only images matches the filters will be processed.
                                        properties:
                                          path:
                                            description: Path indicates the path of target
                                              field
                                            type: string
                                        required:
                                        - path
                                        type: object
                                      value:
                                        description: |-
                                          Value to be applied to image.
                                          Must not be empty when operator is 'add' or 'replace'.
                                          Defaults to empty and ignored when operator is 'remove'.
                                        type: string
                                    required:
                                    - component
                                    - operator
                                    type: object
                                  type: array
                                labelsOverrider:
                                  description: LabelsOverrider represents the rules dedicated
                                    to handling workload labels
                                  items:
                                    description: LabelAnnotationOverrider represents the rules
                                      dedicated to handling workload labels/annotations
                                    properties:
                                      operator:
                                        description: Operator represents the operator which
                                          will apply on the workload.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      value:
                                        additionalProperties:
                                          type: string
                                        description: |-
                                          Value to be applied to annotations/labels of workload.
                                          Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                          Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                          Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                        type: object
                                    required:
                                    - operator
                                    - value
                                    type: object
                                  type: array
                                plaintext:
                                  description: Plaintext represents override rules defined
                                    with plaintext overriders.
                                  items:
                                    description: |-
                                      PlaintextOverrider is a simple overrider that overrides target fields
                                      according to path, operator and value.
                                    properties:
                                      operator:
                                        description: |-
                                          Operator indicates the operation on target field.
                                          Available operators are: add, replace and remove.
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      path:
                                        description: Path indicates the path of target field
                                        type: string
                                      value:
                                        description: |-
                                          Value to be applied to target field.
                                          Must be empty when operator is Remove.
                                        x-kubernetes-preserve-unknown-fields: true
                                    required:
                                    - operator
                                    - path
                                    type: object
                                  type: array
                              type: object
                            targetCluster:
                              description: |-
                                TargetCluster defines restrictions on this override policy
                                that only applies to resources propagated to the matching clusters.
                                nil means matching all clusters.
                              properties:
                                clusterNames:
                                  description: ClusterNames is the list of clusters to be
                                    selected.
                                  items:
                                    type: string
                                  type: array
                                exclude:
                                  description: ExcludedClusters is the list of clusters to
                                    be ignored.
                                  items:
                                    type: string
                                  type: array
                                fieldSelector:
                                  description: |-
                                    FieldSelector is a filter to select member clusters by fields.
                                    The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                    and the operator of the match expression should be 'In' or 'NotIn'.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: A list of field selector requirements.
                                      items:
                                        description: |-
                                          A node selector requirement is a selector that contains values, a key, and an operator
                                          that relates the key and values.
                                        properties:
                                          key:
                                            description: The label key that the selector applies
                                              to.
                                            type: string
                                          operator:
                                            description: |-
                                              Represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                            type: string
                                          values:
                                            description: |-
                                              An array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. If the operator is Gt or Lt, the values
                                              array must have a single element, which will be interpreted as an integer.
                                              This array is replaced during a strategic merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                  type: object
                                labelSelector:
                                  description: |-
                                    LabelSelector is a filter to select member clusters by labels.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label selector
                                        requirements. The requirements are ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that the selector
                                              applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - overriders
                          type: object
                        type: array
                      overriders:
                        description: |-
                          Overriders represents the override rules that would apply on resources
        
                          Deprecated: This filed is deprecated in v1.0 and please use the OverrideRules instead.
                        properties:
                          annotationsOverrider:
                            description: AnnotationsOverrider represents the rules dedicated
                              to handling workload annotations
                            items:
                              description: LabelAnnotationOverrider represents the rules dedicated
                                to handling workload labels/annotations
                              properties:
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the workload.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                value:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    Value to be applied to annotations/labels of workload.
                                    Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                    Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                    Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                  type: object
                              required:
                              - operator
                              - value
                              type: object
                            type: array
                          argsOverrider:
                            description: ArgsOverrider represents the rules dedicated to handling
                              container args
                            items:
                              description: CommandArgsOverrider represents the rules dedicated
                                to handling command/args overrides.
                              properties:
                                containerName:
                                  description: The name of container
                                  type: string
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the command/args.
                                  enum:
                                  - add
                                  - remove
                                  type: string
                                value:
                                  description: |-
                                    Value to be applied to command/args.
                                    Items in Value which will be appended after command/args when Operator is 'add'.
                                    Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                    If Value is empty, then the command/args will remain the same.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - containerName
                              - operator
                              type: object
                            type: array
                          commandOverrider:
                            description: CommandOverrider represents the rules dedicated to
                              handling container command
                            items:
                              description: CommandArgsOverrider represents the rules dedicated
                                to handling command/args overrides.
                              properties:
                                containerName:
                                  description: The name of container
                                  type: string
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the command/args.
                                  enum:
                                  - add
                                  - remove
                                  type: string
                                value:
                                  description: |-
                                    Value to be applied to command/args.
                                    Items in Value which will be appended after command/args when Operator is 'add'.
                                    Items in Value which match in command/args will be deleted when Operator is 'remove'.
                                    If Value is empty, then the command/args will remain the same.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - containerName
                              - operator
                              type: object
                            type: array
                          fieldOverrider:
                            description: |-
                              FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                              This allows changing a single field within the resource with multiple operations.
                              It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                              The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                            items:
                              description: |-
                                FieldOverrider represents the rules dedicated to modifying a specific field in any Kubernetes resource.
                                This allows changing a single field within the resource with multiple operations.
                                It is designed to handle structured field values such as those found in ConfigMaps or Secrets.
                                The current implementation supports JSON and YAML formats, but can easily be extended to support XML in the future.
                                Note: In any given instance, FieldOverrider processes either JSON or YAML fields, but not both simultaneously.
                              properties:
                                fieldPath:
                                  description: |-
                                    FieldPath specifies the initial location in the instance document where the operation should take place.
                                    The path uses RFC 6901 for navigating into nested structures. For example, the path "/data/db-config.yaml"
                                    specifies the configuration data key named "db-config.yaml" in a ConfigMap: "/data/db-config.yaml".
                                  type: string
                                json:
                                  description: JSON represents the operations performed on
                                    the JSON document specified by the FieldPath.
                                  items:
                                    description: JSONPatchOperation represents a single field
                                      modification operation for JSON format.
                                    properties:
                                      operator:
                                        description: |-
                                          Operator indicates the operation on target field.
                                          Available operators are: "add", "remove", and "replace".
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      subPath:
                                        description: |-
                                          SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                          The path uses RFC 6901 for navigating into nested structures.
                                        type: string
                                      value:
                                        description: |-
                                          Value is the new value to set for the specified field if the operation is "add" or "replace".
                                          For "remove" operation, this field is ignored.
                                        x-kubernetes-preserve-unknown-fields: true
                                    required:
                                    - operator
                                    - subPath
                                    type: object
                                  type: array
                                yaml:
                                  description: YAML represents the operations performed on
                                    the YAML document specified by the FieldPath.
                                  items:
                                    description: YAMLPatchOperation represents a single field
                                      modification operation for YAML format.
                                    properties:
                                      operator:
                                        description: |-
                                          Operator indicates the operation on target field.
                                          Available operators are: "add", "remove", and "replace".
                                        enum:
                                        - add
                                        - remove
                                        - replace
                                        type: string
                                      subPath:
                                        description: |-
                                          SubPath specifies the relative location within the initial FieldPath where the operation should take place.
                                          The path uses RFC 6901 for navigating into nested structures.
                                        type: string
                                      value:
                                        description: |-
                                          Value is the new value to set for the specified field if the operation is "add" or "replace".
                                          For "remove" operation, this field is ignored.
                                        x-kubernetes-preserve-unknown-fields: true
                                    required:
                                    - operator
                                    - subPath
                                    type: object
                                  type: array
                              required:
                              - fieldPath
                              type: object
                            type: array
                          imageOverrider:
                            description: ImageOverrider represents the rules dedicated to
                              handling image overrides.
                            items:
                              description: ImageOverrider represents the rules dedicated to
                                handling image overrides.
                              properties:
                                component:
                                  description: |-
                                    Component is part of image name.
                                    Basically we presume an image can be made of '[registry/]repository[:tag]'.
                                    The registry could be:
                                    - registry.k8s.io
                                    - fictional.registry.example:10443
                                    The repository could be:
                                    - kube-apiserver
                                    - fictional/nginx
                                    The tag cloud be:
                                    - latest
                                    - v1.19.1
                                    - @sha256:dbcc1c35ac38df41fd2f5e4130b32ffdb93ebae8b3dbe638c23575912276fc9c
                                  enum:
                                  - Registry
                                  - Repository
                                  - Tag
                                  type: string
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the image.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                predicate:
                                  description: |-
                                    Predicate filters images before applying the rule.
        
                                    Defaults to nil, in that case, the system will automatically detect image fields if the resource type is
                                    Pod, ReplicaSet, Deployment, StatefulSet, DaemonSet or Job by following rule:
                                      - Pod: /spec/containers/<N>/image
                                      - ReplicaSet: /spec/template/spec/containers/<N>/image
                                      - Deployment: /spec/template/spec/containers/<N>/image
                                      - DaemonSet: /spec/template/spec/containers/<N>/image
                                      - StatefulSet: /spec/template/spec/containers/<N>/image
                                      - Job: /spec/template/spec/containers/<N>/image
                                    In addition, all images will be processed if the resource object has more than one container.
        
                                    If not nil, only images matches the filters will be processed.
                                  properties:
                                    path:
                                      description: Path indicates the path of target field
                                      type: string
                                  required:
                                  - path
                                  type: object
                                value:
                                  description: |-
                                    Value to be applied to image.
                                    Must not be empty when operator is 'add' or 'replace'.
                                    Defaults to empty and ignored when operator is 'remove'.
                                  type: string
                              required:
                              - component
                              - operator
                              type: object
                            type: array
                          labelsOverrider:
                            description: LabelsOverrider represents the rules dedicated to
                              handling workload labels
                            items:
                              description: LabelAnnotationOverrider represents the rules dedicated
                                to handling workload labels/annotations
                              properties:
                                operator:
                                  description: Operator represents the operator which will
                                    apply on the workload.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                value:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    Value to be applied to annotations/labels of workload.
                                    Items in Value which will be appended after annotations/labels when Operator is 'add'.
                                    Items in Value which match in annotations/labels will be deleted when Operator is 'remove'.
                                    Items in Value which match in annotations/labels will be replaced when Operator is 'replace'.
                                  type: object
                              required:
                              - operator
                              - value
                              type: object
                            type: array
                          plaintext:
                            description: Plaintext represents override rules defined with
                              plaintext overriders.
                            items:
                              description: |-
                                PlaintextOverrider is a simple overrider that overrides target fields
                                according to path, operator and value.
                              properties:
                                operator:
                                  description: |-
                                    Operator indicates the operation on target field.
                                    Available operators are: add, replace and remove.
                                  enum:
                                  - add
                                  - remove
                                  - replace
                                  type: string
                                path:
                                  description: Path indicates the path of target field
                                  type: string
                                value:
                                  description: |-
                                    Value to be applied to target field.
                                    Must be empty when operator is Remove.
                                  x-kubernetes-preserve-unknown-fields: true
                              required:
                              - operator
                              - path
                              type: object
                            type: array
                        type: object
                      resourceSelectors:
                        description: |-
                          ResourceSelectors restricts resource types that this override policy applies to.
                          nil means matching all resources.
                        items:
                          description: ResourceSelector the resources will be selected.
                          properties:
                            apiVersion:
                              description: APIVersion represents the API version of the target
                                resources.
                              type: string
                            kind:
                              description: Kind represents the Kind of the target resources.
                              type: string
                            labelSelector:
                              description: |-
                                A label query over a set of resources.
                                If name is not empty, labelSelector will be ignored.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label selector
                                    requirements. The requirements are ANDed.
                                  items:
                                    description: |-
                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                      relates the key and values.
                                    properties:
                                      key:
                                        description: key is the label key that the selector
                                          applies to.
                                        type: string
                                      operator:
                                        description: |-
                                          operator represents a key's relationship to a set of values.
                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                        type: string
                                      values:
                                        description: |-
                                          values is an array of string values. If the operator is In or NotIn,
                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                          the values array must be empty. This array is replaced during a strategic
                                          merge patch.
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            name:
                              description: |-
                                Name of the target resource.
                                Default is empty, which means selecting all resources.
                              type: string
                            namespace:
                              description: |-
                                Namespace of the target resource.
                                Default is empty, which means inherit from the parent object scope.
                              type: string
                          required:
                          - apiVersion
                          - kind
                          type: object
                        type: array
                      targetCluster:
                        description: |-
                          TargetCluster defines restrictions on this override policy
                          that only applies to resources propagated to the matching clusters.
                          nil means matching all clusters.
        
                          Deprecated: This filed is deprecated in v1.0 and please use the OverrideRules instead.
                        properties:
                          clusterNames:
                            description: ClusterNames is the list of clusters to be selected.
                            items:
                              type: string
                            type: array
                          exclude:
                            description: ExcludedClusters is the list of clusters to be ignored.
                            items:
                              type: string
                            type: array
                          fieldSelector:
                            description: |-
                              FieldSelector is a filter to select member clusters by fields.
                              The key(field) of the match expression should be 'provider', 'region', or 'zone',
                              and the operator of the match expression should be 'In' or 'NotIn'.
                              If non-nil and non-empty, only the clusters match this filter will be selected.
                            properties:
                              matchExpressions:
                                description: A list of field selector requirements.
                                items:
                                  description: |-
                                    A node selector requirement is a selector that contains values, a key, and an operator
                                    that relates the key and values.
                                  properties:
                                    key:
                                      description: The label key that the selector applies
                                        to.
                                      type: string
                                    operator:
                                      description: |-
                                        Represents a key's relationship to a set of values.
                                        Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                      type: string
                                    values:
                                      description: |-
                                        An array of string values. If the operator is In or NotIn,
                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                        the values array must be empty. If the operator is Gt or Lt, the values
                                        array must have a single element, which will be interpreted as an integer.
                                        This array is replaced during a strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                            type: object
                          labelSelector:
                            description: |-
                              LabelSelector is a filter to select member clusters by labels.
                              If non-nil and non-empty, only the clusters match this filter will be selected.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: |-
                                    A label selector requirement is a selector that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: |-
                                        operator represents a key's relationship to a set of values.
                                        Valid operators are In, NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: |-
                                        values is an array of string values. If the operator is In or NotIn,
                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                        the values array must be empty. This array is replaced during a strategic
                                        merge patch.
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: |-
                                  matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                  map is equivalent to an element of matchExpressions, whose key field is "key", the
                                  operator is "In", and the values array contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                            x-kubernetes-map-type: atomic
                        type: object
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
        
  
  
      policy.karmada.io_propagationpolicies.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: propagationpolicies.policy.karmada.io
        spec:
          group: policy.karmada.io
          names:
            categories:
            - karmada-io
            kind: PropagationPolicy
            listKind: PropagationPolicyList
            plural: propagationpolicies
            shortNames:
            - pp
            singular: propagationpolicy
          scope: Namespaced
          versions:
          - additionalPrinterColumns:
            - jsonPath: .spec.conflictResolution
              name: CONFLICT-RESOLUTION
              type: string
            - jsonPath: .spec.priority
              name: PRIORITY
              type: string
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha1
            schema:
              openAPIV3Schema:
                description: PropagationPolicy represents the policy that propagates a group
                  of resources to one or more clusters.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior of PropagationPolicy.
                    properties:
                      activationPreference:
                        description: |-
                          ActivationPreference indicates how the referencing resource template will
                          be propagated, in case of policy changes.
        
                          If empty, the resource template will respond to policy changes
                          immediately, in other words, any policy changes will drive the resource
                          template to be propagated immediately as per the current propagation rules.
        
                          If the value is 'Lazy' means the policy changes will not take effect for now
                          but defer to the resource template changes, in other words, the resource
                          template will not be propagated as per the current propagation rules until
                          there is an update on it.
                          This is an experimental feature that might help in a scenario where a policy
                          manages huge amount of resource templates, changes to a policy typically
                          affect numerous applications simultaneously. A minor misconfiguration
                          could lead to widespread failures. With this feature, the change can be
                          gradually rolled out through iterative modifications of resource templates.
                        enum:
                        - Lazy
                        type: string
                      association:
                        description: |-
                          Association tells if relevant resources should be selected automatically.
                          e.g. a ConfigMap referred by a Deployment.
                          default false.
                          Deprecated: in favor of PropagateDeps.
                        type: boolean
                      conflictResolution:
                        default: Abort
                        description: |-
                          ConflictResolution declares how potential conflict should be handled when
                          a resource that is being propagated already exists in the target cluster.
        
                          It defaults to "Abort" which means stop propagating to avoid unexpected
                          overwrites. The "Overwrite" might be useful when migrating legacy cluster
                          resources to Karmada, in which case conflict is predictable and can be
                          instructed to Karmada take over the resource by overwriting.
                        enum:
                        - Abort
                        - Overwrite
                        type: string
                      dependentOverrides:
                        description: |-
                          DependentOverrides represents the list of overrides(OverridePolicy)
                          which must present before the current PropagationPolicy takes effect.
        
                          It used to explicitly specify overrides which current PropagationPolicy rely on.
                          A typical scenario is the users create OverridePolicy(ies) and resources at the same time,
                          they want to ensure the new-created policies would be adopted.
        
                          Note: For the overrides, OverridePolicy(ies) in current namespace and ClusterOverridePolicy(ies),
                          which not present in this list will still be applied if they matches the resources.
                        items:
                          type: string
                        type: array
                      failover:
                        description: |-
                          Failover indicates how Karmada migrates applications in case of failures.
                          If this value is nil, failover is disabled.
                        properties:
                          application:
                            description: |-
                              Application indicates failover behaviors in case of application failure.
                              If this value is nil, failover is disabled.
                              If set, the PropagateDeps should be true so that the dependencies could
                              be migrated along with the application.
                            properties:
                              decisionConditions:
                                description: |-
                                  DecisionConditions indicates the decision conditions of performing the failover process.
                                  Only when all conditions are met can the failover process be performed.
                                  Currently, DecisionConditions includes several conditions:
                                  - TolerationSeconds (optional)
                                properties:
                                  tolerationSeconds:
                                    default: 300
                                    description: |-
                                      TolerationSeconds represents the period of time Karmada should wait
                                      after reaching the desired state before performing failover process.
                                      If not specified, Karmada will immediately perform failover process.
                                      Defaults to 300s.
                                    format: int32
                                    type: integer
                                type: object
                              gracePeriodSeconds:
                                description: |-
                                  GracePeriodSeconds is the maximum waiting duration in seconds before
                                  application on the migrated cluster should be deleted.
                                  Required only when PurgeMode is "Graciously" and defaults to 600s.
                                  If the application on the new cluster cannot reach a Healthy state,
                                  Karmada will delete the application after GracePeriodSeconds is reached.
                                  Value must be positive integer.
                                format: int32
                                type: integer
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully", "Never", "Immediately"(deprecated),
                                  and "Graciously"(deprecated).
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                - Never
                                - Immediately
                                - Graciously
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            required:
                            - decisionConditions
                            type: object
                          cluster:
                            description: |-
                              Cluster indicates failover behaviors in case of cluster failure.
                              If this value is nil, the failover behavior in case of cluster failure
                              will be controlled by the controller's no-execute-taint-eviction-purge-mode
                              parameter.
                              If set, the failover behavior in case of cluster failure will be defined
                              by this value.
                            properties:
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully".
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            type: object
                        type: object
                      placement:
                        description: Placement represents the rule for select clusters to
                          propagate resources.
                        properties:
                          clusterAffinities:
                            description: |-
                              ClusterAffinities represents scheduling restrictions to multiple cluster
                              groups that indicated by ClusterAffinityTerm.
        
                              The scheduler will evaluate these groups one by one in the order they
                              appear in the spec, the group that does not satisfy scheduling restrictions
                              will be ignored which means all clusters in this group will not be selected
                              unless it also belongs to the next group(a cluster could belong to multiple
                              groups).
        
                              If none of the groups satisfy the scheduling restrictions, then scheduling
                              fails, which means no cluster will be selected.
        
                              Note:
                                1. ClusterAffinities can not co-exist with ClusterAffinity.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
        
                              Potential use case 1:
                              The private clusters in the local data center could be the main group, and
                              the managed clusters provided by cluster providers could be the secondary
                              group. So that the Karmada scheduler would prefer to schedule workloads
                              to the main group and the second group will only be considered in case of
                              the main group does not satisfy restrictions(like, lack of resources).
        
                              Potential use case 2:
                              For the disaster recovery scenario, the clusters could be organized to
                              primary and backup groups, the workloads would be scheduled to primary
                              clusters firstly, and when primary cluster fails(like data center power off),
                              Karmada scheduler could migrate workloads to the backup clusters.
                            items:
                              description: ClusterAffinityTerm selects a set of cluster.
                              properties:
                                affinityName:
                                  description: AffinityName is the name of the cluster group.
                                  maxLength: 32
                                  minLength: 1
                                  type: string
                                clusterNames:
                                  description: ClusterNames is the list of clusters to be
                                    selected.
                                  items:
                                    type: string
                                  type: array
                                exclude:
                                  description: ExcludedClusters is the list of clusters to
                                    be ignored.
                                  items:
                                    type: string
                                  type: array
                                fieldSelector:
                                  description: |-
                                    FieldSelector is a filter to select member clusters by fields.
                                    The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                    and the operator of the match expression should be 'In' or 'NotIn'.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: A list of field selector requirements.
                                      items:
                                        description: |-
                                          A node selector requirement is a selector that contains values, a key, and an operator
                                          that relates the key and values.
                                        properties:
                                          key:
                                            description: The label key that the selector applies
                                              to.
                                            type: string
                                          operator:
                                            description: |-
                                              Represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                            type: string
                                          values:
                                            description: |-
                                              An array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. If the operator is Gt or Lt, the values
                                              array must have a single element, which will be interpreted as an integer.
                                              This array is replaced during a strategic merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                  type: object
                                labelSelector:
                                  description: |-
                                    LabelSelector is a filter to select member clusters by labels.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label selector
                                        requirements. The requirements are ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that the selector
                                              applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              required:
                              - affinityName
                              type: object
                            type: array
                          clusterAffinity:
                            description: |-
                              ClusterAffinity represents scheduling restrictions to a certain set of clusters.
                              Note:
                                1. ClusterAffinity can not co-exist with ClusterAffinities.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                              exclude:
                                description: ExcludedClusters is the list of clusters to be
                                  ignored.
                                items:
                                  type: string
                                type: array
                              fieldSelector:
                                description: |-
                                  FieldSelector is a filter to select member clusters by fields.
                                  The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                  and the operator of the match expression should be 'In' or 'NotIn'.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: A list of field selector requirements.
                                    items:
                                      description: |-
                                        A node selector requirement is a selector that contains values, a key, and an operator
                                        that relates the key and values.
                                      properties:
                                        key:
                                          description: The label key that the selector applies
                                            to.
                                          type: string
                                        operator:
                                          description: |-
                                            Represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                          type: string
                                        values:
                                          description: |-
                                            An array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. If the operator is Gt or Lt, the values
                                            array must have a single element, which will be interpreted as an integer.
                                            This array is replaced during a strategic merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                type: object
                              labelSelector:
                                description: |-
                                  LabelSelector is a filter to select member clusters by labels.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: matchExpressions is a list of label selector
                                      requirements. The requirements are ANDed.
                                    items:
                                      description: |-
                                        A label selector requirement is a selector that contains values, a key, and an operator that
                                        relates the key and values.
                                      properties:
                                        key:
                                          description: key is the label key that the selector
                                            applies to.
                                          type: string
                                        operator:
                                          description: |-
                                            operator represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists and DoesNotExist.
                                          type: string
                                        values:
                                          description: |-
                                            values is an array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. This array is replaced during a strategic
                                            merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                    x-kubernetes-list-type: atomic
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    description: |-
                                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                                    type: object
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                          clusterTolerations:
                            description: ClusterTolerations represents the tolerations.
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                          replicaScheduling:
                            description: |-
                              ReplicaScheduling represents the scheduling policy on dealing with the number of replicas
                              when propagating resources that have replicas in spec (e.g. deployments, statefulsets) to member clusters.
                            properties:
                              replicaDivisionPreference:
                                description: |-
                                  ReplicaDivisionPreference determines how the replicas is divided
                                  when ReplicaSchedulingType is "Divided". Valid options are Aggregated and Weighted.
                                  "Aggregated" divides replicas into clusters as few as possible,
                                  while respecting clusters' resource availabilities during the division.
                                  "Weighted" divides replicas by weight according to WeightPreference.
                                enum:
                                - Aggregated
                                - Weighted
                                type: string
                              replicaSchedulingType:
                                default: Divided
                                description: |-
                                  ReplicaSchedulingType determines how the replicas is scheduled when karmada propagating
                                  a resource. Valid options are Duplicated and Divided.
                                  "Duplicated" duplicates the same replicas to each candidate member cluster from resource.
                                  "Divided" divides replicas into parts according to number of valid candidate member
                                  clusters, and exact replicas for each cluster are determined by ReplicaDivisionPreference.
                                enum:
                                - Duplicated
                                - Divided
                                type: string
                              weightPreference:
                                description: |-
                                  WeightPreference describes weight for each cluster or for each group of cluster
                                  If ReplicaDivisionPreference is set to "Weighted", and WeightPreference is not set, scheduler will weight all clusters the same.
                                properties:
                                  dynamicWeight:
                                    description: |-
                                      DynamicWeight specifies the factor to generates dynamic weight list.
                                      If specified, StaticWeightList will be ignored.
                                    enum:
                                    - AvailableReplicas
                                    type: string
                                  staticWeightList:
                                    description: StaticWeightList defines the static cluster
                                      weight.
                                    items:
                                      description: StaticClusterWeight defines the static
                                        cluster weight.
                                      properties:
                                        targetCluster:
                                          description: TargetCluster describes the filter
                                            to select clusters.
                                          properties:
                                            clusterNames:
                                              description: ClusterNames is the list of clusters
                                                to be selected.
                                              items:
                                                type: string
                                              type: array
                                            exclude:
                                              description: ExcludedClusters is the list of
                                                clusters to be ignored.
                                              items:
                                                type: string
                                              type: array
                                            fieldSelector:
                                              description: |-
                                                FieldSelector is a filter to select member clusters by fields.
                                                The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                                and the operator of the match expression should be 'In' or 'NotIn'.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: A list of field selector requirements.
                                                  items:
                                                    description: |-
                                                      A node selector requirement is a selector that contains values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key that the
                                                          selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          Represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          An array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. If the operator is Gt or Lt, the values
                                                          array must have a single element, which will be interpreted as an integer.
                                                          This array is replaced during a strategic merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                              type: object
                                            labelSelector:
                                              description: |-
                                                LabelSelector is a filter to select member clusters by labels.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is a list
                                                    of label selector requirements. The requirements
                                                    are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label key
                                                          that the selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                  x-kubernetes-list-type: atomic
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                          type: object
                                        weight:
                                          description: Weight expressing the preference to
                                            the cluster(s) specified by 'TargetCluster'.
                                          format: int64
                                          minimum: 1
                                          type: integer
                                      required:
                                      - targetCluster
                                      - weight
                                      type: object
                                    type: array
                                type: object
                            type: object
                          spreadConstraints:
                            description: SpreadConstraints represents a list of the scheduling
                              constraints.
                            items:
                              description: SpreadConstraint represents the spread constraints
                                on resources.
                              properties:
                                maxGroups:
                                  description: MaxGroups restricts the maximum number of cluster
                                    groups to be selected.
                                  type: integer
                                minGroups:
                                  description: |-
                                    MinGroups restricts the minimum number of cluster groups to be selected.
                                    Defaults to 1.
                                  type: integer
                                spreadByField:
                                  description: |-
                                    SpreadByField represents the fields on Karmada cluster API used for
                                    dynamically grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    Available fields for spreading are: cluster, region, zone, and provider.
                                    SpreadByField should not co-exist with SpreadByLabel.
                                    If both SpreadByField and SpreadByLabel are empty, SpreadByField will be set to "cluster" by system.
                                  enum:
                                  - cluster
                                  - region
                                  - zone
                                  - provider
                                  type: string
                                spreadByLabel:
                                  description: |-
                                    SpreadByLabel represents the label key used for
                                    grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    SpreadByLabel should not co-exist with SpreadByField.
                                  type: string
                              type: object
                            type: array
                        type: object
                      preemption:
                        default: Never
                        description: |-
                          Preemption declares the behaviors for preempting.
                          Valid options are "Always" and "Never".
                        enum:
                        - Always
                        - Never
                        type: string
                      preserveResourcesOnDeletion:
                        description: |-
                          PreserveResourcesOnDeletion controls whether resources should be preserved on the
                          member clusters when the resource template is deleted.
                          If set to true, resources will be preserved on the member clusters.
                          Default is false, which means resources will be deleted along with the resource template.
        
                          This setting is particularly useful during workload migration scenarios to ensure
                          that rollback can occur quickly without affecting the workloads running on the
                          member clusters.
        
                          Additionally, this setting applies uniformly across all member clusters and will not
                          selectively control preservation on only some clusters.
        
                          Note: This setting does not apply to the deletion of the policy itself.
                          When the policy is deleted, the resource templates and their corresponding
                          propagated resources in member clusters will remain unchanged unless explicitly deleted.
                        type: boolean
                      priority:
                        default: 0
                        description: |-
                          Priority indicates the importance of a policy(PropagationPolicy or ClusterPropagationPolicy).
                          A policy will be applied for the matched resource templates if there is
                          no other policies with higher priority at the point of the resource
                          template be processed.
                          Once a resource template has been claimed by a policy, by default it will
                          not be preempted by following policies even with a higher priority.
                          See Preemption for more details.
        
                          In case of two policies have the same priority, the one with a more precise
                          matching rules in ResourceSelectors wins:
                          - matching by name(resourceSelector.name) has higher priority than
                            by selector(resourceSelector.labelSelector)
                          - matching by selector(resourceSelector.labelSelector) has higher priority
                            than by APIVersion(resourceSelector.apiVersion) and Kind(resourceSelector.kind).
                          If there is still no winner at this point, the one with the lower alphabetic
                          order wins, e.g. policy 'bar' has higher priority than 'foo'.
        
                          The higher the value, the higher the priority. Defaults to zero.
                        format: int32
                        type: integer
                      propagateDeps:
                        description: |-
                          PropagateDeps tells if relevant resources should be propagated automatically.
                          Take 'Deployment' which referencing 'ConfigMap' and 'Secret' as an example, when 'propagateDeps' is 'true',
                          the referencing resources could be omitted(for saving config effort) from 'resourceSelectors' as they will be
                          propagated along with the Deployment. In addition to the propagating process, the referencing resources will be
                          migrated along with the Deployment in the fail-over scenario.
        
                          Defaults to false.
                        type: boolean
                      resourceSelectors:
                        description: |-
                          ResourceSelectors used to select resources.
                          Nil or empty selector is not allowed and doesn't mean match all kinds
                          of resources for security concerns that sensitive resources(like Secret)
                          might be accidentally propagated.
                        items:
                          description: ResourceSelector the resources will be selected.
                          properties:
                            apiVersion:
                              description: APIVersion represents the API version of the target
                                resources.
                              type: string
                            kind:
                              description: Kind represents the Kind of the target resources.
                              type: string
                            labelSelector:
                              description: |-
                                A label query over a set of resources.
                                If name is not empty, labelSelector will be ignored.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label selector
                                    requirements. The requirements are ANDed.
                                  items:
                                    description: |-
                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                      relates the key and values.
                                    properties:
                                      key:
                                        description: key is the label key that the selector
                                          applies to.
                                        type: string
                                      operator:
                                        description: |-
                                          operator represents a key's relationship to a set of values.
                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                        type: string
                                      values:
                                        description: |-
                                          values is an array of string values. If the operator is In or NotIn,
                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                          the values array must be empty. This array is replaced during a strategic
                                          merge patch.
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            name:
                              description: |-
                                Name of the target resource.
                                Default is empty, which means selecting all resources.
                              type: string
                            namespace:
                              description: |-
                                Namespace of the target resource.
                                Default is empty, which means inherit from the parent object scope.
                              type: string
                          required:
                          - apiVersion
                          - kind
                          type: object
                        minItems: 1
                        type: array
                      schedulePriority:
                        description: |-
                          SchedulePriority defines how Karmada should resolve the priority and preemption policy
                          for workload scheduling.
        
                          This setting is useful for controlling the scheduling behavior of offline workloads.
                          By setting a higher or lower priority, users can control which workloads are scheduled first.
                          Additionally, it allows specifying a preemption policy where higher-priority workloads can
                          preempt lower-priority ones in scenarios of resource contention.
        
                          Note: This feature is currently in the alpha stage. The priority-based scheduling functionality is
                          controlled by the PriorityBasedScheduling feature gate, and preemption is controlled by the
                          PriorityBasedPreemptiveScheduling feature gate. Currently, only priority-based scheduling is
                          supported. Preemption functionality is not yet available and will be introduced in future
                          releases as the feature matures.
                        properties:
                          priorityClassName:
                            description: |-
                              PriorityClassName specifies which PriorityClass to use. Its behavior depends on PriorityClassSource:
        
                              Behavior of PriorityClassName:
        
                              For KubePriorityClass:
                              - When specified: Uses the named Kubernetes PriorityClass.
        
                              For PodPriorityClass:
                              - Uses PriorityClassName from the PodTemplate.
                              - Not yet implemented.
        
                              For FederatedPriorityClass:
                              - Not yet implemented.
                            type: string
                          priorityClassSource:
                            description: |-
                              PriorityClassSource specifies where Karmada should look for the PriorityClass definition.
                              Available options:
                              - KubePriorityClass: Uses Kubernetes PriorityClass (scheduling.k8s.io/v1)
                              - PodPriorityClass: Uses PriorityClassName from PodTemplate: PodSpec.PriorityClassName (not yet implemented)
                              - FederatedPriorityClass: Uses Karmada FederatedPriorityClass (not yet implemented)
                            enum:
                            - KubePriorityClass
                            type: string
                        required:
                        - priorityClassName
                        - priorityClassSource
                        type: object
                      schedulerName:
                        default: default-scheduler
                        description: |-
                          SchedulerName represents which scheduler to proceed the scheduling.
                          If specified, the policy will be dispatched by specified scheduler.
                          If not specified, the policy will be dispatched by default scheduler.
                        type: string
                      suspension:
                        description: |-
                          Suspension declares the policy for suspending different aspects of propagation.
                          nil means no suspension. no default values.
                        properties:
                          dispatching:
                            description: |-
                              Dispatching controls whether dispatching should be suspended.
                              nil means not suspend, no default value, only accepts 'true'.
                              Note: true means stop propagating to all clusters. Can not co-exist
                              with DispatchingOnClusters which is used to suspend particular clusters.
                            type: boolean
                          dispatchingOnClusters:
                            description: |-
                              DispatchingOnClusters declares a list of clusters to which the dispatching
                              should be suspended.
                              Note: Can not co-exist with Dispatching which is used to suspend all.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                            type: object
                        type: object
                    required:
                    - resourceSelectors
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources: {}
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-remedy-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      remedy.karmada.io_remedies.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: remedies.remedy.karmada.io
        spec:
          group: remedy.karmada.io
          names:
            categories:
            - karmada-io
            kind: Remedy
            listKind: RemedyList
            plural: remedies
            singular: remedy
          scope: Cluster
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: Remedy represents the cluster-level management strategies based
                  on cluster conditions.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior of Remedy.
                    properties:
                      actions:
                        description: |-
                          Actions specifies the actions that remedy system needs to perform.
                          If empty, no action will be performed.
                        items:
                          description: RemedyAction represents the action type the remedy
                            system needs to preform.
                          type: string
                        type: array
                      clusterAffinity:
                        description: |-
                          ClusterAffinity specifies the clusters that Remedy needs to pay attention to.
                          For clusters that meet the DecisionConditions, Actions will be preformed.
                          If empty, all clusters will be selected.
                        properties:
                          clusterNames:
                            description: ClusterNames is the list of clusters to be selected.
                            items:
                              type: string
                            type: array
                        type: object
                      decisionMatches:
                        description: |-
                          DecisionMatches indicates the decision matches of triggering the remedy
                          system to perform the actions. As long as any one DecisionMatch matches,
                          the Actions will be preformed.
                          If empty, the Actions will be performed immediately.
                        items:
                          description: DecisionMatch represents the decision match detail
                            of activating the remedy system.
                          properties:
                            clusterConditionMatch:
                              description: ClusterConditionMatch describes the cluster condition
                                requirement.
                              properties:
                                conditionStatus:
                                  description: ConditionStatus specifies the ClusterStatue
                                    condition status.
                                  type: string
                                conditionType:
                                  description: ConditionType specifies the ClusterStatus condition
                                    type.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a conditionType's relationship to a conditionStatus.
                                    Valid operators are Equal, NotEqual.
                                  enum:
                                  - Equal
                                  - NotEqual
                                  type: string
                              required:
                              - conditionStatus
                              - conditionType
                              - operator
                              type: object
                          type: object
                        type: array
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-work-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      work.karmada.io_clusterresourcebindings.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: clusterresourcebindings.work.karmada.io
        spec:
          group: work.karmada.io
          names:
            categories:
            - karmada-io
            kind: ClusterResourceBinding
            listKind: ClusterResourceBindingList
            plural: clusterresourcebindings
            shortNames:
            - crb
            singular: clusterresourcebinding
          scope: Cluster
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: ClusterResourceBinding represents a binding of a kubernetes resource
                  with a ClusterPropagationPolicy.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior.
                    properties:
                      clusters:
                        description: Clusters represents target member clusters where the
                          resource to be deployed.
                        items:
                          description: TargetCluster represents the identifier of a member
                            cluster.
                          properties:
                            name:
                              description: Name of target cluster.
                              type: string
                            replicas:
                              description: Replicas in target cluster
                              format: int32
                              type: integer
                          required:
                          - name
                          type: object
                        type: array
                      resource:
                        description: Resource represents the Kubernetes resource to be propagated.
                        properties:
                          apiVersion:
                            description: APIVersion represents the API version of the referent.
                            type: string
                          kind:
                            description: Kind represents the Kind of the referent.
                            type: string
                          name:
                            description: Name represents the name of the referent.
                            type: string
                          namespace:
                            description: |-
                              Namespace represents the namespace for the referent.
                              For non-namespace scoped resources(e.g. 'ClusterRole')ï¼Œdo not need specify Namespace,
                              and for namespace scoped resources, Namespace is required.
                              If Namespace is not specified, means the resource is non-namespace scoped.
                            type: string
                          replicas:
                            description: Replicas represents the replica number of the referencing
                              resource.
                            format: int32
                            type: integer
                          resourcePerReplicas:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: ReplicaResourceRequirements represents the resources
                              required by each replica.
                            type: object
                          resourceVersion:
                            description: |-
                              ResourceVersion represents the internal version of the referenced object, that can be used by clients to
                              determine when object has changed.
                            type: string
                        required:
                        - apiVersion
                        - kind
                        - name
                        type: object
                    required:
                    - resource
                    type: object
                  status:
                    description: Status represents the most recently observed status of the
                      ResourceBinding.
                    properties:
                      aggregatedStatus:
                        description: AggregatedStatus represents status list of the resource
                          running in each member cluster.
                        items:
                          description: AggregatedStatusItem represents status of the resource
                            running in a member cluster.
                          properties:
                            applied:
                              description: |-
                                Applied represents if the resource referencing by ResourceBinding or ClusterResourceBinding
                                is successfully applied on the cluster.
                              type: boolean
                            appliedMessage:
                              description: |-
                                AppliedMessage is a human readable message indicating details about the applied status.
                                This is usually holds the error message in case of apply failed.
                              type: string
                            clusterName:
                              description: ClusterName represents the member cluster name
                                which the resource deployed on.
                              type: string
                            status:
                              description: Status reflects running status of current manifest.
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - clusterName
                          type: object
                        type: array
                      conditions:
                        description: Conditions contain the different condition statuses.
                        items:
                          description: Condition contains details for one aspect of the current
                            state of this API Resource.
                          properties:
                            lastTransitionTime:
                              description: |-
                                lastTransitionTime is the last time the condition transitioned from one status to another.
                                This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                              format: date-time
                              type: string
                            message:
                              description: |-
                                message is a human readable message indicating details about the transition.
                                This may be an empty string.
                              maxLength: 32768
                              type: string
                            observedGeneration:
                              description: |-
                                observedGeneration represents the .metadata.generation that the condition was set based upon.
                                For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                with respect to the current state of the instance.
                              format: int64
                              minimum: 0
                              type: integer
                            reason:
                              description: |-
                                reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                Producers of specific condition types may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            status:
                              description: status of the condition, one of True, False, Unknown.
                              enum:
                              - "True"
                              - "False"
                              - Unknown
                              type: string
                            type:
                              description: type of condition in CamelCase or in foo.example.com/CamelCase.
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                              type: string
                          required:
                          - lastTransitionTime
                          - message
                          - reason
                          - status
                          - type
                          type: object
                        type: array
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: false
            subresources:
              status: {}
          - additionalPrinterColumns:
            - jsonPath: .status.conditions[?(@.type=="Scheduled")].status
              name: SCHEDULED
              type: string
            - jsonPath: .status.conditions[?(@.type=="FullyApplied")].status
              name: FULLYAPPLIED
              type: string
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha2
            schema:
              openAPIV3Schema:
                description: ClusterResourceBinding represents a binding of a kubernetes resource
                  with a ClusterPropagationPolicy.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior.
                    properties:
                      clusters:
                        description: Clusters represents target member clusters where the
                          resource to be deployed.
                        items:
                          description: TargetCluster represents the identifier of a member
                            cluster.
                          properties:
                            name:
                              description: Name of target cluster.
                              type: string
                            replicas:
                              description: Replicas in target cluster
                              format: int32
                              type: integer
                          required:
                          - name
                          type: object
                        type: array
                      components:
                        description: |-
                          Components represents the requirements of multiple pod templates of the referencing resource.
                          It is designed to support workloads that consist of multiple pod templates,
                          such as distributed training jobs (e.g., PyTorch, TensorFlow) and big data workloads (e.g., FlinkDeployment),
                          where each workload is composed of more than one pod template. It is also capable of representing
                          single-component workloads, such as Deployment.
        
                          Note: This field is intended to replace the legacy ReplicaRequirements and Replicas fields above.
                          It is only populated when the MultiplePodTemplatesScheduling feature gate is enabled.
                        items:
                          description: Component represents the requirements for a specific
                            component.
                          properties:
                            name:
                              description: |-
                                Name of this component.
                                It is required when the resource contains multiple components to ensure proper identification,
                                and must also be unique within the same resource.
                              maxLength: 32
                              type: string
                            replicaRequirements:
                              description: ReplicaRequirements represents the resource and
                                scheduling requirements for each replica.
                              properties:
                                nodeClaim:
                                  description: NodeClaim represents the node claim HardNodeAffinity,
                                    NodeSelector and Tolerations required by each replica.
                                  properties:
                                    hardNodeAffinity:
                                      description: |-
                                        A node selector represents the union of the results of one or more label queries over a set of
                                        nodes; that is, it represents the OR of the selectors represented by the node selector terms.
                                        Note that only PodSpec.Affinity.NodeAffinity.RequiredDuringSchedulingIgnoredDuringExecution
                                        is included here because it has a hard limit on pod scheduling.
                                      properties:
                                        nodeSelectorTerms:
                                          description: Required. A list of node selector terms.
                                            The terms are ORed.
                                          items:
                                            description: |-
                                              A null or empty node selector term matches no objects. The requirements of
                                              them are ANDed.
                                              The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                            properties:
                                              matchExpressions:
                                                description: A list of node selector requirements
                                                  by node's labels.
                                                items:
                                                  description: |-
                                                    A node selector requirement is a selector that contains values, a key, and an operator
                                                    that relates the key and values.
                                                  properties:
                                                    key:
                                                      description: The label key that the
                                                        selector applies to.
                                                      type: string
                                                    operator:
                                                      description: |-
                                                        Represents a key's relationship to a set of values.
                                                        Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                      type: string
                                                    values:
                                                      description: |-
                                                        An array of string values. If the operator is In or NotIn,
                                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                        the values array must be empty. If the operator is Gt or Lt, the values
                                                        array must have a single element, which will be interpreted as an integer.
                                                        This array is replaced during a strategic merge patch.
                                                      items:
                                                        type: string
                                                      type: array
                                                      x-kubernetes-list-type: atomic
                                                  required:
                                                  - key
                                                  - operator
                                                  type: object
                                                type: array
                                                x-kubernetes-list-type: atomic
                                              matchFields:
                                                description: A list of node selector requirements
                                                  by node's fields.
                                                items:
                                                  description: |-
                                                    A node selector requirement is a selector that contains values, a key, and an operator
                                                    that relates the key and values.
                                                  properties:
                                                    key:
                                                      description: The label key that the
                                                        selector applies to.
                                                      type: string
                                                    operator:
                                                      description: |-
                                                        Represents a key's relationship to a set of values.
                                                        Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                      type: string
                                                    values:
                                                      description: |-
                                                        An array of string values. If the operator is In or NotIn,
                                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                        the values array must be empty. If the operator is Gt or Lt, the values
                                                        array must have a single element, which will be interpreted as an integer.
                                                        This array is replaced during a strategic merge patch.
                                                      items:
                                                        type: string
                                                      type: array
                                                      x-kubernetes-list-type: atomic
                                                  required:
                                                  - key
                                                  - operator
                                                  type: object
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - nodeSelectorTerms
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    nodeSelector:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        NodeSelector is a selector which must be true for the pod to fit on a node.
                                        Selector which must match a node's labels for the pod to be scheduled on that node.
                                      type: object
                                    tolerations:
                                      description: If specified, the pod's tolerations.
                                      items:
                                        description: |-
                                          The pod this Toleration is attached to tolerates any taint that matches
                                          the triple <key,value,effect> using the matching operator <operator>.
                                        properties:
                                          effect:
                                            description: |-
                                              Effect indicates the taint effect to match. Empty means match all taint effects.
                                              When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                            type: string
                                          key:
                                            description: |-
                                              Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                              If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                            type: string
                                          operator:
                                            description: |-
                                              Operator represents a key's relationship to the value.
                                              Valid operators are Exists and Equal. Defaults to Equal.
                                              Exists is equivalent to wildcard for value, so that a pod can
                                              tolerate all taints of a particular category.
                                            type: string
                                          tolerationSeconds:
                                            description: |-
                                              TolerationSeconds represents the period of time the toleration (which must be
                                              of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                              it is not set, which means tolerate the taint forever (do not evict). Zero and
                                              negative values will be treated as 0 (evict immediately) by the system.
                                            format: int64
                                            type: integer
                                          value:
                                            description: |-
                                              Value is the taint value the toleration matches to.
                                              If the operator is Exists, the value should be empty, otherwise just a regular string.
                                            type: string
                                        type: object
                                      type: array
                                  type: object
                                priorityClassName:
                                  description: PriorityClassName represents the resources
                                    priorityClassName
                                  type: string
                                resourceRequest:
                                  additionalProperties:
                                    anyOf:
                                    - type: integer
                                    - type: string
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  description: ResourceRequest represents the resources required
                                    by each replica.
                                  type: object
                              type: object
                            replicas:
                              description: Replicas represents the replica number of the resource's
                                component.
                              format: int32
                              type: integer
                          required:
                          - name
                          - replicas
                          type: object
                        type: array
                      conflictResolution:
                        default: Abort
                        description: |-
                          ConflictResolution declares how potential conflict should be handled when
                          a resource that is being propagated already exists in the target cluster.
        
                          It defaults to "Abort" which means stop propagating to avoid unexpected
                          overwrites. The "Overwrite" might be useful when migrating legacy cluster
                          resources to Karmada, in which case conflict is predictable and can be
                          instructed to Karmada take over the resource by overwriting.
                        enum:
                        - Abort
                        - Overwrite
                        type: string
                      failover:
                        description: |-
                          Failover indicates how Karmada migrates applications in case of failures.
                          It inherits directly from the associated PropagationPolicy(or ClusterPropagationPolicy).
                        properties:
                          application:
                            description: |-
                              Application indicates failover behaviors in case of application failure.
                              If this value is nil, failover is disabled.
                              If set, the PropagateDeps should be true so that the dependencies could
                              be migrated along with the application.
                            properties:
                              decisionConditions:
                                description: |-
                                  DecisionConditions indicates the decision conditions of performing the failover process.
                                  Only when all conditions are met can the failover process be performed.
                                  Currently, DecisionConditions includes several conditions:
                                  - TolerationSeconds (optional)
                                properties:
                                  tolerationSeconds:
                                    default: 300
                                    description: |-
                                      TolerationSeconds represents the period of time Karmada should wait
                                      after reaching the desired state before performing failover process.
                                      If not specified, Karmada will immediately perform failover process.
                                      Defaults to 300s.
                                    format: int32
                                    type: integer
                                type: object
                              gracePeriodSeconds:
                                description: |-
                                  GracePeriodSeconds is the maximum waiting duration in seconds before
                                  application on the migrated cluster should be deleted.
                                  Required only when PurgeMode is "Graciously" and defaults to 600s.
                                  If the application on the new cluster cannot reach a Healthy state,
                                  Karmada will delete the application after GracePeriodSeconds is reached.
                                  Value must be positive integer.
                                format: int32
                                type: integer
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully", "Never", "Immediately"(deprecated),
                                  and "Graciously"(deprecated).
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                - Never
                                - Immediately
                                - Graciously
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            required:
                            - decisionConditions
                            type: object
                          cluster:
                            description: |-
                              Cluster indicates failover behaviors in case of cluster failure.
                              If this value is nil, the failover behavior in case of cluster failure
                              will be controlled by the controller's no-execute-taint-eviction-purge-mode
                              parameter.
                              If set, the failover behavior in case of cluster failure will be defined
                              by this value.
                            properties:
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully".
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            type: object
                        type: object
                      gracefulEvictionTasks:
                        description: |-
                          GracefulEvictionTasks holds the eviction tasks that are expected to perform
                          the eviction in a graceful way.
                          The intended workflow is:
                          1. Once the controller(such as 'taint-manager') decided to evict the resource that
                             is referenced by current ResourceBinding or ClusterResourceBinding from a target
                             cluster, it removes(or scale down the replicas) the target from Clusters(.spec.Clusters)
                             and builds a graceful eviction task.
                          2. The scheduler may perform a re-scheduler and probably select a substitute cluster
                             to take over the evicting workload(resource).
                          3. The graceful eviction controller takes care of the graceful eviction tasks and
                             performs the final removal after the workload(resource) is available on the substitute
                             cluster or exceed the grace termination period(defaults to 10 minutes).
                        items:
                          description: GracefulEvictionTask represents a graceful eviction
                            task.
                          properties:
                            clustersBeforeFailover:
                              description: ClustersBeforeFailover records the clusters where
                                running the application before failover.
                              items:
                                type: string
                              type: array
                            creationTimestamp:
                              description: |-
                                CreationTimestamp is a timestamp representing the server time when this object was
                                created.
                                Clients should not set this value to avoid the time inconsistency issue.
                                It is represented in RFC3339 form(like '2021-04-25T10:02:10Z') and is in UTC.
        
                                Populated by the system. Read-only.
                              format: date-time
                              type: string
                            fromCluster:
                              description: FromCluster which cluster the eviction perform
                                from.
                              type: string
                            gracePeriodSeconds:
                              description: |-
                                GracePeriodSeconds is the maximum waiting duration in seconds before the item
                                should be deleted. If the application on the new cluster cannot reach a Healthy state,
                                Karmada will delete the item after GracePeriodSeconds is reached.
                                Value must be positive integer.
                                It can not co-exist with SuppressDeletion.
                              format: int32
                              type: integer
                            message:
                              description: |-
                                Message is a human-readable message indicating details about the eviction.
                                This may be an empty string.
                              maxLength: 1024
                              type: string
                            preservedLabelState:
                              additionalProperties:
                                type: string
                              description: |-
                                PreservedLabelState represents the application state information collected from the original cluster,
                                and it will be injected into the new cluster in form of application labels.
                              type: object
                            producer:
                              description: Producer indicates the controller who triggered
                                the eviction.
                              type: string
                            purgeMode:
                              description: |-
                                PurgeMode represents how to deal with the legacy applications on the
                                cluster from which the application is migrated.
                                Valid options are "Immediately", "Directly", "Graciously", "Gracefully" and "Never".
                              enum:
                              - Immediately
                              - Directly
                              - Graciously
                              - Gracefully
                              - Never
                              type: string
                            reason:
                              description: |-
                                Reason contains a programmatic identifier indicating the reason for the eviction.
                                Producers may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 32
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            replicas:
                              description: |-
                                Replicas indicates the number of replicas should be evicted.
                                Should be ignored for resource type that doesn't have replica.
                              format: int32
                              type: integer
                            suppressDeletion:
                              description: |-
                                SuppressDeletion represents the grace period will be persistent until
                                the tools or human intervention stops it.
                                It can not co-exist with GracePeriodSeconds.
                              type: boolean
                          required:
                          - fromCluster
                          - producer
                          - reason
                          type: object
                        type: array
                      placement:
                        description: Placement represents the rule for select clusters to
                          propagate resources.
                        properties:
                          clusterAffinities:
                            description: |-
                              ClusterAffinities represents scheduling restrictions to multiple cluster
                              groups that indicated by ClusterAffinityTerm.
        
                              The scheduler will evaluate these groups one by one in the order they
                              appear in the spec, the group that does not satisfy scheduling restrictions
                              will be ignored which means all clusters in this group will not be selected
                              unless it also belongs to the next group(a cluster could belong to multiple
                              groups).
        
                              If none of the groups satisfy the scheduling restrictions, then scheduling
                              fails, which means no cluster will be selected.
        
                              Note:
                                1. ClusterAffinities can not co-exist with ClusterAffinity.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
        
                              Potential use case 1:
                              The private clusters in the local data center could be the main group, and
                              the managed clusters provided by cluster providers could be the secondary
                              group. So that the Karmada scheduler would prefer to schedule workloads
                              to the main group and the second group will only be considered in case of
                              the main group does not satisfy restrictions(like, lack of resources).
        
                              Potential use case 2:
                              For the disaster recovery scenario, the clusters could be organized to
                              primary and backup groups, the workloads would be scheduled to primary
                              clusters firstly, and when primary cluster fails(like data center power off),
                              Karmada scheduler could migrate workloads to the backup clusters.
                            items:
                              description: ClusterAffinityTerm selects a set of cluster.
                              properties:
                                affinityName:
                                  description: AffinityName is the name of the cluster group.
                                  maxLength: 32
                                  minLength: 1
                                  type: string
                                clusterNames:
                                  description: ClusterNames is the list of clusters to be
                                    selected.
                                  items:
                                    type: string
                                  type: array
                                exclude:
                                  description: ExcludedClusters is the list of clusters to
                                    be ignored.
                                  items:
                                    type: string
                                  type: array
                                fieldSelector:
                                  description: |-
                                    FieldSelector is a filter to select member clusters by fields.
                                    The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                    and the operator of the match expression should be 'In' or 'NotIn'.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: A list of field selector requirements.
                                      items:
                                        description: |-
                                          A node selector requirement is a selector that contains values, a key, and an operator
                                          that relates the key and values.
                                        properties:
                                          key:
                                            description: The label key that the selector applies
                                              to.
                                            type: string
                                          operator:
                                            description: |-
                                              Represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                            type: string
                                          values:
                                            description: |-
                                              An array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. If the operator is Gt or Lt, the values
                                              array must have a single element, which will be interpreted as an integer.
                                              This array is replaced during a strategic merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                  type: object
                                labelSelector:
                                  description: |-
                                    LabelSelector is a filter to select member clusters by labels.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label selector
                                        requirements. The requirements are ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that the selector
                                              applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              required:
                              - affinityName
                              type: object
                            type: array
                          clusterAffinity:
                            description: |-
                              ClusterAffinity represents scheduling restrictions to a certain set of clusters.
                              Note:
                                1. ClusterAffinity can not co-exist with ClusterAffinities.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                              exclude:
                                description: ExcludedClusters is the list of clusters to be
                                  ignored.
                                items:
                                  type: string
                                type: array
                              fieldSelector:
                                description: |-
                                  FieldSelector is a filter to select member clusters by fields.
                                  The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                  and the operator of the match expression should be 'In' or 'NotIn'.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: A list of field selector requirements.
                                    items:
                                      description: |-
                                        A node selector requirement is a selector that contains values, a key, and an operator
                                        that relates the key and values.
                                      properties:
                                        key:
                                          description: The label key that the selector applies
                                            to.
                                          type: string
                                        operator:
                                          description: |-
                                            Represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                          type: string
                                        values:
                                          description: |-
                                            An array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. If the operator is Gt or Lt, the values
                                            array must have a single element, which will be interpreted as an integer.
                                            This array is replaced during a strategic merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                type: object
                              labelSelector:
                                description: |-
                                  LabelSelector is a filter to select member clusters by labels.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: matchExpressions is a list of label selector
                                      requirements. The requirements are ANDed.
                                    items:
                                      description: |-
                                        A label selector requirement is a selector that contains values, a key, and an operator that
                                        relates the key and values.
                                      properties:
                                        key:
                                          description: key is the label key that the selector
                                            applies to.
                                          type: string
                                        operator:
                                          description: |-
                                            operator represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists and DoesNotExist.
                                          type: string
                                        values:
                                          description: |-
                                            values is an array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. This array is replaced during a strategic
                                            merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                    x-kubernetes-list-type: atomic
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    description: |-
                                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                                    type: object
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                          clusterTolerations:
                            description: ClusterTolerations represents the tolerations.
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                          replicaScheduling:
                            description: |-
                              ReplicaScheduling represents the scheduling policy on dealing with the number of replicas
                              when propagating resources that have replicas in spec (e.g. deployments, statefulsets) to member clusters.
                            properties:
                              replicaDivisionPreference:
                                description: |-
                                  ReplicaDivisionPreference determines how the replicas is divided
                                  when ReplicaSchedulingType is "Divided". Valid options are Aggregated and Weighted.
                                  "Aggregated" divides replicas into clusters as few as possible,
                                  while respecting clusters' resource availabilities during the division.
                                  "Weighted" divides replicas by weight according to WeightPreference.
                                enum:
                                - Aggregated
                                - Weighted
                                type: string
                              replicaSchedulingType:
                                default: Divided
                                description: |-
                                  ReplicaSchedulingType determines how the replicas is scheduled when karmada propagating
                                  a resource. Valid options are Duplicated and Divided.
                                  "Duplicated" duplicates the same replicas to each candidate member cluster from resource.
                                  "Divided" divides replicas into parts according to number of valid candidate member
                                  clusters, and exact replicas for each cluster are determined by ReplicaDivisionPreference.
                                enum:
                                - Duplicated
                                - Divided
                                type: string
                              weightPreference:
                                description: |-
                                  WeightPreference describes weight for each cluster or for each group of cluster
                                  If ReplicaDivisionPreference is set to "Weighted", and WeightPreference is not set, scheduler will weight all clusters the same.
                                properties:
                                  dynamicWeight:
                                    description: |-
                                      DynamicWeight specifies the factor to generates dynamic weight list.
                                      If specified, StaticWeightList will be ignored.
                                    enum:
                                    - AvailableReplicas
                                    type: string
                                  staticWeightList:
                                    description: StaticWeightList defines the static cluster
                                      weight.
                                    items:
                                      description: StaticClusterWeight defines the static
                                        cluster weight.
                                      properties:
                                        targetCluster:
                                          description: TargetCluster describes the filter
                                            to select clusters.
                                          properties:
                                            clusterNames:
                                              description: ClusterNames is the list of clusters
                                                to be selected.
                                              items:
                                                type: string
                                              type: array
                                            exclude:
                                              description: ExcludedClusters is the list of
                                                clusters to be ignored.
                                              items:
                                                type: string
                                              type: array
                                            fieldSelector:
                                              description: |-
                                                FieldSelector is a filter to select member clusters by fields.
                                                The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                                and the operator of the match expression should be 'In' or 'NotIn'.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: A list of field selector requirements.
                                                  items:
                                                    description: |-
                                                      A node selector requirement is a selector that contains values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key that the
                                                          selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          Represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          An array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. If the operator is Gt or Lt, the values
                                                          array must have a single element, which will be interpreted as an integer.
                                                          This array is replaced during a strategic merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                              type: object
                                            labelSelector:
                                              description: |-
                                                LabelSelector is a filter to select member clusters by labels.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is a list
                                                    of label selector requirements. The requirements
                                                    are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label key
                                                          that the selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                  x-kubernetes-list-type: atomic
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                          type: object
                                        weight:
                                          description: Weight expressing the preference to
                                            the cluster(s) specified by 'TargetCluster'.
                                          format: int64
                                          minimum: 1
                                          type: integer
                                      required:
                                      - targetCluster
                                      - weight
                                      type: object
                                    type: array
                                type: object
                            type: object
                          spreadConstraints:
                            description: SpreadConstraints represents a list of the scheduling
                              constraints.
                            items:
                              description: SpreadConstraint represents the spread constraints
                                on resources.
                              properties:
                                maxGroups:
                                  description: MaxGroups restricts the maximum number of cluster
                                    groups to be selected.
                                  type: integer
                                minGroups:
                                  description: |-
                                    MinGroups restricts the minimum number of cluster groups to be selected.
                                    Defaults to 1.
                                  type: integer
                                spreadByField:
                                  description: |-
                                    SpreadByField represents the fields on Karmada cluster API used for
                                    dynamically grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    Available fields for spreading are: cluster, region, zone, and provider.
                                    SpreadByField should not co-exist with SpreadByLabel.
                                    If both SpreadByField and SpreadByLabel are empty, SpreadByField will be set to "cluster" by system.
                                  enum:
                                  - cluster
                                  - region
                                  - zone
                                  - provider
                                  type: string
                                spreadByLabel:
                                  description: |-
                                    SpreadByLabel represents the label key used for
                                    grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    SpreadByLabel should not co-exist with SpreadByField.
                                  type: string
                              type: object
                            type: array
                        type: object
                      preserveResourcesOnDeletion:
                        description: |-
                          PreserveResourcesOnDeletion controls whether resources should be preserved on the
                          member clusters when the binding object is deleted.
                          If set to true, resources will be preserved on the member clusters.
                          Default is false, which means resources will be deleted along with the binding object.
                          This setting applies to all Work objects created under this binding object.
                        type: boolean
                      propagateDeps:
                        description: |-
                          PropagateDeps tells if relevant resources should be propagated automatically.
                          It is inherited from PropagationPolicy or ClusterPropagationPolicy.
                          default false.
                        type: boolean
                      replicaRequirements:
                        description: ReplicaRequirements represents the resource and scheduling
                          requirements for each replica.
                        properties:
                          namespace:
                            description: Namespace represents the resources namespaces
                            type: string
                          nodeClaim:
                            description: NodeClaim represents the node claim HardNodeAffinity,
                              NodeSelector and Tolerations required by each replica.
                            properties:
                              hardNodeAffinity:
                                description: |-
                                  A node selector represents the union of the results of one or more label queries over a set of
                                  nodes; that is, it represents the OR of the selectors represented by the node selector terms.
                                  Note that only PodSpec.Affinity.NodeAffinity.RequiredDuringSchedulingIgnoredDuringExecution
                                  is included here because it has a hard limit on pod scheduling.
                                properties:
                                  nodeSelectorTerms:
                                    description: Required. A list of node selector terms.
                                      The terms are ORed.
                                    items:
                                      description: |-
                                        A null or empty node selector term matches no objects. The requirements of
                                        them are ANDed.
                                        The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                      properties:
                                        matchExpressions:
                                          description: A list of node selector requirements
                                            by node's labels.
                                          items:
                                            description: |-
                                              A node selector requirement is a selector that contains values, a key, and an operator
                                              that relates the key and values.
                                            properties:
                                              key:
                                                description: The label key that the selector
                                                  applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  Represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                type: string
                                              values:
                                                description: |-
                                                  An array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. If the operator is Gt or Lt, the values
                                                  array must have a single element, which will be interpreted as an integer.
                                                  This array is replaced during a strategic merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchFields:
                                          description: A list of node selector requirements
                                            by node's fields.
                                          items:
                                            description: |-
                                              A node selector requirement is a selector that contains values, a key, and an operator
                                              that relates the key and values.
                                            properties:
                                              key:
                                                description: The label key that the selector
                                                  applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  Represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                type: string
                                              values:
                                                description: |-
                                                  An array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. If the operator is Gt or Lt, the values
                                                  array must have a single element, which will be interpreted as an integer.
                                                  This array is replaced during a strategic merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    type: array
                                    x-kubernetes-list-type: atomic
                                required:
                                - nodeSelectorTerms
                                type: object
                                x-kubernetes-map-type: atomic
                              nodeSelector:
                                additionalProperties:
                                  type: string
                                description: |-
                                  NodeSelector is a selector which must be true for the pod to fit on a node.
                                  Selector which must match a node's labels for the pod to be scheduled on that node.
                                type: object
                              tolerations:
                                description: If specified, the pod's tolerations.
                                items:
                                  description: |-
                                    The pod this Toleration is attached to tolerates any taint that matches
                                    the triple <key,value,effect> using the matching operator <operator>.
                                  properties:
                                    effect:
                                      description: |-
                                        Effect indicates the taint effect to match. Empty means match all taint effects.
                                        When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                      type: string
                                    key:
                                      description: |-
                                        Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                        If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                      type: string
                                    operator:
                                      description: |-
                                        Operator represents a key's relationship to the value.
                                        Valid operators are Exists and Equal. Defaults to Equal.
                                        Exists is equivalent to wildcard for value, so that a pod can
                                        tolerate all taints of a particular category.
                                      type: string
                                    tolerationSeconds:
                                      description: |-
                                        TolerationSeconds represents the period of time the toleration (which must be
                                        of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                        it is not set, which means tolerate the taint forever (do not evict). Zero and
                                        negative values will be treated as 0 (evict immediately) by the system.
                                      format: int64
                                      type: integer
                                    value:
                                      description: |-
                                        Value is the taint value the toleration matches to.
                                        If the operator is Exists, the value should be empty, otherwise just a regular string.
                                      type: string
                                  type: object
                                type: array
                            type: object
                          priorityClassName:
                            description: PriorityClassName represents the resources priorityClassName
                            type: string
                          resourceRequest:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: ResourceRequest represents the resources required
                              by each replica.
                            type: object
                        type: object
                      replicas:
                        description: Replicas represents the replica number of the referencing
                          resource.
                        format: int32
                        type: integer
                      requiredBy:
                        description: RequiredBy represents the list of Bindings that depend
                          on the referencing resource.
                        items:
                          description: BindingSnapshot is a snapshot of a ResourceBinding
                            or ClusterResourceBinding.
                          properties:
                            clusters:
                              description: Clusters represents the scheduled result.
                              items:
                                description: TargetCluster represents the identifier of a
                                  member cluster.
                                properties:
                                  name:
                                    description: Name of target cluster.
                                    type: string
                                  replicas:
                                    description: Replicas in target cluster
                                    format: int32
                                    type: integer
                                required:
                                - name
                                type: object
                              type: array
                            name:
                              description: Name represents the name of the Binding.
                              type: string
                            namespace:
                              description: |-
                                Namespace represents the namespace of the Binding.
                                It is required for ResourceBinding.
                                If Namespace is not specified, means the referencing is ClusterResourceBinding.
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      rescheduleTriggeredAt:
                        description: |-
                          RescheduleTriggeredAt is a timestamp representing when the referenced resource is triggered rescheduling.
                          When this field is updated, it means a rescheduling is manually triggered by user, and the expected behavior
                          of this action is to do a complete recalculation without referring to last scheduling results.
                          It works with the status.lastScheduledTime field, and only when this timestamp is later than timestamp in
                          status.lastScheduledTime will the rescheduling actually execute, otherwise, ignored.
        
                          It is represented in RFC3339 form (like '2006-01-02T15:04:05Z') and is in UTC.
                        format: date-time
                        type: string
                      resource:
                        description: Resource represents the Kubernetes resource to be propagated.
                        properties:
                          apiVersion:
                            description: APIVersion represents the API version of the referent.
                            type: string
                          kind:
                            description: Kind represents the Kind of the referent.
                            type: string
                          name:
                            description: Name represents the name of the referent.
                            type: string
                          namespace:
                            description: |-
                              Namespace represents the namespace for the referent.
                              For non-namespace scoped resources(e.g. 'ClusterRole')ï¼Œdo not need specify Namespace,
                              and for namespace scoped resources, Namespace is required.
                              If Namespace is not specified, means the resource is non-namespace scoped.
                            type: string
                          resourceVersion:
                            description: |-
                              ResourceVersion represents the internal version of the referenced object, that can be used by clients to
                              determine when object has changed.
                            type: string
                          uid:
                            description: UID of the referent.
                            type: string
                        required:
                        - apiVersion
                        - kind
                        - name
                        type: object
                      schedulePriority:
                        description: SchedulePriority represents the scheduling priority assigned
                          to workloads.
                        properties:
                          priority:
                            default: 0
                            description: |-
                              Priority specifies the scheduling priority for the binding.
                              Higher values indicate a higher priority.
                              If not explicitly set, the default value is 0.
                            format: int32
                            type: integer
                        type: object
                      schedulerName:
                        description: |-
                          SchedulerName represents which scheduler to proceed the scheduling.
                          It inherits directly from the associated PropagationPolicy(or ClusterPropagationPolicy).
                        type: string
                      suspension:
                        description: |-
                          Suspension declares the policy for suspending different aspects of propagation.
                          nil means no suspension. no default values.
                        properties:
                          dispatching:
                            description: |-
                              Dispatching controls whether dispatching should be suspended.
                              nil means not suspend, no default value, only accepts 'true'.
                              Note: true means stop propagating to all clusters. Can not co-exist
                              with DispatchingOnClusters which is used to suspend particular clusters.
                            type: boolean
                          dispatchingOnClusters:
                            description: |-
                              DispatchingOnClusters declares a list of clusters to which the dispatching
                              should be suspended.
                              Note: Can not co-exist with Dispatching which is used to suspend all.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                            type: object
                          scheduling:
                            description: |-
                              Scheduling controls whether scheduling should be suspended, the scheduler will pause scheduling and not
                              process resource binding when the value is true and resume scheduling when it's false or nil.
                              This is designed for third-party systems to temporarily pause the scheduling of applications, which enabling
                              manage resource allocation, prioritize critical workloads, etc.
                              It is expected that third-party systems use an admission webhook to suspend scheduling at the time of
                              ResourceBinding creation. Once a ResourceBinding has been scheduled, it cannot be paused afterward, as it may
                              lead to ineffective suspension.
                            type: boolean
                        type: object
                    required:
                    - resource
                    type: object
                  status:
                    description: Status represents the most recently observed status of the
                      ResourceBinding.
                    properties:
                      aggregatedStatus:
                        description: AggregatedStatus represents status list of the resource
                          running in each member cluster.
                        items:
                          description: AggregatedStatusItem represents status of the resource
                            running in a member cluster.
                          properties:
                            applied:
                              description: |-
                                Applied represents if the resource referencing by ResourceBinding or ClusterResourceBinding
                                is successfully applied on the cluster.
                              type: boolean
                            appliedMessage:
                              description: |-
                                AppliedMessage is a human readable message indicating details about the applied status.
                                This is usually holds the error message in case of apply failed.
                              type: string
                            clusterName:
                              description: ClusterName represents the member cluster name
                                which the resource deployed on.
                              type: string
                            health:
                              description: |-
                                Health represents the healthy state of the current resource.
                                There maybe different rules for different resources to achieve health status.
                              enum:
                              - Healthy
                              - Unhealthy
                              - Unknown
                              type: string
                            status:
                              description: Status reflects running status of current manifest.
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - clusterName
                          type: object
                        type: array
                      conditions:
                        description: Conditions contain the different condition statuses.
                        items:
                          description: Condition contains details for one aspect of the current
                            state of this API Resource.
                          properties:
                            lastTransitionTime:
                              description: |-
                                lastTransitionTime is the last time the condition transitioned from one status to another.
                                This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                              format: date-time
                              type: string
                            message:
                              description: |-
                                message is a human readable message indicating details about the transition.
                                This may be an empty string.
                              maxLength: 32768
                              type: string
                            observedGeneration:
                              description: |-
                                observedGeneration represents the .metadata.generation that the condition was set based upon.
                                For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                with respect to the current state of the instance.
                              format: int64
                              minimum: 0
                              type: integer
                            reason:
                              description: |-
                                reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                Producers of specific condition types may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            status:
                              description: status of the condition, one of True, False, Unknown.
                              enum:
                              - "True"
                              - "False"
                              - Unknown
                              type: string
                            type:
                              description: type of condition in CamelCase or in foo.example.com/CamelCase.
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                              type: string
                          required:
                          - lastTransitionTime
                          - message
                          - reason
                          - status
                          - type
                          type: object
                        type: array
                      lastScheduledTime:
                        description: |-
                          LastScheduledTime representing the latest timestamp when scheduler successfully finished a scheduling.
                          It is represented in RFC3339 form (like '2006-01-02T15:04:05Z') and is in UTC.
                        format: date-time
                        type: string
                      schedulerObservedGeneration:
                        description: |-
                          SchedulerObservedGeneration is the generation(.metadata.generation) observed by the scheduler.
                          If SchedulerObservedGeneration is less than the generation in metadata means the scheduler hasn't confirmed
                          the scheduling result or hasn't done the schedule yet.
                        format: int64
                        type: integer
                      schedulerObservingAffinityName:
                        description: |-
                          SchedulerObservedAffinityName is the name of affinity term that is
                          the basis of current scheduling.
                        type: string
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
        
  
  
      work.karmada.io_resourcebindings.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: resourcebindings.work.karmada.io
        spec:
          group: work.karmada.io
          names:
            categories:
            - karmada-io
            kind: ResourceBinding
            listKind: ResourceBindingList
            plural: resourcebindings
            shortNames:
            - rb
            singular: resourcebinding
          scope: Namespaced
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: ResourceBinding represents a binding of a kubernetes resource
                  with a propagation policy.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior.
                    properties:
                      clusters:
                        description: Clusters represents target member clusters where the
                          resource to be deployed.
                        items:
                          description: TargetCluster represents the identifier of a member
                            cluster.
                          properties:
                            name:
                              description: Name of target cluster.
                              type: string
                            replicas:
                              description: Replicas in target cluster
                              format: int32
                              type: integer
                          required:
                          - name
                          type: object
                        type: array
                      resource:
                        description: Resource represents the Kubernetes resource to be propagated.
                        properties:
                          apiVersion:
                            description: APIVersion represents the API version of the referent.
                            type: string
                          kind:
                            description: Kind represents the Kind of the referent.
                            type: string
                          name:
                            description: Name represents the name of the referent.
                            type: string
                          namespace:
                            description: |-
                              Namespace represents the namespace for the referent.
                              For non-namespace scoped resources(e.g. 'ClusterRole')ï¼Œdo not need specify Namespace,
                              and for namespace scoped resources, Namespace is required.
                              If Namespace is not specified, means the resource is non-namespace scoped.
                            type: string
                          replicas:
                            description: Replicas represents the replica number of the referencing
                              resource.
                            format: int32
                            type: integer
                          resourcePerReplicas:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: ReplicaResourceRequirements represents the resources
                              required by each replica.
                            type: object
                          resourceVersion:
                            description: |-
                              ResourceVersion represents the internal version of the referenced object, that can be used by clients to
                              determine when object has changed.
                            type: string
                        required:
                        - apiVersion
                        - kind
                        - name
                        type: object
                    required:
                    - resource
                    type: object
                  status:
                    description: Status represents the most recently observed status of the
                      ResourceBinding.
                    properties:
                      aggregatedStatus:
                        description: AggregatedStatus represents status list of the resource
                          running in each member cluster.
                        items:
                          description: AggregatedStatusItem represents status of the resource
                            running in a member cluster.
                          properties:
                            applied:
                              description: |-
                                Applied represents if the resource referencing by ResourceBinding or ClusterResourceBinding
                                is successfully applied on the cluster.
                              type: boolean
                            appliedMessage:
                              description: |-
                                AppliedMessage is a human readable message indicating details about the applied status.
                                This is usually holds the error message in case of apply failed.
                              type: string
                            clusterName:
                              description: ClusterName represents the member cluster name
                                which the resource deployed on.
                              type: string
                            status:
                              description: Status reflects running status of current manifest.
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - clusterName
                          type: object
                        type: array
                      conditions:
                        description: Conditions contain the different condition statuses.
                        items:
                          description: Condition contains details for one aspect of the current
                            state of this API Resource.
                          properties:
                            lastTransitionTime:
                              description: |-
                                lastTransitionTime is the last time the condition transitioned from one status to another.
                                This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                              format: date-time
                              type: string
                            message:
                              description: |-
                                message is a human readable message indicating details about the transition.
                                This may be an empty string.
                              maxLength: 32768
                              type: string
                            observedGeneration:
                              description: |-
                                observedGeneration represents the .metadata.generation that the condition was set based upon.
                                For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                with respect to the current state of the instance.
                              format: int64
                              minimum: 0
                              type: integer
                            reason:
                              description: |-
                                reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                Producers of specific condition types may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            status:
                              description: status of the condition, one of True, False, Unknown.
                              enum:
                              - "True"
                              - "False"
                              - Unknown
                              type: string
                            type:
                              description: type of condition in CamelCase or in foo.example.com/CamelCase.
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                              type: string
                          required:
                          - lastTransitionTime
                          - message
                          - reason
                          - status
                          - type
                          type: object
                        type: array
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: false
            subresources:
              status: {}
          - additionalPrinterColumns:
            - jsonPath: .status.conditions[?(@.type=="Scheduled")].status
              name: SCHEDULED
              type: string
            - jsonPath: .status.conditions[?(@.type=="FullyApplied")].status
              name: FULLYAPPLIED
              type: string
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha2
            schema:
              openAPIV3Schema:
                description: ResourceBinding represents a binding of a kubernetes resource
                  with a propagation policy.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior.
                    properties:
                      clusters:
                        description: Clusters represents target member clusters where the
                          resource to be deployed.
                        items:
                          description: TargetCluster represents the identifier of a member
                            cluster.
                          properties:
                            name:
                              description: Name of target cluster.
                              type: string
                            replicas:
                              description: Replicas in target cluster
                              format: int32
                              type: integer
                          required:
                          - name
                          type: object
                        type: array
                      components:
                        description: |-
                          Components represents the requirements of multiple pod templates of the referencing resource.
                          It is designed to support workloads that consist of multiple pod templates,
                          such as distributed training jobs (e.g., PyTorch, TensorFlow) and big data workloads (e.g., FlinkDeployment),
                          where each workload is composed of more than one pod template. It is also capable of representing
                          single-component workloads, such as Deployment.
        
                          Note: This field is intended to replace the legacy ReplicaRequirements and Replicas fields above.
                          It is only populated when the MultiplePodTemplatesScheduling feature gate is enabled.
                        items:
                          description: Component represents the requirements for a specific
                            component.
                          properties:
                            name:
                              description: |-
                                Name of this component.
                                It is required when the resource contains multiple components to ensure proper identification,
                                and must also be unique within the same resource.
                              maxLength: 32
                              type: string
                            replicaRequirements:
                              description: ReplicaRequirements represents the resource and
                                scheduling requirements for each replica.
                              properties:
                                nodeClaim:
                                  description: NodeClaim represents the node claim HardNodeAffinity,
                                    NodeSelector and Tolerations required by each replica.
                                  properties:
                                    hardNodeAffinity:
                                      description: |-
                                        A node selector represents the union of the results of one or more label queries over a set of
                                        nodes; that is, it represents the OR of the selectors represented by the node selector terms.
                                        Note that only PodSpec.Affinity.NodeAffinity.RequiredDuringSchedulingIgnoredDuringExecution
                                        is included here because it has a hard limit on pod scheduling.
                                      properties:
                                        nodeSelectorTerms:
                                          description: Required. A list of node selector terms.
                                            The terms are ORed.
                                          items:
                                            description: |-
                                              A null or empty node selector term matches no objects. The requirements of
                                              them are ANDed.
                                              The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                            properties:
                                              matchExpressions:
                                                description: A list of node selector requirements
                                                  by node's labels.
                                                items:
                                                  description: |-
                                                    A node selector requirement is a selector that contains values, a key, and an operator
                                                    that relates the key and values.
                                                  properties:
                                                    key:
                                                      description: The label key that the
                                                        selector applies to.
                                                      type: string
                                                    operator:
                                                      description: |-
                                                        Represents a key's relationship to a set of values.
                                                        Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                      type: string
                                                    values:
                                                      description: |-
                                                        An array of string values. If the operator is In or NotIn,
                                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                        the values array must be empty. If the operator is Gt or Lt, the values
                                                        array must have a single element, which will be interpreted as an integer.
                                                        This array is replaced during a strategic merge patch.
                                                      items:
                                                        type: string
                                                      type: array
                                                      x-kubernetes-list-type: atomic
                                                  required:
                                                  - key
                                                  - operator
                                                  type: object
                                                type: array
                                                x-kubernetes-list-type: atomic
                                              matchFields:
                                                description: A list of node selector requirements
                                                  by node's fields.
                                                items:
                                                  description: |-
                                                    A node selector requirement is a selector that contains values, a key, and an operator
                                                    that relates the key and values.
                                                  properties:
                                                    key:
                                                      description: The label key that the
                                                        selector applies to.
                                                      type: string
                                                    operator:
                                                      description: |-
                                                        Represents a key's relationship to a set of values.
                                                        Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                      type: string
                                                    values:
                                                      description: |-
                                                        An array of string values. If the operator is In or NotIn,
                                                        the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                        the values array must be empty. If the operator is Gt or Lt, the values
                                                        array must have a single element, which will be interpreted as an integer.
                                                        This array is replaced during a strategic merge patch.
                                                      items:
                                                        type: string
                                                      type: array
                                                      x-kubernetes-list-type: atomic
                                                  required:
                                                  - key
                                                  - operator
                                                  type: object
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - nodeSelectorTerms
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    nodeSelector:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        NodeSelector is a selector which must be true for the pod to fit on a node.
                                        Selector which must match a node's labels for the pod to be scheduled on that node.
                                      type: object
                                    tolerations:
                                      description: If specified, the pod's tolerations.
                                      items:
                                        description: |-
                                          The pod this Toleration is attached to tolerates any taint that matches
                                          the triple <key,value,effect> using the matching operator <operator>.
                                        properties:
                                          effect:
                                            description: |-
                                              Effect indicates the taint effect to match. Empty means match all taint effects.
                                              When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                            type: string
                                          key:
                                            description: |-
                                              Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                              If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                            type: string
                                          operator:
                                            description: |-
                                              Operator represents a key's relationship to the value.
                                              Valid operators are Exists and Equal. Defaults to Equal.
                                              Exists is equivalent to wildcard for value, so that a pod can
                                              tolerate all taints of a particular category.
                                            type: string
                                          tolerationSeconds:
                                            description: |-
                                              TolerationSeconds represents the period of time the toleration (which must be
                                              of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                              it is not set, which means tolerate the taint forever (do not evict). Zero and
                                              negative values will be treated as 0 (evict immediately) by the system.
                                            format: int64
                                            type: integer
                                          value:
                                            description: |-
                                              Value is the taint value the toleration matches to.
                                              If the operator is Exists, the value should be empty, otherwise just a regular string.
                                            type: string
                                        type: object
                                      type: array
                                  type: object
                                priorityClassName:
                                  description: PriorityClassName represents the resources
                                    priorityClassName
                                  type: string
                                resourceRequest:
                                  additionalProperties:
                                    anyOf:
                                    - type: integer
                                    - type: string
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  description: ResourceRequest represents the resources required
                                    by each replica.
                                  type: object
                              type: object
                            replicas:
                              description: Replicas represents the replica number of the resource's
                                component.
                              format: int32
                              type: integer
                          required:
                          - name
                          - replicas
                          type: object
                        type: array
                      conflictResolution:
                        default: Abort
                        description: |-
                          ConflictResolution declares how potential conflict should be handled when
                          a resource that is being propagated already exists in the target cluster.
        
                          It defaults to "Abort" which means stop propagating to avoid unexpected
                          overwrites. The "Overwrite" might be useful when migrating legacy cluster
                          resources to Karmada, in which case conflict is predictable and can be
                          instructed to Karmada take over the resource by overwriting.
                        enum:
                        - Abort
                        - Overwrite
                        type: string
                      failover:
                        description: |-
                          Failover indicates how Karmada migrates applications in case of failures.
                          It inherits directly from the associated PropagationPolicy(or ClusterPropagationPolicy).
                        properties:
                          application:
                            description: |-
                              Application indicates failover behaviors in case of application failure.
                              If this value is nil, failover is disabled.
                              If set, the PropagateDeps should be true so that the dependencies could
                              be migrated along with the application.
                            properties:
                              decisionConditions:
                                description: |-
                                  DecisionConditions indicates the decision conditions of performing the failover process.
                                  Only when all conditions are met can the failover process be performed.
                                  Currently, DecisionConditions includes several conditions:
                                  - TolerationSeconds (optional)
                                properties:
                                  tolerationSeconds:
                                    default: 300
                                    description: |-
                                      TolerationSeconds represents the period of time Karmada should wait
                                      after reaching the desired state before performing failover process.
                                      If not specified, Karmada will immediately perform failover process.
                                      Defaults to 300s.
                                    format: int32
                                    type: integer
                                type: object
                              gracePeriodSeconds:
                                description: |-
                                  GracePeriodSeconds is the maximum waiting duration in seconds before
                                  application on the migrated cluster should be deleted.
                                  Required only when PurgeMode is "Graciously" and defaults to 600s.
                                  If the application on the new cluster cannot reach a Healthy state,
                                  Karmada will delete the application after GracePeriodSeconds is reached.
                                  Value must be positive integer.
                                format: int32
                                type: integer
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully", "Never", "Immediately"(deprecated),
                                  and "Graciously"(deprecated).
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                - Never
                                - Immediately
                                - Graciously
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            required:
                            - decisionConditions
                            type: object
                          cluster:
                            description: |-
                              Cluster indicates failover behaviors in case of cluster failure.
                              If this value is nil, the failover behavior in case of cluster failure
                              will be controlled by the controller's no-execute-taint-eviction-purge-mode
                              parameter.
                              If set, the failover behavior in case of cluster failure will be defined
                              by this value.
                            properties:
                              purgeMode:
                                default: Gracefully
                                description: |-
                                  PurgeMode represents how to deal with the legacy applications on the
                                  cluster from which the application is migrated.
                                  Valid options are "Directly", "Gracefully".
                                  Defaults to "Gracefully".
                                enum:
                                - Directly
                                - Gracefully
                                type: string
                              statePreservation:
                                description: |-
                                  StatePreservation defines the policy for preserving and restoring state data
                                  during failover events for stateful applications.
        
                                  When an application fails over from one cluster to another, this policy enables
                                  the extraction of critical data from the original resource configuration.
                                  Upon successful migration, the extracted data is then re-injected into the new
                                  resource, ensuring that the application can resume operation with its previous
                                  state intact.
                                  This is particularly useful for stateful applications where maintaining data
                                  consistency across failover events is crucial.
                                  If not specified, means no state data will be preserved.
        
                                  Note: This requires the StatefulFailoverInjection feature gate to be enabled,
                                  which is alpha.
                                properties:
                                  rules:
                                    description: |-
                                      Rules contains a list of StatePreservationRule configurations.
                                      Each rule specifies a JSONPath expression targeting specific pieces of
                                      state data to be preserved during failover events. An AliasLabelName is associated
                                      with each rule, serving as a label key when the preserved data is passed
                                      to the new cluster.
                                    items:
                                      description: |-
                                        StatePreservationRule defines a single rule for state preservation.
                                        It includes a JSONPath expression and an alias name that will be used
                                        as a label key when passing state information to the new cluster.
                                      properties:
                                        aliasLabelName:
                                          description: |-
                                            AliasLabelName is the name that will be used as a label key when the preserved
                                            data is passed to the new cluster. This facilitates the injection of the
                                            preserved state back into the application resources during recovery.
                                          type: string
                                        jsonPath:
                                          description: |-
                                            JSONPath is the JSONPath template used to identify the state data
                                            to be preserved from the original resource configuration.
                                            The JSONPath syntax follows the Kubernetes specification:
                                            https://kubernetes.io/docs/reference/kubectl/jsonpath/
        
                                            Note: The JSONPath expression will start searching from the "status" field of
                                            the API resource object by default. For example, to extract the "availableReplicas"
                                            from a Deployment, the JSONPath expression should be "{.availableReplicas}", not
                                            "{.status.availableReplicas}".
                                          type: string
                                      required:
                                      - aliasLabelName
                                      - jsonPath
                                      type: object
                                    type: array
                                required:
                                - rules
                                type: object
                            type: object
                        type: object
                      gracefulEvictionTasks:
                        description: |-
                          GracefulEvictionTasks holds the eviction tasks that are expected to perform
                          the eviction in a graceful way.
                          The intended workflow is:
                          1. Once the controller(such as 'taint-manager') decided to evict the resource that
                             is referenced by current ResourceBinding or ClusterResourceBinding from a target
                             cluster, it removes(or scale down the replicas) the target from Clusters(.spec.Clusters)
                             and builds a graceful eviction task.
                          2. The scheduler may perform a re-scheduler and probably select a substitute cluster
                             to take over the evicting workload(resource).
                          3. The graceful eviction controller takes care of the graceful eviction tasks and
                             performs the final removal after the workload(resource) is available on the substitute
                             cluster or exceed the grace termination period(defaults to 10 minutes).
                        items:
                          description: GracefulEvictionTask represents a graceful eviction
                            task.
                          properties:
                            clustersBeforeFailover:
                              description: ClustersBeforeFailover records the clusters where
                                running the application before failover.
                              items:
                                type: string
                              type: array
                            creationTimestamp:
                              description: |-
                                CreationTimestamp is a timestamp representing the server time when this object was
                                created.
                                Clients should not set this value to avoid the time inconsistency issue.
                                It is represented in RFC3339 form(like '2021-04-25T10:02:10Z') and is in UTC.
        
                                Populated by the system. Read-only.
                              format: date-time
                              type: string
                            fromCluster:
                              description: FromCluster which cluster the eviction perform
                                from.
                              type: string
                            gracePeriodSeconds:
                              description: |-
                                GracePeriodSeconds is the maximum waiting duration in seconds before the item
                                should be deleted. If the application on the new cluster cannot reach a Healthy state,
                                Karmada will delete the item after GracePeriodSeconds is reached.
                                Value must be positive integer.
                                It can not co-exist with SuppressDeletion.
                              format: int32
                              type: integer
                            message:
                              description: |-
                                Message is a human-readable message indicating details about the eviction.
                                This may be an empty string.
                              maxLength: 1024
                              type: string
                            preservedLabelState:
                              additionalProperties:
                                type: string
                              description: |-
                                PreservedLabelState represents the application state information collected from the original cluster,
                                and it will be injected into the new cluster in form of application labels.
                              type: object
                            producer:
                              description: Producer indicates the controller who triggered
                                the eviction.
                              type: string
                            purgeMode:
                              description: |-
                                PurgeMode represents how to deal with the legacy applications on the
                                cluster from which the application is migrated.
                                Valid options are "Immediately", "Directly", "Graciously", "Gracefully" and "Never".
                              enum:
                              - Immediately
                              - Directly
                              - Graciously
                              - Gracefully
                              - Never
                              type: string
                            reason:
                              description: |-
                                Reason contains a programmatic identifier indicating the reason for the eviction.
                                Producers may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 32
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            replicas:
                              description: |-
                                Replicas indicates the number of replicas should be evicted.
                                Should be ignored for resource type that doesn't have replica.
                              format: int32
                              type: integer
                            suppressDeletion:
                              description: |-
                                SuppressDeletion represents the grace period will be persistent until
                                the tools or human intervention stops it.
                                It can not co-exist with GracePeriodSeconds.
                              type: boolean
                          required:
                          - fromCluster
                          - producer
                          - reason
                          type: object
                        type: array
                      placement:
                        description: Placement represents the rule for select clusters to
                          propagate resources.
                        properties:
                          clusterAffinities:
                            description: |-
                              ClusterAffinities represents scheduling restrictions to multiple cluster
                              groups that indicated by ClusterAffinityTerm.
        
                              The scheduler will evaluate these groups one by one in the order they
                              appear in the spec, the group that does not satisfy scheduling restrictions
                              will be ignored which means all clusters in this group will not be selected
                              unless it also belongs to the next group(a cluster could belong to multiple
                              groups).
        
                              If none of the groups satisfy the scheduling restrictions, then scheduling
                              fails, which means no cluster will be selected.
        
                              Note:
                                1. ClusterAffinities can not co-exist with ClusterAffinity.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
        
                              Potential use case 1:
                              The private clusters in the local data center could be the main group, and
                              the managed clusters provided by cluster providers could be the secondary
                              group. So that the Karmada scheduler would prefer to schedule workloads
                              to the main group and the second group will only be considered in case of
                              the main group does not satisfy restrictions(like, lack of resources).
        
                              Potential use case 2:
                              For the disaster recovery scenario, the clusters could be organized to
                              primary and backup groups, the workloads would be scheduled to primary
                              clusters firstly, and when primary cluster fails(like data center power off),
                              Karmada scheduler could migrate workloads to the backup clusters.
                            items:
                              description: ClusterAffinityTerm selects a set of cluster.
                              properties:
                                affinityName:
                                  description: AffinityName is the name of the cluster group.
                                  maxLength: 32
                                  minLength: 1
                                  type: string
                                clusterNames:
                                  description: ClusterNames is the list of clusters to be
                                    selected.
                                  items:
                                    type: string
                                  type: array
                                exclude:
                                  description: ExcludedClusters is the list of clusters to
                                    be ignored.
                                  items:
                                    type: string
                                  type: array
                                fieldSelector:
                                  description: |-
                                    FieldSelector is a filter to select member clusters by fields.
                                    The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                    and the operator of the match expression should be 'In' or 'NotIn'.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: A list of field selector requirements.
                                      items:
                                        description: |-
                                          A node selector requirement is a selector that contains values, a key, and an operator
                                          that relates the key and values.
                                        properties:
                                          key:
                                            description: The label key that the selector applies
                                              to.
                                            type: string
                                          operator:
                                            description: |-
                                              Represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                            type: string
                                          values:
                                            description: |-
                                              An array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. If the operator is Gt or Lt, the values
                                              array must have a single element, which will be interpreted as an integer.
                                              This array is replaced during a strategic merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                  type: object
                                labelSelector:
                                  description: |-
                                    LabelSelector is a filter to select member clusters by labels.
                                    If non-nil and non-empty, only the clusters match this filter will be selected.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label selector
                                        requirements. The requirements are ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that the selector
                                              applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              required:
                              - affinityName
                              type: object
                            type: array
                          clusterAffinity:
                            description: |-
                              ClusterAffinity represents scheduling restrictions to a certain set of clusters.
                              Note:
                                1. ClusterAffinity can not co-exist with ClusterAffinities.
                                2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
                                   can be scheduling candidates.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                              exclude:
                                description: ExcludedClusters is the list of clusters to be
                                  ignored.
                                items:
                                  type: string
                                type: array
                              fieldSelector:
                                description: |-
                                  FieldSelector is a filter to select member clusters by fields.
                                  The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                  and the operator of the match expression should be 'In' or 'NotIn'.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: A list of field selector requirements.
                                    items:
                                      description: |-
                                        A node selector requirement is a selector that contains values, a key, and an operator
                                        that relates the key and values.
                                      properties:
                                        key:
                                          description: The label key that the selector applies
                                            to.
                                          type: string
                                        operator:
                                          description: |-
                                            Represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                          type: string
                                        values:
                                          description: |-
                                            An array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. If the operator is Gt or Lt, the values
                                            array must have a single element, which will be interpreted as an integer.
                                            This array is replaced during a strategic merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                type: object
                              labelSelector:
                                description: |-
                                  LabelSelector is a filter to select member clusters by labels.
                                  If non-nil and non-empty, only the clusters match this filter will be selected.
                                properties:
                                  matchExpressions:
                                    description: matchExpressions is a list of label selector
                                      requirements. The requirements are ANDed.
                                    items:
                                      description: |-
                                        A label selector requirement is a selector that contains values, a key, and an operator that
                                        relates the key and values.
                                      properties:
                                        key:
                                          description: key is the label key that the selector
                                            applies to.
                                          type: string
                                        operator:
                                          description: |-
                                            operator represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists and DoesNotExist.
                                          type: string
                                        values:
                                          description: |-
                                            values is an array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. This array is replaced during a strategic
                                            merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                    x-kubernetes-list-type: atomic
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    description: |-
                                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                                    type: object
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                          clusterTolerations:
                            description: ClusterTolerations represents the tolerations.
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                          replicaScheduling:
                            description: |-
                              ReplicaScheduling represents the scheduling policy on dealing with the number of replicas
                              when propagating resources that have replicas in spec (e.g. deployments, statefulsets) to member clusters.
                            properties:
                              replicaDivisionPreference:
                                description: |-
                                  ReplicaDivisionPreference determines how the replicas is divided
                                  when ReplicaSchedulingType is "Divided". Valid options are Aggregated and Weighted.
                                  "Aggregated" divides replicas into clusters as few as possible,
                                  while respecting clusters' resource availabilities during the division.
                                  "Weighted" divides replicas by weight according to WeightPreference.
                                enum:
                                - Aggregated
                                - Weighted
                                type: string
                              replicaSchedulingType:
                                default: Divided
                                description: |-
                                  ReplicaSchedulingType determines how the replicas is scheduled when karmada propagating
                                  a resource. Valid options are Duplicated and Divided.
                                  "Duplicated" duplicates the same replicas to each candidate member cluster from resource.
                                  "Divided" divides replicas into parts according to number of valid candidate member
                                  clusters, and exact replicas for each cluster are determined by ReplicaDivisionPreference.
                                enum:
                                - Duplicated
                                - Divided
                                type: string
                              weightPreference:
                                description: |-
                                  WeightPreference describes weight for each cluster or for each group of cluster
                                  If ReplicaDivisionPreference is set to "Weighted", and WeightPreference is not set, scheduler will weight all clusters the same.
                                properties:
                                  dynamicWeight:
                                    description: |-
                                      DynamicWeight specifies the factor to generates dynamic weight list.
                                      If specified, StaticWeightList will be ignored.
                                    enum:
                                    - AvailableReplicas
                                    type: string
                                  staticWeightList:
                                    description: StaticWeightList defines the static cluster
                                      weight.
                                    items:
                                      description: StaticClusterWeight defines the static
                                        cluster weight.
                                      properties:
                                        targetCluster:
                                          description: TargetCluster describes the filter
                                            to select clusters.
                                          properties:
                                            clusterNames:
                                              description: ClusterNames is the list of clusters
                                                to be selected.
                                              items:
                                                type: string
                                              type: array
                                            exclude:
                                              description: ExcludedClusters is the list of
                                                clusters to be ignored.
                                              items:
                                                type: string
                                              type: array
                                            fieldSelector:
                                              description: |-
                                                FieldSelector is a filter to select member clusters by fields.
                                                The key(field) of the match expression should be 'provider', 'region', or 'zone',
                                                and the operator of the match expression should be 'In' or 'NotIn'.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: A list of field selector requirements.
                                                  items:
                                                    description: |-
                                                      A node selector requirement is a selector that contains values, a key, and an operator
                                                      that relates the key and values.
                                                    properties:
                                                      key:
                                                        description: The label key that the
                                                          selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          Represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          An array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. If the operator is Gt or Lt, the values
                                                          array must have a single element, which will be interpreted as an integer.
                                                          This array is replaced during a strategic merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                              type: object
                                            labelSelector:
                                              description: |-
                                                LabelSelector is a filter to select member clusters by labels.
                                                If non-nil and non-empty, only the clusters match this filter will be selected.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is a list
                                                    of label selector requirements. The requirements
                                                    are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label key
                                                          that the selector applies to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                        x-kubernetes-list-type: atomic
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                  x-kubernetes-list-type: atomic
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                          type: object
                                        weight:
                                          description: Weight expressing the preference to
                                            the cluster(s) specified by 'TargetCluster'.
                                          format: int64
                                          minimum: 1
                                          type: integer
                                      required:
                                      - targetCluster
                                      - weight
                                      type: object
                                    type: array
                                type: object
                            type: object
                          spreadConstraints:
                            description: SpreadConstraints represents a list of the scheduling
                              constraints.
                            items:
                              description: SpreadConstraint represents the spread constraints
                                on resources.
                              properties:
                                maxGroups:
                                  description: MaxGroups restricts the maximum number of cluster
                                    groups to be selected.
                                  type: integer
                                minGroups:
                                  description: |-
                                    MinGroups restricts the minimum number of cluster groups to be selected.
                                    Defaults to 1.
                                  type: integer
                                spreadByField:
                                  description: |-
                                    SpreadByField represents the fields on Karmada cluster API used for
                                    dynamically grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    Available fields for spreading are: cluster, region, zone, and provider.
                                    SpreadByField should not co-exist with SpreadByLabel.
                                    If both SpreadByField and SpreadByLabel are empty, SpreadByField will be set to "cluster" by system.
                                  enum:
                                  - cluster
                                  - region
                                  - zone
                                  - provider
                                  type: string
                                spreadByLabel:
                                  description: |-
                                    SpreadByLabel represents the label key used for
                                    grouping member clusters into different groups.
                                    Resources will be spread among different cluster groups.
                                    SpreadByLabel should not co-exist with SpreadByField.
                                  type: string
                              type: object
                            type: array
                        type: object
                      preserveResourcesOnDeletion:
                        description: |-
                          PreserveResourcesOnDeletion controls whether resources should be preserved on the
                          member clusters when the binding object is deleted.
                          If set to true, resources will be preserved on the member clusters.
                          Default is false, which means resources will be deleted along with the binding object.
                          This setting applies to all Work objects created under this binding object.
                        type: boolean
                      propagateDeps:
                        description: |-
                          PropagateDeps tells if relevant resources should be propagated automatically.
                          It is inherited from PropagationPolicy or ClusterPropagationPolicy.
                          default false.
                        type: boolean
                      replicaRequirements:
                        description: ReplicaRequirements represents the resource and scheduling
                          requirements for each replica.
                        properties:
                          namespace:
                            description: Namespace represents the resources namespaces
                            type: string
                          nodeClaim:
                            description: NodeClaim represents the node claim HardNodeAffinity,
                              NodeSelector and Tolerations required by each replica.
                            properties:
                              hardNodeAffinity:
                                description: |-
                                  A node selector represents the union of the results of one or more label queries over a set of
                                  nodes; that is, it represents the OR of the selectors represented by the node selector terms.
                                  Note that only PodSpec.Affinity.NodeAffinity.RequiredDuringSchedulingIgnoredDuringExecution
                                  is included here because it has a hard limit on pod scheduling.
                                properties:
                                  nodeSelectorTerms:
                                    description: Required. A list of node selector terms.
                                      The terms are ORed.
                                    items:
                                      description: |-
                                        A null or empty node selector term matches no objects. The requirements of
                                        them are ANDed.
                                        The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                      properties:
                                        matchExpressions:
                                          description: A list of node selector requirements
                                            by node's labels.
                                          items:
                                            description: |-
                                              A node selector requirement is a selector that contains values, a key, and an operator
                                              that relates the key and values.
                                            properties:
                                              key:
                                                description: The label key that the selector
                                                  applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  Represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                type: string
                                              values:
                                                description: |-
                                                  An array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. If the operator is Gt or Lt, the values
                                                  array must have a single element, which will be interpreted as an integer.
                                                  This array is replaced during a strategic merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchFields:
                                          description: A list of node selector requirements
                                            by node's fields.
                                          items:
                                            description: |-
                                              A node selector requirement is a selector that contains values, a key, and an operator
                                              that relates the key and values.
                                            properties:
                                              key:
                                                description: The label key that the selector
                                                  applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  Represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                type: string
                                              values:
                                                description: |-
                                                  An array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. If the operator is Gt or Lt, the values
                                                  array must have a single element, which will be interpreted as an integer.
                                                  This array is replaced during a strategic merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    type: array
                                    x-kubernetes-list-type: atomic
                                required:
                                - nodeSelectorTerms
                                type: object
                                x-kubernetes-map-type: atomic
                              nodeSelector:
                                additionalProperties:
                                  type: string
                                description: |-
                                  NodeSelector is a selector which must be true for the pod to fit on a node.
                                  Selector which must match a node's labels for the pod to be scheduled on that node.
                                type: object
                              tolerations:
                                description: If specified, the pod's tolerations.
                                items:
                                  description: |-
                                    The pod this Toleration is attached to tolerates any taint that matches
                                    the triple <key,value,effect> using the matching operator <operator>.
                                  properties:
                                    effect:
                                      description: |-
                                        Effect indicates the taint effect to match. Empty means match all taint effects.
                                        When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                      type: string
                                    key:
                                      description: |-
                                        Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                        If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                      type: string
                                    operator:
                                      description: |-
                                        Operator represents a key's relationship to the value.
                                        Valid operators are Exists and Equal. Defaults to Equal.
                                        Exists is equivalent to wildcard for value, so that a pod can
                                        tolerate all taints of a particular category.
                                      type: string
                                    tolerationSeconds:
                                      description: |-
                                        TolerationSeconds represents the period of time the toleration (which must be
                                        of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                        it is not set, which means tolerate the taint forever (do not evict). Zero and
                                        negative values will be treated as 0 (evict immediately) by the system.
                                      format: int64
                                      type: integer
                                    value:
                                      description: |-
                                        Value is the taint value the toleration matches to.
                                        If the operator is Exists, the value should be empty, otherwise just a regular string.
                                      type: string
                                  type: object
                                type: array
                            type: object
                          priorityClassName:
                            description: PriorityClassName represents the resources priorityClassName
                            type: string
                          resourceRequest:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: ResourceRequest represents the resources required
                              by each replica.
                            type: object
                        type: object
                      replicas:
                        description: Replicas represents the replica number of the referencing
                          resource.
                        format: int32
                        type: integer
                      requiredBy:
                        description: RequiredBy represents the list of Bindings that depend
                          on the referencing resource.
                        items:
                          description: BindingSnapshot is a snapshot of a ResourceBinding
                            or ClusterResourceBinding.
                          properties:
                            clusters:
                              description: Clusters represents the scheduled result.
                              items:
                                description: TargetCluster represents the identifier of a
                                  member cluster.
                                properties:
                                  name:
                                    description: Name of target cluster.
                                    type: string
                                  replicas:
                                    description: Replicas in target cluster
                                    format: int32
                                    type: integer
                                required:
                                - name
                                type: object
                              type: array
                            name:
                              description: Name represents the name of the Binding.
                              type: string
                            namespace:
                              description: |-
                                Namespace represents the namespace of the Binding.
                                It is required for ResourceBinding.
                                If Namespace is not specified, means the referencing is ClusterResourceBinding.
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      rescheduleTriggeredAt:
                        description: |-
                          RescheduleTriggeredAt is a timestamp representing when the referenced resource is triggered rescheduling.
                          When this field is updated, it means a rescheduling is manually triggered by user, and the expected behavior
                          of this action is to do a complete recalculation without referring to last scheduling results.
                          It works with the status.lastScheduledTime field, and only when this timestamp is later than timestamp in
                          status.lastScheduledTime will the rescheduling actually execute, otherwise, ignored.
        
                          It is represented in RFC3339 form (like '2006-01-02T15:04:05Z') and is in UTC.
                        format: date-time
                        type: string
                      resource:
                        description: Resource represents the Kubernetes resource to be propagated.
                        properties:
                          apiVersion:
                            description: APIVersion represents the API version of the referent.
                            type: string
                          kind:
                            description: Kind represents the Kind of the referent.
                            type: string
                          name:
                            description: Name represents the name of the referent.
                            type: string
                          namespace:
                            description: |-
                              Namespace represents the namespace for the referent.
                              For non-namespace scoped resources(e.g. 'ClusterRole')ï¼Œdo not need specify Namespace,
                              and for namespace scoped resources, Namespace is required.
                              If Namespace is not specified, means the resource is non-namespace scoped.
                            type: string
                          resourceVersion:
                            description: |-
                              ResourceVersion represents the internal version of the referenced object, that can be used by clients to
                              determine when object has changed.
                            type: string
                          uid:
                            description: UID of the referent.
                            type: string
                        required:
                        - apiVersion
                        - kind
                        - name
                        type: object
                      schedulePriority:
                        description: SchedulePriority represents the scheduling priority assigned
                          to workloads.
                        properties:
                          priority:
                            default: 0
                            description: |-
                              Priority specifies the scheduling priority for the binding.
                              Higher values indicate a higher priority.
                              If not explicitly set, the default value is 0.
                            format: int32
                            type: integer
                        type: object
                      schedulerName:
                        description: |-
                          SchedulerName represents which scheduler to proceed the scheduling.
                          It inherits directly from the associated PropagationPolicy(or ClusterPropagationPolicy).
                        type: string
                      suspension:
                        description: |-
                          Suspension declares the policy for suspending different aspects of propagation.
                          nil means no suspension. no default values.
                        properties:
                          dispatching:
                            description: |-
                              Dispatching controls whether dispatching should be suspended.
                              nil means not suspend, no default value, only accepts 'true'.
                              Note: true means stop propagating to all clusters. Can not co-exist
                              with DispatchingOnClusters which is used to suspend particular clusters.
                            type: boolean
                          dispatchingOnClusters:
                            description: |-
                              DispatchingOnClusters declares a list of clusters to which the dispatching
                              should be suspended.
                              Note: Can not co-exist with Dispatching which is used to suspend all.
                            properties:
                              clusterNames:
                                description: ClusterNames is the list of clusters to be selected.
                                items:
                                  type: string
                                type: array
                            type: object
                          scheduling:
                            description: |-
                              Scheduling controls whether scheduling should be suspended, the scheduler will pause scheduling and not
                              process resource binding when the value is true and resume scheduling when it's false or nil.
                              This is designed for third-party systems to temporarily pause the scheduling of applications, which enabling
                              manage resource allocation, prioritize critical workloads, etc.
                              It is expected that third-party systems use an admission webhook to suspend scheduling at the time of
                              ResourceBinding creation. Once a ResourceBinding has been scheduled, it cannot be paused afterward, as it may
                              lead to ineffective suspension.
                            type: boolean
                        type: object
                    required:
                    - resource
                    type: object
                  status:
                    description: Status represents the most recently observed status of the
                      ResourceBinding.
                    properties:
                      aggregatedStatus:
                        description: AggregatedStatus represents status list of the resource
                          running in each member cluster.
                        items:
                          description: AggregatedStatusItem represents status of the resource
                            running in a member cluster.
                          properties:
                            applied:
                              description: |-
                                Applied represents if the resource referencing by ResourceBinding or ClusterResourceBinding
                                is successfully applied on the cluster.
                              type: boolean
                            appliedMessage:
                              description: |-
                                AppliedMessage is a human readable message indicating details about the applied status.
                                This is usually holds the error message in case of apply failed.
                              type: string
                            clusterName:
                              description: ClusterName represents the member cluster name
                                which the resource deployed on.
                              type: string
                            health:
                              description: |-
                                Health represents the healthy state of the current resource.
                                There maybe different rules for different resources to achieve health status.
                              enum:
                              - Healthy
                              - Unhealthy
                              - Unknown
                              type: string
                            status:
                              description: Status reflects running status of current manifest.
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - clusterName
                          type: object
                        type: array
                      conditions:
                        description: Conditions contain the different condition statuses.
                        items:
                          description: Condition contains details for one aspect of the current
                            state of this API Resource.
                          properties:
                            lastTransitionTime:
                              description: |-
                                lastTransitionTime is the last time the condition transitioned from one status to another.
                                This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                              format: date-time
                              type: string
                            message:
                              description: |-
                                message is a human readable message indicating details about the transition.
                                This may be an empty string.
                              maxLength: 32768
                              type: string
                            observedGeneration:
                              description: |-
                                observedGeneration represents the .metadata.generation that the condition was set based upon.
                                For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                with respect to the current state of the instance.
                              format: int64
                              minimum: 0
                              type: integer
                            reason:
                              description: |-
                                reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                Producers of specific condition types may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            status:
                              description: status of the condition, one of True, False, Unknown.
                              enum:
                              - "True"
                              - "False"
                              - Unknown
                              type: string
                            type:
                              description: type of condition in CamelCase or in foo.example.com/CamelCase.
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                              type: string
                          required:
                          - lastTransitionTime
                          - message
                          - reason
                          - status
                          - type
                          type: object
                        type: array
                      lastScheduledTime:
                        description: |-
                          LastScheduledTime representing the latest timestamp when scheduler successfully finished a scheduling.
                          It is represented in RFC3339 form (like '2006-01-02T15:04:05Z') and is in UTC.
                        format: date-time
                        type: string
                      schedulerObservedGeneration:
                        description: |-
                          SchedulerObservedGeneration is the generation(.metadata.generation) observed by the scheduler.
                          If SchedulerObservedGeneration is less than the generation in metadata means the scheduler hasn't confirmed
                          the scheduling result or hasn't done the schedule yet.
                        format: int64
                        type: integer
                      schedulerObservingAffinityName:
                        description: |-
                          SchedulerObservedAffinityName is the name of affinity term that is
                          the basis of current scheduling.
                        type: string
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
        
  
  
      work.karmada.io_works.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: works.work.karmada.io
        spec:
          group: work.karmada.io
          names:
            categories:
            - karmada-io
            kind: Work
            listKind: WorkList
            plural: works
            shortNames:
            - wk
            singular: work
          scope: Namespaced
          versions:
          - additionalPrinterColumns:
            - jsonPath: .spec.workload.manifests[*].kind
              name: WORKLOAD-KIND
              type: string
            - jsonPath: .status.conditions[?(@.type=="Applied")].status
              name: APPLIED
              type: string
            - jsonPath: .metadata.creationTimestamp
              name: AGE
              type: date
            name: v1alpha1
            schema:
              openAPIV3Schema:
                description: Work defines a list of resources to be deployed on the member
                  cluster.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the desired behavior of Work.
                    properties:
                      preserveResourcesOnDeletion:
                        description: |-
                          PreserveResourcesOnDeletion controls whether resources should be preserved on the
                          member cluster when the Work object is deleted.
                          If set to true, resources will be preserved on the member cluster.
                          Default is false, which means resources will be deleted along with the Work object.
                        type: boolean
                      suspendDispatching:
                        description: |-
                          SuspendDispatching controls whether dispatching should
                          be suspended, nil means not suspend.
                          Note: true means stop propagating to the corresponding member cluster, and
                          does not prevent status collection.
                        type: boolean
                      workload:
                        description: Workload represents the manifest workload to be deployed
                          on managed cluster.
                        properties:
                          manifests:
                            description: Manifests represents a list of Kubernetes resources
                              to be deployed on the managed cluster.
                            items:
                              description: Manifest represents a resource to be deployed on
                                managed cluster.
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            type: array
                        type: object
                    type: object
                  status:
                    description: Status represents the status of PropagationStatus.
                    properties:
                      conditions:
                        description: |-
                          Conditions contain the different condition statuses for this work.
                          Valid condition types are:
                          1. Applied represents workload in Work is applied successfully on a managed cluster.
                          2. Progressing represents workload in Work is being applied on a managed cluster.
                          3. Available represents workload in Work exists on the managed cluster.
                          4. Degraded represents the current state of workload does not match the desired
                          state for a certain period.
                        items:
                          description: Condition contains details for one aspect of the current
                            state of this API Resource.
                          properties:
                            lastTransitionTime:
                              description: |-
                                lastTransitionTime is the last time the condition transitioned from one status to another.
                                This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                              format: date-time
                              type: string
                            message:
                              description: |-
                                message is a human readable message indicating details about the transition.
                                This may be an empty string.
                              maxLength: 32768
                              type: string
                            observedGeneration:
                              description: |-
                                observedGeneration represents the .metadata.generation that the condition was set based upon.
                                For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                with respect to the current state of the instance.
                              format: int64
                              minimum: 0
                              type: integer
                            reason:
                              description: |-
                                reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                Producers of specific condition types may define expected values and meanings for this field,
                                and whether the values are considered a guaranteed API.
                                The value should be a CamelCase string.
                                This field may not be empty.
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            status:
                              description: status of the condition, one of True, False, Unknown.
                              enum:
                              - "True"
                              - "False"
                              - Unknown
                              type: string
                            type:
                              description: type of condition in CamelCase or in foo.example.com/CamelCase.
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                              type: string
                          required:
                          - lastTransitionTime
                          - message
                          - reason
                          - status
                          - type
                          type: object
                        type: array
                      manifestStatuses:
                        description: ManifestStatuses contains running status of manifests
                          in spec.
                        items:
                          description: ManifestStatus contains running status of a specific
                            manifest in spec.
                          properties:
                            health:
                              description: |-
                                Health represents the healthy state of the current resource.
                                There maybe different rules for different resources to achieve health status.
                              enum:
                              - Healthy
                              - Unhealthy
                              - Unknown
                              type: string
                            identifier:
                              description: Identifier represents the identity of a resource
                                linking to manifests in spec.
                              properties:
                                group:
                                  description: Group is the group of the resource.
                                  type: string
                                kind:
                                  description: Kind is the kind of the resource.
                                  type: string
                                name:
                                  description: Name is the name of the resource
                                  type: string
                                namespace:
                                  description: |-
                                    Namespace is the namespace of the resource, the resource is cluster scoped if the value
                                    is empty
                                  type: string
                                ordinal:
                                  description: |-
                                    Ordinal represents an index in manifests list, so the condition can still be linked
                                    to a manifest even though manifest cannot be parsed successfully.
                                  type: integer
                                resource:
                                  description: Resource is the resource type of the resource
                                  type: string
                                version:
                                  description: Version is the version of the resource.
                                  type: string
                              required:
                              - kind
                              - name
                              - ordinal
                              - resource
                              - version
                              type: object
                            status:
                              description: Status reflects running status of current manifest.
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - identifier
                          type: object
                        type: array
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-apps-bases
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  
  
      apps.karmada.io_workloadrebalancers.yaml:  |-
        ---
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          annotations:
            controller-gen.kubebuilder.io/version: v0.19.0
          name: workloadrebalancers.apps.karmada.io
        spec:
          group: apps.karmada.io
          names:
            kind: WorkloadRebalancer
            listKind: WorkloadRebalancerList
            plural: workloadrebalancers
            singular: workloadrebalancer
          scope: Cluster
          versions:
          - name: v1alpha1
            schema:
              openAPIV3Schema:
                description: WorkloadRebalancer represents the desired behavior and status
                  of a job which can enforces a resource rebalance.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    type: object
                  spec:
                    description: Spec represents the specification of the desired behavior
                      of WorkloadRebalancer.
                    properties:
                      ttlSecondsAfterFinished:
                        description: |-
                          TTLSecondsAfterFinished limits the lifetime of a WorkloadRebalancer that has finished execution (means each
                          target workload is finished with result of Successful or Failed).
                          If this field is set, ttlSecondsAfterFinished after the WorkloadRebalancer finishes, it is eligible to be automatically deleted.
                          If this field is unset, the WorkloadRebalancer won't be automatically deleted.
                          If this field is set to zero, the WorkloadRebalancer becomes eligible to be deleted immediately after it finishes.
                        format: int32
                        type: integer
                      workloads:
                        description: |-
                          Workloads used to specify the list of expected resource.
                          Nil or empty list is not allowed.
                        items:
                          description: ObjectReference the expected resource.
                          properties:
                            apiVersion:
                              description: APIVersion represents the API version of the target
                                resource.
                              type: string
                            kind:
                              description: Kind represents the Kind of the target resource.
                              type: string
                            name:
                              description: Name of the target resource.
                              type: string
                            namespace:
                              description: |-
                                Namespace of the target resource.
                                Default is empty, which means it is a non-namespacescoped resource.
                              type: string
                          required:
                          - apiVersion
                          - kind
                          - name
                          type: object
                        minItems: 1
                        type: array
                    required:
                    - workloads
                    type: object
                  status:
                    description: Status represents the status of WorkloadRebalancer.
                    properties:
                      finishTime:
                        description: FinishTime represents the finish time of rebalancer.
                        format: date-time
                        type: string
                      observedGeneration:
                        description: |-
                          ObservedGeneration is the generation(.metadata.generation) observed by the controller.
                          If ObservedGeneration is less than the generation in metadata means the controller hasn't confirmed
                          the rebalance result or hasn't done the rebalance yet.
                        format: int64
                        type: integer
                      observedWorkloads:
                        description: ObservedWorkloads contains information about the execution
                          states and messages of target resources.
                        items:
                          description: ObservedWorkload the observed resource.
                          properties:
                            reason:
                              description: Reason represents a machine-readable description
                                of why this resource rebalanced failed.
                              type: string
                            result:
                              description: Result the observed rebalance result of resource.
                              type: string
                            workload:
                              description: Workload the observed resource.
                              properties:
                                apiVersion:
                                  description: APIVersion represents the API version of the
                                    target resource.
                                  type: string
                                kind:
                                  description: Kind represents the Kind of the target resource.
                                  type: string
                                name:
                                  description: Name of the target resource.
                                  type: string
                                namespace:
                                  description: |-
                                    Namespace of the target resource.
                                    Default is empty, which means it is a non-namespacescoped resource.
                                  type: string
                              required:
                              - apiVersion
                              - kind
                              - name
                              type: object
                          required:
                          - workload
                          type: object
                        type: array
                    type: object
                required:
                - spec
                type: object
            served: true
            storage: true
            subresources:
              status: {}
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-config
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "2"
  labels:
    
data:
  cert.yaml: |-
    apiVersion: v1
    kind: Secret
    metadata:
      name: karmada-cert
      namespace: karmada-system
    type: Opaque
    data:
      server-ca.crt: |-
        {{ ca_crt }}
      server-ca.key: |-
        {{ ca_key }}
      karmada.crt: |-
        {{ crt }}
      karmada.key: |-
        {{ key }}
      front-proxy-ca.crt: |-
        {{ front_proxy_ca_crt }}
      front-proxy-client.crt: |-
        {{ front_proxy_crt }}
      front-proxy-client.key: |-
        {{ front_proxy_key }}
  webhook-cert.yaml: |-
    apiVersion: v1
    kind: Secret
    metadata:
      name: karmada-webhook-cert
      namespace: karmada-system
    type: kubernetes.io/tls
    data:
      tls.crt: |-
        {{ crt }}
      tls.key: |-
        {{ key }}
  kubeconfig.yaml: |-
    apiVersion: v1
    kind: Secret
    metadata:
      name: karmada-kubeconfig
      namespace: karmada-system
    stringData:
      kubeconfig: |-
        apiVersion: v1
        kind: Config
        clusters:
          - cluster:
              certificate-authority-data: {{ ca_crt }}
              server: https://karmada-apiserver.karmada-system.svc.cluster.local:5443
            name: karmada-apiserver
        users:
          - user:
              client-certificate-data: {{ crt }}
              client-key-data: {{ key }}
            name: karmada-apiserver
        contexts:
          - context:
              cluster: karmada-apiserver
              user: karmada-apiserver
            name: karmada-apiserver
        current-context: karmada-apiserver
  static-resources-configmaps.yaml: |-
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: karmada-static-resources
      namespace: karmada-system
    data:
      webhook-configuration.yaml:  |-
        
        
        ---
        apiVersion: admissionregistration.k8s.io/v1
        kind: MutatingWebhookConfiguration
        metadata:
          name: mutating-config
          labels:
            app: karmada-webhook
            
        webhooks:
          - name: propagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["propagationpolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-propagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusterpropagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusterpropagationpolicies"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-clusterpropagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: overridepolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["overridepolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-overridepolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: resourcebinding.karmada.io
            rules:
              - operations: ["CREATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourcebindings"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-resourcebinding
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusterresourcebinding.karmada.io
            rules:
              - operations: ["CREATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusterresourcebindings"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-clusterresourcebinding
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: work.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["works"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-work
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: autoscaling.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["autoscaling.karmada.io"]
                apiVersions: ["*"]
                resources: ["federatedhpas"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-federatedhpa
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: multiclusterservice.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["networking.karmada.io"]
                apiVersions: ["*"]
                resources: ["multiclusterservices"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-multiclusterservice
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
        ---
        apiVersion: admissionregistration.k8s.io/v1
        kind: ValidatingWebhookConfiguration
        metadata:
          name: validating-config
          labels:
            app: karmada-webhook
            
        webhooks:
          - name: propagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["propagationpolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-propagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusterpropagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusterpropagationpolicies"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-clusterpropagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: overridepolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["overridepolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-overridepolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusteroverridepolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusteroverridepolicies"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-clusteroverridepolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: config.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["config.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourceinterpreterwebhookconfigurations"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourceinterpreterwebhookconfiguration
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: resourceinterpretercustomization.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["config.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourceinterpretercustomizations"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourceinterpretercustomization
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 10
          - name: federatedresourcequota.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["federatedresourcequotas"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-federatedresourcequota
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: multiclusteringress.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["networking.karmada.io"]
                apiVersions: ["*"]
                resources: ["multiclusteringresses"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-multiclusteringress
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: multiclusterservice.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["networking.karmada.io"]
                apiVersions: ["*"]
                resources: ["multiclusterservices"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-multiclusterservice
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: resourcedeletionprotection.karmada.io
            rules:
              - operations: ["DELETE"]
                apiGroups: ["*"]
                apiVersions: ["*"]
                resources: ["*"]
                scope: "*"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourcedeletionprotection
              
              caBundle: {{ ca_crt }}
            objectSelector:
              matchExpressions:
                - { key: "resourcetemplate.karmada.io/deletion-protected", operator: "Exists" }
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: resourcebinding.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourcebindings"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourcebinding
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: NoneOnDryRun
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
      system-namespace.yaml:  |-
        ---
        apiVersion: v1
        kind: Namespace
        metadata:
          name: karmada-system
          labels:
            
        ---
        apiVersion: v1
        kind: Namespace
        metadata:
          name: karmada-cluster
          labels:
            
      karmada-aggregated-apiserver-apiservice.yaml:  |-
        
        ---
        apiVersion: apiregistration.k8s.io/v1
        kind: APIService
        metadata:
          name: v1alpha1.cluster.karmada.io
          labels:
            app: karmada-aggregated-apiserver
            apiserver: "true"
            
        spec:
          
          caBundle: {{ ca_crt }}
          group: cluster.karmada.io
          groupPriorityMinimum: 2000
          service:
            name: karmada-aggregated-apiserver
            namespace: karmada-system
          version: v1alpha1
          versionPriority: 10
        ---
        apiVersion: v1
        kind: Service
        metadata:
          name: karmada-aggregated-apiserver
          namespace: karmada-system
          labels:
            app: karmada-aggregated-apiserver
            
        spec:
          type: ExternalName
          externalName: karmada-aggregated-apiserver.karmada-system.svc.cluster.local
      cluster-proxy-admin-rbac.yaml:  |-
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: karmada-cluster-proxy-admin
          labels:
            
        rules:
          - apiGroups:
              - 'cluster.karmada.io'
            resources:
              - clusters/proxy
            verbs:
              - '*'
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: karmada-cluster-proxy-admin
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: karmada-cluster-proxy-admin
        subjects:
          - kind: User
            name: "system:admin"
      bootstrap-token-configuration.yaml:  |-
        ---
        apiVersion: v1
        kind: ConfigMap
        metadata:
          name: cluster-info
          namespace: kube-public
          labels:
            
        data:
          kubeconfig: |
            apiVersion: v1
            clusters:
            - cluster:
                
                certificate-authority-data: {{ ca_crt }}
                server: https://karmada-apiserver.karmada-system.svc.cluster.local:5443
            kind: Config
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: Role
        metadata:
          name: system:karmada:bootstrap-signer-clusterinfo
          namespace: kube-public
          labels:
            
        rules:
        - apiGroups:
          - ""
          resourceNames:
          - cluster-info
          resources:
          - configmaps
          verbs:
          - get
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: RoleBinding
        metadata:
          name: system:karmada:bootstrap-signer-clusterinfo
          namespace: kube-public
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: Role
          name: system:karmada:bootstrap-signer-clusterinfo
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: User
          name: system:anonymous
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-bootstrap
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:node-bootstrapper
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: system:bootstrappers:karmada:default-cluster-token
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: system:karmada:certificatesigningrequest:autoapprover
          labels:
            
        rules:
        - apiGroups:
          - certificates.k8s.io
          resources:
          - certificatesigningrequests/clusteragent
          verbs:
          - create
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-autoapprove-bootstrap
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:karmada:certificatesigningrequest:autoapprover
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: system:bootstrappers:karmada:default-cluster-token
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: system:karmada:certificatesigningrequest:selfautoapprover
          labels:
            
        rules:
        - apiGroups:
          - certificates.k8s.io
          resources:
          - certificatesigningrequests/selfclusteragent
          verbs:
          - create
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-autoapprove-certificate-rotation
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:karmada:certificatesigningrequest:selfautoapprover
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: system:karmada:agents
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: system:karmada:agent-rbac-generator
          labels:
            
        rules:
        - apiGroups:
          - "*"
          resources:
          - "*"
          verbs:
          - "*"
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-rbac-generator
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:karmada:agent-rbac-generator
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: User
          name: system:karmada:agent:rbac-generator
      clusterrole.yaml:  |-
        # This configuration is used to grant the admin clusterrole read
        # and write permissions for Karmada resources.
        
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          annotations:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#auto-reconciliation
            # and https://kubernetes.io/docs/reference/access-authn-authz/rbac/#kubectl-auth-reconcile
            rbac.authorization.kubernetes.io/autoupdate: "true"
          labels:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#default-roles-and-role-bindings
            kubernetes.io/bootstrapping: rbac-defaults
            # used to aggregate rules to view clusterrole
            rbac.authorization.k8s.io/aggregate-to-view: "true"
            
          name: karmada-view
        rules:
          - apiGroups:
              - "autoscaling.karmada.io"
            resources:
              - cronfederatedhpas
              - cronfederatedhpas/status
              - federatedhpas
              - federatedhpas/status
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "multicluster.x-k8s.io"
            resources:
              - serviceexports
              - serviceexports/status
              - serviceimports
              - serviceimports/status
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "networking.karmada.io"
            resources:
              - multiclusteringresses
              - multiclusteringresses/status
              - multiclusterservices
              - multiclusterservices/status
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "policy.karmada.io"
            resources:
              - overridepolicies
              - propagationpolicies
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "work.karmada.io"
            resources:
              - resourcebindings
              - resourcebindings/status
              - works
              - works/status
            verbs:
              - get
              - list
              - watch
        
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          annotations:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#auto-reconciliation
            # and https://kubernetes.io/docs/reference/access-authn-authz/rbac/#kubectl-auth-reconcile
            rbac.authorization.kubernetes.io/autoupdate: "true"
          labels:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#default-roles-and-role-bindings
            kubernetes.io/bootstrapping: rbac-defaults
            # used to aggregate rules to view clusterrole
            rbac.authorization.k8s.io/aggregate-to-edit: "true"
            
          name: karmada-edit
        rules:
          - apiGroups:
              - "autoscaling.karmada.io"
            resources:
              - cronfederatedhpas
              - cronfederatedhpas/status
              - federatedhpas
              - federatedhpas/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "multicluster.x-k8s.io"
            resources:
              - serviceexports
              - serviceexports/status
              - serviceimports
              - serviceimports/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "networking.karmada.io"
            resources:
              - multiclusteringresses
              - multiclusteringresses/status
              - multiclusterservices
              - multiclusterservices/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "policy.karmada.io"
            resources:
              - overridepolicies
              - propagationpolicies
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "work.karmada.io"
            resources:
              - resourcebindings
              - resourcebindings/status
              - works
              - works/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
  crds-patches-configmaps.yaml: |-
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: karmada-crds-patches
      namespace: karmada-system
    data:
      webhook_in_clusterresourcebindings.yaml:  |-
        
        
        ---
        # The following patch enables conversion webhook for CRD
        # CRD conversion requires k8s 1.13 or later.
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          name: clusterresourcebindings.work.karmada.io
          labels:
            
        spec:
          conversion:
            strategy: Webhook
            webhook:
              clientConfig:
                url: https://karmada-webhook.karmada-system.svc:443/convert
                
                caBundle: {{ ca_crt }}
              conversionReviewVersions: ["v1"]
        ---
      webhook_in_resourcebindings.yaml:  |-
        
        
        ---
        # The following patch enables conversion webhook for CRD
        # CRD conversion requires k8s 1.13 or later.
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          name: resourcebindings.work.karmada.io
          labels:
            
        spec:
          conversion:
            strategy: Webhook
            webhook:
              clientConfig:
                url: https://karmada-webhook.karmada-system.svc:443/convert
                
                caBundle: {{ ca_crt }}
              conversionReviewVersions: ["v1"]
        ---
---
# Source: karmada/templates/pre-upgrade-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-static-resources
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-upgrade
    "helm.sh/hook-weight": "2"
data:
      webhook-configuration.yaml:  |-
        
        
        ---
        apiVersion: admissionregistration.k8s.io/v1
        kind: MutatingWebhookConfiguration
        metadata:
          name: mutating-config
          labels:
            app: karmada-webhook
            
        webhooks:
          - name: propagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["propagationpolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-propagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusterpropagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusterpropagationpolicies"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-clusterpropagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: overridepolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["overridepolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-overridepolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: resourcebinding.karmada.io
            rules:
              - operations: ["CREATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourcebindings"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-resourcebinding
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusterresourcebinding.karmada.io
            rules:
              - operations: ["CREATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusterresourcebindings"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-clusterresourcebinding
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: work.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["works"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-work
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: autoscaling.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["autoscaling.karmada.io"]
                apiVersions: ["*"]
                resources: ["federatedhpas"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-federatedhpa
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: multiclusterservice.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["networking.karmada.io"]
                apiVersions: ["*"]
                resources: ["multiclusterservices"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/mutate-multiclusterservice
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
        ---
        apiVersion: admissionregistration.k8s.io/v1
        kind: ValidatingWebhookConfiguration
        metadata:
          name: validating-config
          labels:
            app: karmada-webhook
            
        webhooks:
          - name: propagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["propagationpolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-propagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusterpropagationpolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusterpropagationpolicies"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-clusterpropagationpolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: overridepolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["overridepolicies"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-overridepolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: clusteroverridepolicy.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["clusteroverridepolicies"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-clusteroverridepolicy
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: config.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["config.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourceinterpreterwebhookconfigurations"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourceinterpreterwebhookconfiguration
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: resourceinterpretercustomization.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["config.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourceinterpretercustomizations"]
                scope: "Cluster"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourceinterpretercustomization
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 10
          - name: federatedresourcequota.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["policy.karmada.io"]
                apiVersions: ["*"]
                resources: ["federatedresourcequotas"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-federatedresourcequota
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: multiclusteringress.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["networking.karmada.io"]
                apiVersions: ["*"]
                resources: ["multiclusteringresses"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-multiclusteringress
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
          - name: multiclusterservice.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["networking.karmada.io"]
                apiVersions: ["*"]
                resources: ["multiclusterservices"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-multiclusterservice
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: resourcedeletionprotection.karmada.io
            rules:
              - operations: ["DELETE"]
                apiGroups: ["*"]
                apiVersions: ["*"]
                resources: ["*"]
                scope: "*"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourcedeletionprotection
              
              caBundle: {{ ca_crt }}
            objectSelector:
              matchExpressions:
                - { key: "resourcetemplate.karmada.io/deletion-protected", operator: "Exists" }
            failurePolicy: Fail
            sideEffects: None
            admissionReviewVersions: [ "v1" ]
            timeoutSeconds: 3
          - name: resourcebinding.karmada.io
            rules:
              - operations: ["CREATE", "UPDATE"]
                apiGroups: ["work.karmada.io"]
                apiVersions: ["*"]
                resources: ["resourcebindings"]
                scope: "Namespaced"
            clientConfig:
              url: https://karmada-webhook.karmada-system.svc:443/validate-resourcebinding
              
              caBundle: {{ ca_crt }}
            failurePolicy: Fail
            sideEffects: NoneOnDryRun
            admissionReviewVersions: ["v1"]
            timeoutSeconds: 3
      system-namespace.yaml:  |-
        ---
        apiVersion: v1
        kind: Namespace
        metadata:
          name: karmada-system
          labels:
            
        ---
        apiVersion: v1
        kind: Namespace
        metadata:
          name: karmada-cluster
          labels:
            
      karmada-aggregated-apiserver-apiservice.yaml:  |-
        
        ---
        apiVersion: apiregistration.k8s.io/v1
        kind: APIService
        metadata:
          name: v1alpha1.cluster.karmada.io
          labels:
            app: karmada-aggregated-apiserver
            apiserver: "true"
            
        spec:
          
          caBundle: {{ ca_crt }}
          group: cluster.karmada.io
          groupPriorityMinimum: 2000
          service:
            name: karmada-aggregated-apiserver
            namespace: karmada-system
          version: v1alpha1
          versionPriority: 10
        ---
        apiVersion: v1
        kind: Service
        metadata:
          name: karmada-aggregated-apiserver
          namespace: karmada-system
          labels:
            app: karmada-aggregated-apiserver
            
        spec:
          type: ExternalName
          externalName: karmada-aggregated-apiserver.karmada-system.svc.cluster.local
      cluster-proxy-admin-rbac.yaml:  |-
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: karmada-cluster-proxy-admin
          labels:
            
        rules:
          - apiGroups:
              - 'cluster.karmada.io'
            resources:
              - clusters/proxy
            verbs:
              - '*'
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: karmada-cluster-proxy-admin
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: karmada-cluster-proxy-admin
        subjects:
          - kind: User
            name: "system:admin"
      bootstrap-token-configuration.yaml:  |-
        ---
        apiVersion: v1
        kind: ConfigMap
        metadata:
          name: cluster-info
          namespace: kube-public
          labels:
            
        data:
          kubeconfig: |
            apiVersion: v1
            clusters:
            - cluster:
                
                certificate-authority-data: {{ ca_crt }}
                server: https://karmada-apiserver.karmada-system.svc.cluster.local:5443
            kind: Config
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: Role
        metadata:
          name: system:karmada:bootstrap-signer-clusterinfo
          namespace: kube-public
          labels:
            
        rules:
        - apiGroups:
          - ""
          resourceNames:
          - cluster-info
          resources:
          - configmaps
          verbs:
          - get
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: RoleBinding
        metadata:
          name: system:karmada:bootstrap-signer-clusterinfo
          namespace: kube-public
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: Role
          name: system:karmada:bootstrap-signer-clusterinfo
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: User
          name: system:anonymous
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-bootstrap
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:node-bootstrapper
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: system:bootstrappers:karmada:default-cluster-token
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: system:karmada:certificatesigningrequest:autoapprover
          labels:
            
        rules:
        - apiGroups:
          - certificates.k8s.io
          resources:
          - certificatesigningrequests/clusteragent
          verbs:
          - create
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-autoapprove-bootstrap
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:karmada:certificatesigningrequest:autoapprover
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: system:bootstrappers:karmada:default-cluster-token
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: system:karmada:certificatesigningrequest:selfautoapprover
          labels:
            
        rules:
        - apiGroups:
          - certificates.k8s.io
          resources:
          - certificatesigningrequests/selfclusteragent
          verbs:
          - create
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-autoapprove-certificate-rotation
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:karmada:certificatesigningrequest:selfautoapprover
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: system:karmada:agents
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: system:karmada:agent-rbac-generator
          labels:
            
        rules:
        - apiGroups:
          - "*"
          resources:
          - "*"
          verbs:
          - "*"
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: system:karmada:agent-rbac-generator
          labels:
            
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:karmada:agent-rbac-generator
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: User
          name: system:karmada:agent:rbac-generator
      clusterrole.yaml:  |-
        # This configuration is used to grant the admin clusterrole read
        # and write permissions for Karmada resources.
        
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          annotations:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#auto-reconciliation
            # and https://kubernetes.io/docs/reference/access-authn-authz/rbac/#kubectl-auth-reconcile
            rbac.authorization.kubernetes.io/autoupdate: "true"
          labels:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#default-roles-and-role-bindings
            kubernetes.io/bootstrapping: rbac-defaults
            # used to aggregate rules to view clusterrole
            rbac.authorization.k8s.io/aggregate-to-view: "true"
            
          name: karmada-view
        rules:
          - apiGroups:
              - "autoscaling.karmada.io"
            resources:
              - cronfederatedhpas
              - cronfederatedhpas/status
              - federatedhpas
              - federatedhpas/status
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "multicluster.x-k8s.io"
            resources:
              - serviceexports
              - serviceexports/status
              - serviceimports
              - serviceimports/status
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "networking.karmada.io"
            resources:
              - multiclusteringresses
              - multiclusteringresses/status
              - multiclusterservices
              - multiclusterservices/status
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "policy.karmada.io"
            resources:
              - overridepolicies
              - propagationpolicies
            verbs:
              - get
              - list
              - watch
          - apiGroups:
              - "work.karmada.io"
            resources:
              - resourcebindings
              - resourcebindings/status
              - works
              - works/status
            verbs:
              - get
              - list
              - watch
        
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          annotations:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#auto-reconciliation
            # and https://kubernetes.io/docs/reference/access-authn-authz/rbac/#kubectl-auth-reconcile
            rbac.authorization.kubernetes.io/autoupdate: "true"
          labels:
            # refer to https://kubernetes.io/docs/reference/access-authn-authz/rbac/#default-roles-and-role-bindings
            kubernetes.io/bootstrapping: rbac-defaults
            # used to aggregate rules to view clusterrole
            rbac.authorization.k8s.io/aggregate-to-edit: "true"
            
          name: karmada-edit
        rules:
          - apiGroups:
              - "autoscaling.karmada.io"
            resources:
              - cronfederatedhpas
              - cronfederatedhpas/status
              - federatedhpas
              - federatedhpas/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "multicluster.x-k8s.io"
            resources:
              - serviceexports
              - serviceexports/status
              - serviceimports
              - serviceimports/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "networking.karmada.io"
            resources:
              - multiclusteringresses
              - multiclusteringresses/status
              - multiclusterservices
              - multiclusterservices/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "policy.karmada.io"
            resources:
              - overridepolicies
              - propagationpolicies
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
          - apiGroups:
              - "work.karmada.io"
            resources:
              - resourcebindings
              - resourcebindings/status
              - works
              - works/status
            verbs:
              - create
              - delete
              - deletecollection
              - patch
              - update
---
# Source: karmada/templates/pre-upgrade-job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: karmada-crds-patches
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-upgrade
    "helm.sh/hook-weight": "2"
data:
      webhook_in_clusterresourcebindings.yaml:  |-
        
        
        ---
        # The following patch enables conversion webhook for CRD
        # CRD conversion requires k8s 1.13 or later.
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          name: clusterresourcebindings.work.karmada.io
          labels:
            
        spec:
          conversion:
            strategy: Webhook
            webhook:
              clientConfig:
                url: https://karmada-webhook.karmada-system.svc:443/convert
                
                caBundle: {{ ca_crt }}
              conversionReviewVersions: ["v1"]
        ---
      webhook_in_resourcebindings.yaml:  |-
        
        
        ---
        # The following patch enables conversion webhook for CRD
        # CRD conversion requires k8s 1.13 or later.
        apiVersion: apiextensions.k8s.io/v1
        kind: CustomResourceDefinition
        metadata:
          name: resourcebindings.work.karmada.io
          labels:
            
        spec:
          conversion:
            strategy: Webhook
            webhook:
              clientConfig:
                url: https://karmada-webhook.karmada-system.svc:443/convert
                
                caBundle: {{ ca_crt }}
              conversionReviewVersions: ["v1"]
        ---
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: karmada-hook-job
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "1"
  labels:
    
rules:
  - apiGroups: ['*']
    resources: ['*']
    verbs: ["get", "watch", "list", "create", "update", "patch", "delete"]
  - nonResourceURLs: ['*']
    verbs: ["get"]
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: karmada-hook-job
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "1"
  labels:
    
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: karmada-hook-job
subjects:
  - kind: ServiceAccount
    name: karmada-hook-job
    namespace: karmada-system
---
# Source: karmada/templates/post-delete-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "karmada-post-delete"
  namespace: karmada-system
  labels:
    helm.sh/chart: "karmada-v1.16.0"
    
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": post-delete
    "helm.sh/hook-weight": "0"
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  parallelism: 1
  completions: 1
  template:
    metadata:
      name: karmada
      labels:
        helm.sh/chart: "karmada-v1.16.0"
    spec:
      
      serviceAccountName: karmada-hook-job
      restartPolicy: Never
      containers:
        - name: post-delete
          image: docker.io/bitnamisecure/kubectl:latest
          imagePullPolicy: IfNotPresent
          command:
            - /bin/sh
            - -c
            - |
              bash <<'EOF'
              set -ex
              kubectl delete -f /opt/mount/ --ignore-not-found=true
              kubectl delete -f /opt/crds/ --ignore-not-found=true -R
              kubectl delete -f /opt/static-resources/ --ignore-not-found=true -R
              kubectl delete cm/karmada-config -n karmada-system --ignore-not-found=true
              kubectl delete deployment/karmada-controller-manager -n karmada-system --ignore-not-found=true
              EOF
          volumeMounts:
            - name: mount
              mountPath: /opt/mount
            - name: crds-autoscaling-base
              mountPath: /opt/crds/base/autoscaling
            - name: crds-config-base
              mountPath: /opt/crds/base/config
            - name: crds-multicluster-base
              mountPath: /opt/crds/base/multicluster
            - name: crds-networking-base
              mountPath: /opt/crds/base/networking
            - name: crds-policy-base
              mountPath: /opt/crds/base/policy
            - name: crds-remedy-base
              mountPath: /opt/crds/base/remedy
            - name: crds-work-base
              mountPath: /opt/crds/base/work
            - name: static-resources
              mountPath: /opt/static-resources
      volumes:
      - name: mount
        configMap:
          name: karmada-config
      - name: crds-autoscaling-base
        configMap:
          name: karmada-crds-autoscaling-bases
      - name: crds-config-base
        configMap:
          name: karmada-crds-config-bases
      - name: crds-multicluster-base
        configMap:
          name: karmada-crds-multicluster-bases
      - name: crds-networking-base
        configMap:
          name: karmada-crds-networking-bases
      - name: crds-policy-base
        configMap:
          name: karmada-crds-policy-bases
      - name: crds-remedy-base
        configMap:
          name: karmada-crds-remedy-bases
      - name: crds-work-base
        configMap:
          name: karmada-crds-work-bases
      - name: crds-apps-base
        configMap:
          name: karmada-crds-apps-bases
      - name: static-resources
        configMap:
          name: karmada-static-resources
---
# Source: karmada/templates/pre-install-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "karmada-pre-install"
  namespace: karmada-system
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "3"
    "helm.sh/hook-delete-policy": hook-succeeded
  labels:
    
spec:
  parallelism: 1
  completions: 1
  template:
    metadata:
      name: karmada
      labels:
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "karmada"
        helm.sh/chart: "karmada-v1.16.0"
    spec:
      
      serviceAccountName: karmada-hook-job
      restartPolicy: Never
      initContainers:
      - name: init
        image: docker.io/cfssl/cfssl:latest
        imagePullPolicy: IfNotPresent
        workingDir: /opt/mount
        command:
        - /bin/sh
        - -c
        - |
          bash <<'EOF'
          set -ex
          mkdir -p /opt/configs
          mkdir -p /opt/certs
          cp -r -L /opt/mount/* /opt/configs/
          openssl req -x509 -sha256 -new -nodes -days 3650 -newkey rsa:3072 -keyout "/opt/certs/server-ca.key" -out "/opt/certs/server-ca.crt" -subj "/C=xx/ST=x/L=x/O=x/OU=x/CN=ca/emailAddress=x/"
          openssl req -x509 -sha256 -new -nodes -days 3650 -newkey rsa:3072 -keyout "/opt/certs/front-proxy-ca.key" -out "/opt/certs/front-proxy-ca.crt" -subj "/C=xx/ST=x/L=x/O=x/OU=x/CN=ca/emailAddress=x/"
          echo '{"signing":{"default":{"expiry":"43800h","usages":["signing","key encipherment","client auth","server auth"]}}}' > "/opt/certs/server-ca-config.json"
          echo '{"CN":"system:admin","hosts":["kubernetes.default.svc","*.etcd.karmada-system.svc.cluster.local","*.karmada-system.svc.cluster.local","*.karmada-system.svc","localhost","127.0.0.1"],"names":[{"O":"system:masters"}],"key":{"algo":"rsa","size":3072}}' | cfssl gencert -ca=/opt/certs/server-ca.crt -ca-key=/opt/certs/server-ca.key -config=/opt/certs/server-ca-config.json - | cfssljson -bare /opt/certs/karmada
          echo '{"signing":{"default":{"expiry":"43800h","usages":["signing","key encipherment","client auth","server auth"]}}}' > "/opt/certs/front-proxy-ca-config.json"
          echo '{"CN":"front-proxy-client","hosts":["kubernetes.default.svc","*.etcd.karmada-system.svc.cluster.local","*.karmada-system.svc.cluster.local","*.karmada-system.svc","localhost","127.0.0.1"],"names":[{"O":"system:masters"}],"key":{"algo":"rsa","size":3072}}' | cfssl gencert -ca=/opt/certs/front-proxy-ca.crt -ca-key=/opt/certs/front-proxy-ca.key -config=/opt/certs/front-proxy-ca-config.json - | cfssljson -bare /opt/certs/front-proxy-client
          karmada_ca=$(base64 /opt/certs/server-ca.crt | tr -d '\r\n')
          karmada_ca_key=$(base64 /opt/certs/server-ca.key | tr -d '\r\n')
          karmada_crt=$(base64 /opt/certs/karmada.pem | tr -d '\r\n')
          karmada_key=$(base64 /opt/certs/karmada-key.pem | tr -d '\r\n')
          front_proxy_ca=$(base64 /opt/certs/front-proxy-ca.crt | tr -d '\r\n')
          front_proxy_client_crt=$(base64 /opt/certs/front-proxy-client.pem | tr -d '\r\n')
          front_proxy_client_key=$(base64 /opt/certs/front-proxy-client-key.pem | tr -d '\r\n')
          sed -i'' -e "s/{{ ca_crt }}/${karmada_ca}/g" /opt/configs/cert.yaml
          sed -i'' -e "s/{{ ca_key }}/${karmada_ca_key}/g" /opt/configs/cert.yaml
          sed -i'' -e "s/{{ crt }}/${karmada_crt}/g" /opt/configs/cert.yaml
          sed -i'' -e "s/{{ key }}/${karmada_key}/g" /opt/configs/cert.yaml
          sed -i'' -e "s/{{ front_proxy_ca_crt }}/${front_proxy_ca}/g" /opt/configs/cert.yaml
          sed -i'' -e "s/{{ front_proxy_crt }}/${front_proxy_client_crt}/g" /opt/configs/cert.yaml
          sed -i'' -e "s/{{ front_proxy_key }}/${front_proxy_client_key}/g" /opt/configs/cert.yaml
          sed -i'' -e "s/{{ ca_crt }}/${karmada_ca}/g" /opt/configs/kubeconfig.yaml
          sed -i'' -e "s/{{ crt }}/${karmada_crt}/g" /opt/configs/kubeconfig.yaml
          sed -i'' -e "s/{{ key }}/${karmada_key}/g" /opt/configs/kubeconfig.yaml
          sed -i'' -e "s/{{ crt }}/${karmada_crt}/g" /opt/configs/webhook-cert.yaml
          sed -i'' -e "s/{{ key }}/${karmada_key}/g" /opt/configs/webhook-cert.yaml
          sed -i'' -e "s/{{ ca_crt }}/${karmada_ca}/g" /opt/configs/static-resources-configmaps.yaml
          sed -i'' -e "s/{{ ca_crt }}/${karmada_ca}/g" /opt/configs/crds-patches-configmaps.yaml
          EOF
        volumeMounts:
        - name: mount
          mountPath: /opt/mount
        - name: configs
          mountPath: /opt/configs
      containers:
      - name: pre-install
        image: docker.io/bitnamisecure/kubectl:latest
        imagePullPolicy: IfNotPresent
        workingDir: /opt/mount
        command:
        - /bin/sh
        - -c
        - |
          bash <<'EOF'
          set -ex
          kubectl apply --server-side -f /opt/configs/
          EOF
        volumeMounts:
        - name: mount
          mountPath: /opt/mount
        - name: configs
          mountPath: /opt/configs
      volumes:
      - name: mount
        configMap:
          name: karmada-config
      - name: configs
        emptyDir: {}
---
# Source: karmada/templates/pre-upgrade-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "karmada-pre-upgrade"
  namespace: karmada-system
  annotations:
    "helm.sh/hook": pre-upgrade
    "helm.sh/hook-weight": "3"
    "helm.sh/hook-delete-policy": hook-succeeded
  labels:
    
spec:
  parallelism: 1
  completions: 1
  template:
    metadata:
      name: karmada-pre-upgrade
      labels:
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "karmada"
        helm.sh/chart: "karmada-v1.16.0"
    spec:
      
      serviceAccountName: karmada-hook-job
      restartPolicy: Never
      containers:
      - name: pre-upgrade
        image: docker.io/bitnamisecure/kubectl:latest
        imagePullPolicy: IfNotPresent
        command:
        - /bin/sh
        - -c
        - |
          set -ex
          # Fetch certs from existing secret
          karmada_ca=$(kubectl get secret karmada-cert -n karmada-system -o jsonpath='{.data.server-ca\.crt}')
          kubectl get configmap karmada-static-resources -n karmada-system -o yaml | sed -e "s/{{ ca_crt }}/${karmada_ca}/g" | kubectl apply -f -
          kubectl get configmap karmada-crds-patches -n karmada-system -o yaml | sed -e "s/{{ ca_crt }}/${karmada_ca}/g" | kubectl apply -f -
        resources:
          requests:
            cpu: 50m
            memory: 64Mi
          limits:
            cpu: 100m
            memory: 128Mi
